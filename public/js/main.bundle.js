/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{OG:()=>bi,My:()=>ui,bytesToNumberBE:()=>hi,lX:()=>fi,Id:()=>wi,fg:()=>ki,qj:()=>yi,hexToBytes:()=>pi,lq:()=>mi,z:()=>gi,Q5:()=>vi});const n="BizenDAO",s="https://polygon-rpc.com",r="POLYGON",a="137",i="0x39615ac8f231D0099114eaC3095431e210C8f654",o="0xe183C088e08f12313De1bdFA7fbb264dE966dB0e",l="POL",c="https://ehfm6q914a.execute-api.ap-northeast-1.amazonaws.com/",u="https://permaweb.bon-soleil.com/api/akord/";var d=window.location.href,p=window.location.pathname,h=window.location.hostname,f=window.location.search;const m=new URLSearchParams(f),g=p.split("/"),y=["en","ja","idn"];let w=m.get("lang"),b=localStorage.getItem("lang");null!=w&&(b=w),y.includes(b)||(b="en"),console.log("yourLang:"+b),localStorage.setItem("lang",b);const A={lang:b,langSet:y,fullUrl:d,path:p,host:h,queryString:f,getParams:()=>{const e=window.location.pathname.split("/");return e.shift(),e.shift(),e.join("/")},params:g},E="6.12.1";function k(e,t,n){const s=t.split("|").map((e=>e.trim()));for(let n=0;n<s.length;n++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const r=new Error(`invalid value for type ${t}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${n}`,r.value=e,r}async function T(e){const t=Object.keys(e);return(await Promise.all(t.map((t=>Promise.resolve(e[t]))))).reduce(((e,n,s)=>(e[t[s]]=n,e)),{})}function v(e,t,n){for(let s in t){let r=t[s];const a=n?n[s]:null;a&&k(r,a,s),Object.defineProperty(e,s,{enumerable:!0,value:r,writable:!1})}}function C(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(C).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let s=0;s<e.length;s++)n+=t[e[s]>>4],n+=t[15&e[s]];return n}if("object"==typeof e&&"function"==typeof e.toJSON)return C(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);return t.sort(),"{ "+t.map((t=>`${C(t)}: ${C(e[t])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function x(e,t){return e&&e.code===t}function I(e){return x(e,"CALL_EXCEPTION")}function N(e,t,n){let s,r=e;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${C(n)}`);for(const e in n){if("shortMessage"===e)continue;const t=n[e];s.push(e+"="+C(t))}}s.push(`code=${t}`),s.push(`version=${E}`),s.length&&(e+=" ("+s.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":s=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(e);break;default:s=new Error(e)}return v(s,{code:t}),n&&Object.assign(s,n),null==s.shortMessage&&v(s,{shortMessage:r}),s}function L(e,t,n,s){if(!e)throw N(t,n,s)}function B(e,t,n,s){L(e,t,"INVALID_ARGUMENT",{argument:n,value:s})}function O(e,t,n){null==n&&(n=""),n&&(n=": "+n),L(e>=t,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),L(e<=t,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const P=["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(e){}return e}),[]);function S(e,t,n){if(null==n&&(n=""),e!==t){let e=n,t="new";n&&(e+=".",t+=" "+n),L(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function R(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let n=2;for(let s=0;s<t.length;s++)t[s]=parseInt(e.substring(n,n+2),16),n+=2;return t}B(!1,"invalid BytesLike value",t||"value",e)}function M(e,t){return R(e,t,!1)}function D(e,t){return R(e,t,!0)}function U(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof t&&e.length!==2+2*t||!0===t&&e.length%2!=0)}function F(e){return U(e,!0)||e instanceof Uint8Array}const H="0123456789abcdef";function G(e){const t=M(e);let n="0x";for(let e=0;e<t.length;e++){const s=t[e];n+=H[(240&s)>>4]+H[15&s]}return n}function _(e){return"0x"+e.map((e=>G(e).substring(2))).join("")}function Q(e){return U(e,!0)?(e.length-2)/2:M(e).length}function z(e,t,n){const s=M(e);return null!=n&&n>s.length&&L(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n}),G(s.slice(null==t?0:t,null==n?s.length:n))}function j(e,t,n){const s=M(e);L(t>=s.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(s),length:t,offset:t+1});const r=new Uint8Array(t);return r.fill(0),n?r.set(s,t-s.length):r.set(s,0),G(r)}function V(e,t){return j(e,t,!0)}const J=BigInt(0),K=BigInt(1),q=9007199254740991;function Z(e,t){let n=W(e,"value");const s=BigInt(te(t,"width")),r=K<<s-K;return n<J?(n=-n,L(n<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~n&(K<<s)-K)+K):(L(n<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),n)}function Y(e,t){const n=X(e,"value"),s=BigInt(te(t,"bits"));return n&(K<<s)-K}function W(e,t){switch(typeof e){case"bigint":return e;case"number":return B(Number.isInteger(e),"underflow",t||"value",e),B(e>=-q&&e<=q,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(n){B(!1,`invalid BigNumberish string: ${n.message}`,t||"value",e)}}B(!1,"invalid BigNumberish value",t||"value",e)}function X(e,t){const n=W(e,t);return L(n>=J,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const $="0123456789abcdef";function ee(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=$[n>>4],t+=$[15&n];return BigInt(t)}return W(e)}function te(e,t){switch(typeof e){case"bigint":return B(e>=-q&&e<=q,"overflow",t||"value",e),Number(e);case"number":return B(Number.isInteger(e),"underflow",t||"value",e),B(e>=-q&&e<=q,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return te(BigInt(e),t)}catch(n){B(!1,`invalid numeric string: ${n.message}`,t||"value",e)}}B(!1,"invalid numeric value",t||"value",e)}function ne(e,t){let n=X(e,"value").toString(16);if(null==t)n.length%2&&(n="0"+n);else{const s=te(t,"width");for(L(2*s>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});n.length<2*s;)n="0"+n}return"0x"+n}function se(e){const t=X(e,"value");if(t===J)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const s=new Uint8Array(n.length/2);for(let e=0;e<s.length;e++){const t=2*e;s[e]=parseInt(n.substring(t,t+2),16)}return s}function re(e){let t=G(F(e)?e:se(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}const ae=32,ie=new Uint8Array(ae),oe=["then"],le={};function ce(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);throw n.error=t,n}class ue extends Array{#e;constructor(...e){const t=e[0];let n=e[1],s=(e[2]||[]).slice(),r=!0;t!==le&&(n=e,s=[],r=!1),super(n.length),n.forEach(((e,t)=>{this[t]=e}));const a=s.reduce(((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e)),new Map);if(this.#e=Object.freeze(n.map(((e,t)=>{const n=s[t];return null!=n&&1===a.get(n)?n:null}))),r)return Object.freeze(this),new Proxy(this,{get:(e,t,n)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){const n=te(t,"%index");if(n<0||n>=this.length)throw new RangeError("out of result range");const s=e[n];return s instanceof Error&&ce(`index ${n}`,s),s}if(oe.indexOf(t)>=0)return Reflect.get(e,t,n);const s=e[t];if(s instanceof Function)return function(...t){return s.apply(this===n?e:this,t)};if(!(t in e))return e.getValue.apply(this===n?e:this,[t])}return Reflect.get(e,t,n)}})}toArray(e){const t=[];return this.forEach(((n,s)=>{n instanceof Error&&ce(`index ${s}`,n),e&&n instanceof ue&&(n=n.toArray(e)),t.push(n)})),t}toObject(e){return this.#e.reduce(((t,n,s)=>{if(L(null!=n,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),!(n in t)){let s=this.getValue(n);e&&s instanceof ue&&(s=s.toObject(e)),t[n]=s}return t}),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);const n=[],s=[];for(let r=e;r<t;r++)n.push(this[r]),s.push(this.#e[r]);return new ue(le,n,s)}filter(e,t){const n=[],s=[];for(let r=0;r<this.length;r++){const a=this[r];a instanceof Error&&ce(`index ${r}`,a),e.call(t,a,r,this)&&(n.push(a),s.push(this.#e[r]))}return new ue(le,n,s)}map(e,t){const n=[];for(let s=0;s<this.length;s++){const r=this[s];r instanceof Error&&ce(`index ${s}`,r),n.push(e.call(t,r,s,this))}return n}getValue(e){const t=this.#e.indexOf(e);if(-1===t)return;const n=this[t];return n instanceof Error&&ce(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,t){return new ue(le,e,t)}}function de(e){let t=se(e);return L(t.length<=ae,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:ae,offset:t.length}),t.length!==ae&&(t=D(_([ie.slice(t.length%ae),t]))),t}class pe{name;type;localName;dynamic;constructor(e,t,n,s){v(this,{name:e,type:t,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){B(!1,e,this.localName,t)}}class he{#t;#n;constructor(){this.#t=[],this.#n=0}get data(){return _(this.#t)}get length(){return this.#n}#s(e){return this.#t.push(e),this.#n+=e.length,e.length}appendWriter(e){return this.#s(D(e.data))}writeBytes(e){let t=D(e);const n=t.length%ae;return n&&(t=D(_([t,ie.slice(n)]))),this.#s(t)}writeValue(e){return this.#s(de(e))}writeUpdatableValue(){const e=this.#t.length;return this.#t.push(ie),this.#n+=ae,t=>{this.#t[e]=de(t)}}}class fe{allowLoose;#t;#r;#a;#i;#o;constructor(e,t,n){v(this,{allowLoose:!!t}),this.#t=D(e),this.#a=0,this.#i=null,this.#o=null!=n?n:1024,this.#r=0}get data(){return G(this.#t)}get dataLength(){return this.#t.length}get consumed(){return this.#r}get bytes(){return new Uint8Array(this.#t)}#l(e){if(this.#i)return this.#i.#l(e);this.#a+=e,L(this.#o<1||this.#a<=this.#o*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#o} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:D(this.#t),offset:this.#r,length:e,info:{bytesRead:this.#a,dataLength:this.dataLength}})}#c(e,t,n){let s=Math.ceil(t/ae)*ae;return this.#r+s>this.#t.length&&(this.allowLoose&&n&&this.#r+t<=this.#t.length?s=t:L(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:D(this.#t),length:this.#t.length,offset:this.#r+s})),this.#t.slice(this.#r,this.#r+s)}subReader(e){const t=new fe(this.#t.slice(this.#r+e),this.allowLoose,this.#o);return t.#i=this,t}readBytes(e,t){let n=this.#c(0,e,!!t);return this.#l(e),this.#r+=n.length,n.slice(0,e)}readValue(){return ee(this.readBytes(ae))}readIndex(){return te(ee(this.readBytes(ae)))}}function me(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function ge(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function ye(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function we(e,t){ge(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const be=BigInt(2**32-1),Ae=BigInt(32);function Ee(e,t=!1){return t?{h:Number(e&be),l:Number(e>>Ae&be)}:{h:0|Number(e>>Ae&be),l:0|Number(e&be)}}function ke(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:a,l:i}=Ee(e[r],t);[n[r],s[r]]=[a,i]}return[n,s]}const Te=(e,t,n)=>e<<n|t>>>32-n,ve=(e,t,n)=>t<<n|e>>>32-n,Ce=(e,t,n)=>t<<n-32|e>>>64-n,xe=(e,t,n)=>e<<n-32|t>>>64-n,Ie={fromBig:Ee,split:ke,toBig:(e,t)=>BigInt(e>>>0)<<Ae|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:Te,rotlSL:ve,rotlBH:Ce,rotlBL:xe,add:function(e,t,n,s){const r=(t>>>0)+(s>>>0);return{h:e+n+(r/2**32|0)|0,l:0|r}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,s)=>t+n+s+(e/2**32|0)|0,add4L:(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),add4H:(e,t,n,s,r)=>t+n+s+r+(e/2**32|0)|0,add5H:(e,t,n,s,r,a)=>t+n+s+r+a+(e/2**32|0)|0,add5L:(e,t,n,s,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(r>>>0)},Ne="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Le=e=>e instanceof Uint8Array,Be=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Oe=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Pe(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!Le(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class Se{clone(){return this._cloneInto()}}function Re(e){const t=t=>e().update(Pe(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Me(e=32){if(Ne&&"function"==typeof Ne.getRandomValues)return Ne.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const[De,Ue,Fe]=[[],[],[]],He=BigInt(0),Ge=BigInt(1),_e=BigInt(2),Qe=BigInt(7),ze=BigInt(256),je=BigInt(113);for(let e=0,t=Ge,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],De.push(2*(5*s+n)),Ue.push((e+1)*(e+2)/2%64);let r=He;for(let e=0;e<7;e++)t=(t<<Ge^(t>>Qe)*je)%ze,t&_e&&(r^=Ge<<(Ge<<BigInt(e))-Ge);Fe.push(r)}const[Ve,Je]=ke(Fe,!0),Ke=(e,t,n)=>n>32?Ce(e,t,n):Te(e,t,n),qe=(e,t,n)=>n>32?xe(e,t,n):ve(e,t,n);class Ze extends Se{constructor(e,t,n,s=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,me(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const s=(t+8)%10,r=(t+2)%10,a=n[r],i=n[r+1],o=Ke(a,i,1)^n[s],l=qe(a,i,1)^n[s+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=l}let t=e[2],r=e[3];for(let n=0;n<24;n++){const s=Ue[n],a=Ke(t,r,s),i=qe(t,r,s),o=De[n];t=e[o],r=e[o+1],e[o]=a,e[o+1]=i}for(let t=0;t<50;t+=10){for(let s=0;s<10;s++)n[s]=e[t+s];for(let s=0;s<10;s++)e[t+s]^=~n[(s+2)%10]&n[(s+4)%10]}e[0]^=Ve[s],e[1]^=Je[s]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ye(this);const{blockLen:t,state:n}=this,s=(e=Pe(e)).length;for(let r=0;r<s;){const a=Math.min(t-this.pos,s-r);for(let t=0;t<a;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,128&t&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ye(this,!1),ge(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,r=e.length;s<r;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,r-s);e.set(t.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return me(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(we(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:r,enableXOF:a}=this;return e||(e=new Ze(t,n,s,a,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const Ye=((e,t,n)=>Re((()=>new Ze(t,e,n))))(1,136,32);let We=!1;const Xe=function(e){return Ye(e)};let $e=Xe;function et(e){const t=M(e,"data");return G($e(t))}et._=Xe,et.lock=function(){We=!0},et.register=function(e){if(We)throw new TypeError("keccak256 is locked");$e=e},Object.freeze(et);const tt=BigInt(0),nt=BigInt(36);function st(e){const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let e=0;e<40;e++)n[e]=t[e].charCodeAt(0);const s=M(et(n));for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&s[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const rt={};for(let e=0;e<10;e++)rt[String(e)]=String(e);for(let e=0;e<26;e++)rt[String.fromCharCode(65+e)]=String(10+e);const at=15;const it=function(){const e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function ot(e){if(B("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=st(e);return B(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){B(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>rt[e])).join("");for(;t.length>=at;){let e=t.substring(0,at);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=tt;for(let n=0;n<e.length;n++)t=t*nt+it[e[n]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return st("0x"+t)}B(!1,"invalid address","address",e)}const lt={};function ct(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new pt(lt,`${n?"":"u"}int${t}`,e,{signed:n,width:t})}function ut(e,t){return new pt(lt,`bytes${t||""}`,e,{size:t})}const dt=Symbol.for("_ethers_typed");class pt{type;value;#u;_typedSymbol;constructor(e,t,n,s){null==s&&(s=null),S(lt,e,"Typed"),v(this,{_typedSymbol:dt,type:t,value:n}),this.#u=s,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((e=>e.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#u}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#u?-1:!1===this.#u?this.value.length:null}static from(e,t){return new pt(lt,e,t)}static uint8(e){return ct(e,8)}static uint16(e){return ct(e,16)}static uint24(e){return ct(e,24)}static uint32(e){return ct(e,32)}static uint40(e){return ct(e,40)}static uint48(e){return ct(e,48)}static uint56(e){return ct(e,56)}static uint64(e){return ct(e,64)}static uint72(e){return ct(e,72)}static uint80(e){return ct(e,80)}static uint88(e){return ct(e,88)}static uint96(e){return ct(e,96)}static uint104(e){return ct(e,104)}static uint112(e){return ct(e,112)}static uint120(e){return ct(e,120)}static uint128(e){return ct(e,128)}static uint136(e){return ct(e,136)}static uint144(e){return ct(e,144)}static uint152(e){return ct(e,152)}static uint160(e){return ct(e,160)}static uint168(e){return ct(e,168)}static uint176(e){return ct(e,176)}static uint184(e){return ct(e,184)}static uint192(e){return ct(e,192)}static uint200(e){return ct(e,200)}static uint208(e){return ct(e,208)}static uint216(e){return ct(e,216)}static uint224(e){return ct(e,224)}static uint232(e){return ct(e,232)}static uint240(e){return ct(e,240)}static uint248(e){return ct(e,248)}static uint256(e){return ct(e,256)}static uint(e){return ct(e,256)}static int8(e){return ct(e,-8)}static int16(e){return ct(e,-16)}static int24(e){return ct(e,-24)}static int32(e){return ct(e,-32)}static int40(e){return ct(e,-40)}static int48(e){return ct(e,-48)}static int56(e){return ct(e,-56)}static int64(e){return ct(e,-64)}static int72(e){return ct(e,-72)}static int80(e){return ct(e,-80)}static int88(e){return ct(e,-88)}static int96(e){return ct(e,-96)}static int104(e){return ct(e,-104)}static int112(e){return ct(e,-112)}static int120(e){return ct(e,-120)}static int128(e){return ct(e,-128)}static int136(e){return ct(e,-136)}static int144(e){return ct(e,-144)}static int152(e){return ct(e,-152)}static int160(e){return ct(e,-160)}static int168(e){return ct(e,-168)}static int176(e){return ct(e,-176)}static int184(e){return ct(e,-184)}static int192(e){return ct(e,-192)}static int200(e){return ct(e,-200)}static int208(e){return ct(e,-208)}static int216(e){return ct(e,-216)}static int224(e){return ct(e,-224)}static int232(e){return ct(e,-232)}static int240(e){return ct(e,-240)}static int248(e){return ct(e,-248)}static int256(e){return ct(e,-256)}static int(e){return ct(e,-256)}static bytes1(e){return ut(e,1)}static bytes2(e){return ut(e,2)}static bytes3(e){return ut(e,3)}static bytes4(e){return ut(e,4)}static bytes5(e){return ut(e,5)}static bytes6(e){return ut(e,6)}static bytes7(e){return ut(e,7)}static bytes8(e){return ut(e,8)}static bytes9(e){return ut(e,9)}static bytes10(e){return ut(e,10)}static bytes11(e){return ut(e,11)}static bytes12(e){return ut(e,12)}static bytes13(e){return ut(e,13)}static bytes14(e){return ut(e,14)}static bytes15(e){return ut(e,15)}static bytes16(e){return ut(e,16)}static bytes17(e){return ut(e,17)}static bytes18(e){return ut(e,18)}static bytes19(e){return ut(e,19)}static bytes20(e){return ut(e,20)}static bytes21(e){return ut(e,21)}static bytes22(e){return ut(e,22)}static bytes23(e){return ut(e,23)}static bytes24(e){return ut(e,24)}static bytes25(e){return ut(e,25)}static bytes26(e){return ut(e,26)}static bytes27(e){return ut(e,27)}static bytes28(e){return ut(e,28)}static bytes29(e){return ut(e,29)}static bytes30(e){return ut(e,30)}static bytes31(e){return ut(e,31)}static bytes32(e){return ut(e,32)}static address(e){return new pt(lt,"address",e)}static bool(e){return new pt(lt,"bool",!!e)}static bytes(e){return new pt(lt,"bytes",e)}static string(e){return new pt(lt,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new pt(lt,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===dt}static dereference(e,t){if(pt.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class ht extends pe{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=pt.dereference(t,"string");try{n=ot(n)}catch(e){return this._throwError(e.message,t)}return e.writeValue(n)}decode(e){return ot(ne(e.readValue(),20))}}class ft extends pe{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function mt(e,t,n){let s=[];if(Array.isArray(n))s=n;else if(n&&"object"==typeof n){let e={};s=t.map((t=>{const s=t.localName;return L(s,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),L(!e[s],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),e[s]=!0,n[s]}))}else B(!1,"invalid tuple value","tuple",n);B(t.length===s.length,"types/value length mismatch","tuple",n);let r=new he,a=new he,i=[];t.forEach(((e,t)=>{let n=s[t];if(e.dynamic){let t=a.length;e.encode(a,n);let s=r.writeUpdatableValue();i.push((e=>{s(e+t)}))}else e.encode(r,n)})),i.forEach((e=>{e(r.length)}));let o=e.appendWriter(r);return o+=e.appendWriter(a),o}function gt(e,t){let n=[],s=[],r=e.subReader(0);return t.forEach((t=>{let a=null;if(t.dynamic){let n=e.readIndex(),s=r.subReader(n);try{a=t.decode(s)}catch(e){if(x(e,"BUFFER_OVERRUN"))throw e;a=e,a.baseType=t.name,a.name=t.localName,a.type=t.type}}else try{a=t.decode(e)}catch(e){if(x(e,"BUFFER_OVERRUN"))throw e;a=e,a.baseType=t.name,a.name=t.localName,a.type=t.type}if(null==a)throw new Error("investigate");n.push(a),s.push(t.localName||null)})),ue.fromItems(n,s)}class yt extends pe{coder;length;constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),v(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){const n=pt.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let s=this.length;-1===s&&(s=n.length,e.writeValue(n.length)),O(n.length,s,"coder array"+(this.localName?" "+this.localName:""));let r=[];for(let e=0;e<n.length;e++)r.push(this.coder);return mt(e,r,n)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),L(t*ae<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*ae,length:e.dataLength}));let n=[];for(let e=0;e<t;e++)n.push(new ft(this.coder));return gt(e,n)}}class wt extends pe{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=pt.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class bt extends pe{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=D(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class At extends bt{constructor(e){super("bytes",e)}decode(e){return G(super.decode(e))}}class Et extends pe{size;constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),v(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=D(pt.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return G(e.readBytes(this.size))}}const kt=new Uint8Array([]);class Tt extends pe{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(kt)}decode(e){return e.readBytes(0),null}}const vt=BigInt(0),Ct=BigInt(1),xt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class It extends pe{size;signed;constructor(e,t,n){const s=(t?"int":"uint")+8*e;super(s,s,n,!1),v(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=W(pt.dereference(t,this.type)),s=Y(xt,256);if(this.signed){let e=Y(s,8*this.size-1);(n>e||n<-(e+Ct))&&this._throwError("value out-of-bounds",t),n=Z(n,256)}else(n<vt||n>Y(s,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=Y(e.readValue(),8*this.size);return this.signed&&(t=function(e,t){const n=X(e,"value"),s=BigInt(te(t,"width"));return L(n>>s===J,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>s-K?-((~n&(K<<s)-K)+K):n}(t,8*this.size)),t}}function Nt(e,t,n,s,r){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let s=t+1;s<n.length&&n[s]>>6==2;s++)e++;return e}return"OVERRUN"===e?n.length-t-1:0}const Lt=Object.freeze({error:function(e,t,n,s,r){B(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",n)},ignore:Nt,replace:function(e,t,n,s,r){return"OVERLONG"===e?(B("number"==typeof r,"invalid bad code point for replacement","badCodepoint",r),s.push(r),0):(s.push(65533),Nt(e,t,n))}});function Bt(e,t){B("string"==typeof e,"invalid string value","str",e),null!=t&&(function(e){L(P.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}(t),e=e.normalize(t));let n=[];for(let t=0;t<e.length;t++){const s=e.charCodeAt(t);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(63&s|128);else if(55296==(64512&s)){t++;const r=e.charCodeAt(t);B(t<e.length&&56320==(64512&r),"invalid surrogate pair","str",e);const a=65536+((1023&s)<<10)+(1023&r);n.push(a>>18|240),n.push(a>>12&63|128),n.push(a>>6&63|128),n.push(63&a|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(63&s|128)}return new Uint8Array(n)}function Ot(e,t){return function(e,t){null==t&&(t=Lt.error);const n=M(e,"bytes"),s=[];let r=0;for(;r<n.length;){const e=n[r++];if(!(e>>7)){s.push(e);continue}let a=null,i=null;if(192==(224&e))a=1,i=127;else if(224==(240&e))a=2,i=2047;else{if(240!=(248&e)){r+=t(128==(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",r-1,n,s);continue}a=3,i=65535}if(r-1+a>=n.length){r+=t("OVERRUN",r-1,n,s);continue}let o=e&(1<<8-a-1)-1;for(let e=0;e<a;e++){let e=n[r];if(128!=(192&e)){r+=t("MISSING_CONTINUE",r,n,s),o=null;break}o=o<<6|63&e,r++}null!==o&&(o>1114111?r+=t("OUT_OF_RANGE",r-1-a,n,s,o):o>=55296&&o<=57343?r+=t("UTF16_SURROGATE",r-1-a,n,s,o):o<=i?r+=t("OVERLONG",r-1-a,n,s,o):s.push(o))}return s}(e,t).map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}class Pt extends bt{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Bt(pt.dereference(t,"string")))}decode(e){return Ot(super.decode(e))}}class St extends pe{coders;constructor(e,t){let n=!1;const s=[];e.forEach((e=>{e.dynamic&&(n=!0),s.push(e.type)})),super("tuple","tuple("+s.join(",")+")",t,n),v(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach(((n,s)=>{let r=n.localName;r&&1===t[r]&&("length"===r&&(r="_length"),null==e[r]&&(e[r]=e[s]))})),Object.freeze(e)}encode(e,t){const n=pt.dereference(t,"tuple");return mt(e,this.coders,n)}decode(e){return gt(e,this.coders)}}function Rt(e){return et(Bt(e))}function Mt(e){const t=new Set;return e.forEach((e=>t.add(e))),Object.freeze(t)}const Dt=Mt("external public payable override".split(" ")),Ut="constant external internal payable private public pure view override",Ft=Mt(Ut.split(" ")),Ht="constructor error event fallback function receive struct",Gt=Mt(Ht.split(" ")),_t="calldata memory storage payable indexed",Qt=Mt(_t.split(" ")),zt=Mt([Ht,_t,"tuple returns",Ut].join(" ").split(" ")),jt={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Vt=new RegExp("^(\\s*)"),Jt=new RegExp("^([0-9]+)"),Kt=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),qt=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Zt=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Yt{#r;#d;get offset(){return this.#r}get length(){return this.#d.length-this.#r}constructor(e){this.#r=0,this.#d=e.slice()}clone(){return new Yt(this.#d)}reset(){this.#r=0}#p(e=0,t=0){return new Yt(this.#d.slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=this.#p(this.#r+1,e.match+1);return this.#r=e.match+1,t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;this.#r<e.match-1;){const e=this.peek().linkNext;t.push(this.#p(this.#r+1,e)),this.#r=e}return this.#r=e.match+1,t}peek(){if(this.#r>=this.#d.length)throw new Error("out-of-bounds");return this.#d[this.#r]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return this.#r++,e}toString(){const e=[];for(let t=this.#r;t<this.#d.length;t++){const n=this.#d[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function Wt(e){const t=[],n=t=>{const n=a<e.length?JSON.stringify(e[a]):"$EOI";throw new Error(`invalid token ${n} at ${a}: ${t}`)};let s=[],r=[],a=0;for(;a<e.length;){let i=e.substring(a),o=i.match(Vt);o&&(a+=o[1].length,i=e.substring(a));const l={depth:s.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:a,value:-1};t.push(l);let c=jt[i[0]]||"";if(c){if(l.type=c,l.text=i[0],a++,"OPEN_PAREN"===c)s.push(t.length-1),r.push(t.length-1);else if("CLOSE_PAREN"==c)0===s.length&&n("no matching open bracket"),l.match=s.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=r.pop(),t[l.linkBack].linkNext=t.length-1;else if("COMMA"===c)l.linkBack=r.pop(),t[l.linkBack].linkNext=t.length-1,r.push(t.length-1);else if("OPEN_BRACKET"===c)l.type="BRACKET";else if("CLOSE_BRACKET"===c){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const n=t.pop().text;e=n+e,t[t.length-1].value=te(n)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(o=i.match(Kt),o){if(l.text=o[1],a+=l.text.length,zt.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(Zt)){l.type="TYPE";continue}l.type="ID"}else{if(o=i.match(Jt),!o)throw new Error(`unexpected token ${JSON.stringify(i[0])} at position ${a}`);l.text=o[1],l.type="NUMBER",a+=l.text.length}}return new Yt(t.map((e=>Object.freeze(e))))}function Xt(e,t){let n=[];for(const s in t.keys())e.has(s)&&n.push(s);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function $t(e,t){if(t.peekKeyword(Gt)){const n=t.pop().text;if(n!==e)throw new Error(`expected ${e}, got ${n}`)}return t.popType("ID")}function en(e,t){const n=new Set;for(;;){const s=e.peekType("KEYWORD");if(null==s||t&&!t.has(s))break;if(e.pop(),n.has(s))throw new Error(`duplicate keywords: ${JSON.stringify(s)}`);n.add(s)}return Object.freeze(n)}function tn(e){let t=en(e,Ft);return Xt(t,Mt("constant payable nonpayable".split(" "))),Xt(t,Mt("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function nn(e,t){return e.popParams().map((e=>yn.from(e,t)))}function sn(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return W(e.pop().text);throw new Error("invalid gas")}return null}function rn(e){if(e.length)throw new Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}const an=new RegExp(/^(.*)\[([0-9]*)\]$/);function on(e){const t=e.match(Zt);if(B(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const n=parseInt(t[2]);B(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);B(0!==n&&n<=256&&n%8==0,"invalid numeric width","type",e)}return e}const ln={},cn=Symbol.for("_ethers_internal"),un="_ParamTypeInternal",dn="_ErrorInternal",pn="_EventInternal",hn="_ConstructorInternal",fn="_FallbackInternal",mn="_FunctionInternal",gn="_StructInternal";class yn{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,s,r,a,i,o){if(S(e,ln,"ParamType"),Object.defineProperty(this,cn,{value:un}),a&&(a=Object.freeze(a.slice())),"array"===s){if(null==i||null==o)throw new Error("")}else if(null!=i||null!=o)throw new Error("");if("tuple"===s){if(null==a)throw new Error("")}else if(null!=a)throw new Error("");v(this,{name:t,type:n,baseType:s,indexed:r,components:a,arrayLength:i,arrayChildren:o})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(n)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map((t=>t.format(e))).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map((e=>n.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map(((e,s)=>n.components[s].walk(e,t)))}return t(this.type,e)}#h(e,t,n,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this.arrayChildren,a=t.slice();return a.forEach(((t,s)=>{r.#h(e,t,n,(e=>{a[s]=e}))})),void s(a)}if(this.isTuple()){const r=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(null==t||"object"!=typeof t)throw new Error("invalid tuple value");a=r.map((e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error(`missing value for component ${e.name}`);return t[e.name]}))}if(a.length!==this.components.length)throw new Error("array is wrong length");return a.forEach(((t,s)=>{r[s].#h(e,t,n,(e=>{a[s]=e}))})),void s(a)}const r=n(this.type,t);r.then?e.push(async function(){s(await r)}()):s(r)}async walkAsync(e,t){const n=[],s=[e];return this.#h(n,e,t,(e=>{s[0]=e})),n.length&&await Promise.all(n),s[0]}static from(e,t){if(yn.isParamType(e))return e;if("string"==typeof e)try{return yn.from(Wt(e),t)}catch(t){B(!1,"invalid param type","obj",e)}else if(e instanceof Yt){let n="",s="",r=null;en(e,Mt(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(s="tuple",r=e.popParams().map((e=>yn.from(e))),n=`tuple(${r.map((e=>e.format())).join(",")})`):(n=on(e.popType("TYPE")),s=n);let a=null,i=null;for(;e.length&&e.peekType("BRACKET");){const t=e.pop();a=new yn(ln,"",n,s,null,r,i,a),i=t.value,n+=t.text,s="array",r=null}let o=null;if(en(e,Qt).has("indexed")){if(!t)throw new Error("");o=!0}const l=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new yn(ln,l,n,s,o,r,i,a)}const n=e.name;B(!n||"string"==typeof n&&n.match(qt),"invalid name","obj.name",n);let s=e.indexed;null!=s&&(B(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let r=e.type,a=r.match(an);if(a){const t=parseInt(a[2]||"-1"),i=yn.from({type:a[1],components:e.components});return new yn(ln,n||"",r,"array",s,null,t,i)}if("tuple"===r||r.startsWith("tuple(")||r.startsWith("(")){const t=null!=e.components?e.components.map((e=>yn.from(e))):null;return new yn(ln,n||"",r,"tuple",s,t,null,null)}return r=on(e.type),new yn(ln,n||"",r,r,s,null,null,null)}static isParamType(e){return e&&e[cn]===un}}class wn{type;inputs;constructor(e,t,n){S(e,ln,"Fragment"),v(this,{type:t,inputs:n=Object.freeze(n.slice())})}static from(e){if("string"==typeof e){try{wn.from(JSON.parse(e))}catch(e){}return wn.from(Wt(e))}if(e instanceof Yt)switch(e.peekKeyword(Gt)){case"constructor":return Tn.from(e);case"error":return En.from(e);case"event":return kn.from(e);case"fallback":case"receive":return vn.from(e);case"function":return Cn.from(e);case"struct":return xn.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return Tn.from(e);case"error":return En.from(e);case"event":return kn.from(e);case"fallback":case"receive":return vn.from(e);case"function":return Cn.from(e);case"struct":return xn.from(e)}L(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}B(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Tn.isFragment(e)}static isError(e){return En.isFragment(e)}static isEvent(e){return kn.isFragment(e)}static isFunction(e){return Cn.isFragment(e)}static isStruct(e){return xn.isFragment(e)}}class bn extends wn{name;constructor(e,t,n,s){super(e,t,s),B("string"==typeof n&&n.match(qt),"invalid identifier","name",n),s=Object.freeze(s.slice()),v(this,{name:n})}}function An(e,t){return"("+t.map((t=>t.format(e))).join("full"===e?", ":",")+")"}class En extends bn{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,cn,{value:dn})}get selector(){return Rt(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+An(e,this.inputs)),t.join(" ")}static from(e){if(En.isFragment(e))return e;if("string"==typeof e)return En.from(Wt(e));if(e instanceof Yt){const t=$t("error",e),n=nn(e);return rn(e),new En(ln,t,n)}return new En(ln,e.name,e.inputs?e.inputs.map(yn.from):[])}static isFragment(e){return e&&e[cn]===dn}}class kn extends bn{anonymous;constructor(e,t,n,s){super(e,"event",t,n),Object.defineProperty(this,cn,{value:pn}),v(this,{anonymous:s})}get topicHash(){return Rt(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+An(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map((e=>yn.from(e))),new kn(ln,e,t,!1).topicHash}static from(e){if(kn.isFragment(e))return e;if("string"==typeof e)try{return kn.from(Wt(e))}catch(t){B(!1,"invalid event fragment","obj",e)}else if(e instanceof Yt){const t=$t("event",e),n=nn(e,!0),s=!!en(e,Mt(["anonymous"])).has("anonymous");return rn(e),new kn(ln,t,n,s)}return new kn(ln,e.name,e.inputs?e.inputs.map((e=>yn.from(e,!0))):[],!!e.anonymous)}static isFragment(e){return e&&e[cn]===pn}}class Tn extends wn{payable;gas;constructor(e,t,n,s,r){super(e,t,n),Object.defineProperty(this,cn,{value:hn}),v(this,{payable:s,gas:r})}format(e){if(L(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});const t=[`constructor${An(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(Tn.isFragment(e))return e;if("string"==typeof e)try{return Tn.from(Wt(e))}catch(t){B(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Yt){en(e,Mt(["constructor"]));const t=nn(e),n=!!en(e,Dt).has("payable"),s=sn(e);return rn(e),new Tn(ln,"constructor",t,n,s)}return new Tn(ln,"constructor",e.inputs?e.inputs.map(yn.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[cn]===hn}}class vn extends wn{payable;constructor(e,t,n){super(e,"fallback",t),Object.defineProperty(this,cn,{value:fn}),v(this,{payable:n})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(vn.isFragment(e))return e;if("string"==typeof e)try{return vn.from(Wt(e))}catch(t){B(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Yt){const t=e.toString();if(B(e.peekKeyword(Mt(["fallback","receive"])),"type must be fallback or receive","obj",t),"receive"===e.popKeyword(Mt(["fallback","receive"]))){const t=nn(e);return B(0===t.length,"receive cannot have arguments","obj.inputs",t),en(e,Mt(["payable"])),rn(e),new vn(ln,[],!0)}let n=nn(e);n.length?B(1===n.length&&"bytes"===n[0].type,"invalid fallback inputs","obj.inputs",n.map((e=>e.format("minimal"))).join(", ")):n=[yn.from("bytes")];const s=tn(e);if(B("nonpayable"===s||"payable"===s,"fallback cannot be constants","obj.stateMutability",s),en(e,Mt(["returns"])).has("returns")){const t=nn(e);B(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}return rn(e),new vn(ln,n,"payable"===s)}if("receive"===e.type)return new vn(ln,[],!0);if("fallback"===e.type){const t=[yn.from("bytes")],n="payable"===e.stateMutability;return new vn(ln,t,n)}B(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[cn]===fn}}class Cn extends bn{constant;outputs;stateMutability;payable;gas;constructor(e,t,n,s,r,a){super(e,"function",t,s),Object.defineProperty(this,cn,{value:mn}),v(this,{constant:"view"===n||"pure"===n,gas:a,outputs:r=Object.freeze(r.slice()),payable:"payable"===n,stateMutability:n})}get selector(){return Rt(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+An(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(An(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map((e=>yn.from(e))),new Cn(ln,e,"view",t,[],null).selector}static from(e){if(Cn.isFragment(e))return e;if("string"==typeof e)try{return Cn.from(Wt(e))}catch(t){B(!1,"invalid function fragment","obj",e)}else if(e instanceof Yt){const t=$t("function",e),n=nn(e),s=tn(e);let r=[];en(e,Mt(["returns"])).has("returns")&&(r=nn(e));const a=sn(e);return rn(e),new Cn(ln,t,s,n,r,a)}let t=e.stateMutability;return null==t&&(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new Cn(ln,e.name,t,e.inputs?e.inputs.map(yn.from):[],e.outputs?e.outputs.map(yn.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[cn]===mn}}class xn extends bn{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,cn,{value:gn})}format(){throw new Error("@TODO")}static from(e){if("string"==typeof e)try{return xn.from(Wt(e))}catch(t){B(!1,"invalid struct fragment","obj",e)}else if(e instanceof Yt){const t=$t("struct",e),n=nn(e);return rn(e),new xn(ln,t,n)}return new xn(ln,e.name,e.inputs?e.inputs.map(yn.from):[])}static isFragment(e){return e&&e[cn]===gn}}const In=new Map;In.set(0,"GENERIC_PANIC"),In.set(1,"ASSERT_FALSE"),In.set(17,"OVERFLOW"),In.set(18,"DIVIDE_BY_ZERO"),In.set(33,"ENUM_RANGE_ERROR"),In.set(34,"BAD_STORAGE_DATA"),In.set(49,"STACK_UNDERFLOW"),In.set(50,"ARRAY_RANGE_ERROR"),In.set(65,"OUT_OF_MEMORY"),In.set(81,"UNINITIALIZED_FUNCTION_CALL");const Nn=new RegExp(/^bytes([0-9]*)$/),Ln=new RegExp(/^(u?int)([0-9]*)$/);let Bn=null,On=1024;class Pn{#f(e){if(e.isArray())return new yt(this.#f(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new St(e.components.map((e=>this.#f(e))),e.name);switch(e.baseType){case"address":return new ht(e.name);case"bool":return new wt(e.name);case"string":return new Pt(e.name);case"bytes":return new At(e.name);case"":return new Tt(e.name)}let t=e.type.match(Ln);if(t){let n=parseInt(t[2]||"256");return B(0!==n&&n<=256&&n%8==0,"invalid "+t[1]+" bit length","param",e),new It(n/8,"int"===t[1],e.name)}if(t=e.type.match(Nn),t){let n=parseInt(t[1]);return B(0!==n&&n<=32,"invalid bytes length","param",e),new Et(n,e.name)}B(!1,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map((e=>this.#f(yn.from(e))));return new St(t,"_").defaultValue()}encode(e,t){O(t.length,e.length,"types/values length mismatch");const n=e.map((e=>this.#f(yn.from(e)))),s=new St(n,"_"),r=new he;return s.encode(r,t),r.data}decode(e,t,n){const s=e.map((e=>this.#f(yn.from(e))));return new St(s,"_").decode(new fe(t,n,On))}static _setDefaultMaxInflation(e){B("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),On=e}static defaultAbiCoder(){return null==Bn&&(Bn=new Pn),Bn}static getBuiltinCallException(e,t,n){return function(e,t,n,s){let r="missing revert data",a=null,i=null;if(n){r="execution reverted";const e=M(n);if(n=G(n),0===e.length)r+=" (no data present; likely require(false) occurred",a="require(false)";else if(e.length%32!=4)r+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===G(e.slice(0,4)))try{a=s.decode(["string"],e.slice(4))[0],i={signature:"Error(string)",name:"Error",args:[a]},r+=`: ${JSON.stringify(a)}`}catch(e){r+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===G(e.slice(0,4)))try{const t=Number(s.decode(["uint256"],e.slice(4))[0]);i={signature:"Panic(uint256)",name:"Panic",args:[t]},a=`Panic due to ${In.get(t)||"UNKNOWN"}(${t})`,r+=`: ${a}`}catch(e){r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const o={to:t.to?ot(t.to):null,data:t.data||"0x"};return t.from&&(o.from=ot(t.from)),N(r,"CALL_EXCEPTION",{action:e,data:n,reason:a,transaction:o,invocation:null,revert:i})}(e,t,n,Pn.defaultAbiCoder())}}function Sn(e){return e&&"function"==typeof e.getAddress}async function Rn(e,t){const n=await t;return null!=n&&"0x0000000000000000000000000000000000000000"!==n||(L("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),B(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),ot(n)}function Mn(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?ot(e):(L(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Rn(e,t.resolveName(e))):Sn(e)?Rn(e,e.getAddress()):e&&"function"==typeof e.then?Rn(e,e):void B(!1,"unsupported addressable value","target",e)}const Dn=new Uint8Array(32);Dn.fill(0);const Un=BigInt(-1),Fn=BigInt(0),Hn=BigInt(1),Gn=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),_n=ne(Hn,32),Qn=ne(Fn,32),zn={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},jn=["name","version","chainId","verifyingContract","salt"];function Vn(e){return function(t){return B("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Jn={name:Vn("name"),version:Vn("version"),chainId:function(e){const t=W(e,"domain.chainId");return B(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):re(t)},verifyingContract:function(e){try{return ot(e).toLowerCase()}catch(e){}B(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=M(e,"domain.salt");return B(32===t.length,'invalid domain value "salt"',"domain.salt",e),G(t)}};function Kn(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const n=""===t[1],s=parseInt(t[2]);B(s%8==0&&0!==s&&s<=256&&t[2]===String(s),"invalid numeric width","type",e);const r=Y(Gn,n?s-1:s),a=n?(r+Hn)*Un:Fn;return function(t){const s=W(t,"value");return B(s>=a&&s<=r,`value out-of-bounds for ${e}`,"value",s),ne(n?Z(s,256):s,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return B(0!==n&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(t){return B(M(t).length===n,`invalid length for ${e}`,"value",t),function(e){const t=M(e),n=t.length%32;return n?_([t,Dn.slice(n)]):G(t)}(t)}}}switch(e){case"address":return function(e){return V(ot(e),32)};case"bool":return function(e){return e?_n:Qn};case"bytes":return function(e){return et(e)};case"string":return function(e){return Rt(e)}}return null}function qn(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}function Zn(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}class Yn{primaryType;#m;get types(){return JSON.parse(this.#m)}#g;#y;constructor(e){this.#g=new Map,this.#y=new Map;const t=new Map,n=new Map,s=new Map,r={};Object.keys(e).forEach((a=>{r[a]=e[a].map((({name:t,type:n})=>{let{base:s,index:r}=Zn(n);return"int"!==s||e.int||(s="int256"),"uint"!==s||e.uint||(s="uint256"),{name:t,type:s+(r||"")}})),t.set(a,new Set),n.set(a,[]),s.set(a,new Set)})),this.#m=JSON.stringify(r);for(const s in r){const a=new Set;for(const i of r[s]){B(!a.has(i.name),`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(s)}`,"types",e),a.add(i.name);const r=Zn(i.type).base;B(r!==s,`circular type reference to ${JSON.stringify(r)}`,"types",e),Kn(r)||(B(n.has(r),`unknown type ${JSON.stringify(r)}`,"types",e),n.get(r).push(s),t.get(s).add(r))}}const a=Array.from(n.keys()).filter((e=>0===n.get(e).length));B(0!==a.length,"missing primary type","types",e),B(1===a.length,`ambiguous primary types or unused types: ${a.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),v(this,{primaryType:a[0]}),function r(a,i){B(!i.has(a),`circular type reference to ${JSON.stringify(a)}`,"types",e),i.add(a);for(const e of t.get(a))if(n.has(e)){r(e,i);for(const t of i)s.get(t).add(e)}i.delete(a)}(this.primaryType,new Set);for(const[e,t]of s){const n=Array.from(t);n.sort(),this.#g.set(e,qn(e,r[e])+n.map((e=>qn(e,r[e]))).join(""))}}getEncoder(e){let t=this.#y.get(e);return t||(t=this.#w(e),this.#y.set(e,t)),t}#w(e){{const t=Kn(e);if(t)return t}const t=Zn(e).array;if(t){const e=t.prefix,n=this.getEncoder(e);return s=>{B(-1===t.count||t.count===s.length,`array length mismatch; expected length ${t.count}`,"value",s);let r=s.map(n);return this.#g.has(e)&&(r=r.map(et)),et(_(r))}}const n=this.types[e];if(n){const t=Rt(this.#g.get(e));return e=>{const s=n.map((({name:t,type:n})=>{const s=this.getEncoder(n)(e[t]);return this.#g.has(n)?et(s):s}));return s.unshift(t),_(s)}}B(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#g.get(e);return B(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return et(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Kn(e))return n(e,t);const s=Zn(e).array;if(s)return B(-1===s.count||s.count===t.length,`array length mismatch; expected length ${s.count}`,"value",t),t.map((e=>this._visit(s.prefix,e,n)));const r=this.types[e];if(r)return r.reduce(((e,{name:s,type:r})=>(e[s]=this._visit(r,t[s],n),e)),{});B(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Yn(e)}static getPrimaryType(e){return Yn.from(e).primaryType}static hashStruct(e,t,n){return Yn.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(null==e[n])continue;const s=zn[n];B(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:s})}return t.sort(((e,t)=>jn.indexOf(e.name)-jn.indexOf(t.name))),Yn.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return _(["0x1901",Yn.hashDomain(e),Yn.from(t).hash(n)])}static hash(e,t,n){return et(Yn.encode(e,t,n))}static async resolveNames(e,t,n,s){e=Object.assign({},e);for(const t in e)null==e[t]&&delete e[t];const r={};e.verifyingContract&&!U(e.verifyingContract,20)&&(r[e.verifyingContract]="0x");const a=Yn.from(t);a.visit(n,((e,t)=>("address"!==e||U(t,20)||(r[t]="0x"),t)));for(const e in r)r[e]=await s(e);return e.verifyingContract&&r[e.verifyingContract]&&(e.verifyingContract=r[e.verifyingContract]),{domain:e,value:n=a.visit(n,((e,t)=>"address"===e&&r[t]?r[t]:t))}}static getPayload(e,t,n){Yn.hashDomain(e);const s={},r=[];jn.forEach((t=>{const n=e[t];null!=n&&(s[t]=Jn[t](n),r.push({name:t,type:zn[t]}))}));const a=Yn.from(t);t=a.types;const i=Object.assign({},t);return B(null==i.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),i.EIP712Domain=r,a.encode(n),{types:i,domain:s,primaryType:a.primaryType,message:a.visit(n,((e,t)=>{if(e.match(/^bytes(\d*)/))return G(M(t));if(e.match(/^u?int/))return W(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return B("string"==typeof t,"invalid string","value",t),t}B(!1,"unsupported type","type",e)}))}}}function Wn(e,t){return{address:ot(e),storageKeys:t.map(((e,t)=>(B(U(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase())))}}function Xn(e){if(Array.isArray(e))return e.map(((t,n)=>Array.isArray(t)?(B(2===t.length,"invalid slot set",`value[${n}]`,t),Wn(t[0],t[1])):(B(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),Wn(t.address,t.storageKeys))));B(null!=e&&"object"==typeof e,"invalid access list","value",e);const t=Object.keys(e).map((t=>{const n=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return Wn(t,Object.keys(n).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}function $n(e){return async function(e,t){const n=e.url.split(":")[0].toLowerCase();let s;if(L("http"===n||"https"===n,`unsupported protocol ${n}`,"UNSUPPORTED_OPERATION",{info:{protocol:n},operation:"request"}),L("https"===n||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"}),t){const e=new AbortController;s=e.signal,t.addListener((()=>{e.abort()}))}const r={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:s},a=await fetch(e.url,r),i={};a.headers.forEach(((e,t)=>{i[t.toLowerCase()]=e}));const o=await a.arrayBuffer(),l=null==o?null:new Uint8Array(o);return{statusCode:a.status,statusMessage:a.statusText,headers:i,body:l}}}$n();let es=$n();const ts=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),ns=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let ss=!1;async function rs(e,t){try{const t=e.match(ts);if(!t)throw new Error("invalid data");return new ds(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return M(t)}(t[3]):Bt(t[3].replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(t){return new ds(599,"BAD REQUEST (invalid data: URI)",{},null,new us(e))}}function as(e){return async function(t,n){try{const n=t.match(ns);if(!n)throw new Error("invalid link");return new us(`${e}${n[2]}`)}catch(e){return new ds(599,"BAD REQUEST (invalid IPFS URI)",{},null,new us(t))}}}const is={data:rs,ipfs:as("https://gateway.ipfs.io/ipfs/")},os=new WeakMap;class ls{#b;#A;constructor(e){this.#b=[],this.#A=!1,os.set(e,(()=>{if(!this.#A){this.#A=!0;for(const e of this.#b)setTimeout((()=>{e()}),0);this.#b=[]}}))}addListener(e){L(!this.#A,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#b.push(e)}get cancelled(){return this.#A}checkSignal(){L(!this.cancelled,"cancelled","CANCELLED",{})}}function cs(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}class us{#E;#k;#T;#v;#C;#x;#I;#N;#L;#B;#O;#P;#S;#R;#M;get url(){return this.#x}set url(e){this.#x=String(e)}get body(){return null==this.#I?null:new Uint8Array(this.#I)}set body(e){if(null==e)this.#I=void 0,this.#N=void 0;else if("string"==typeof e)this.#I=Bt(e),this.#N="text/plain";else if(e instanceof Uint8Array)this.#I=e,this.#N="application/octet-stream";else{if("object"!=typeof e)throw new Error("invalid body");this.#I=Bt(JSON.stringify(e)),this.#N="application/json"}}hasBody(){return null!=this.#I}get method(){return this.#v?this.#v:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#v=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#T);return this.#L&&(e.authorization=`Basic ${function(e){const t=M(e);let n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(Bt(this.#L))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#N&&(e["content-type"]=this.#N),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#T[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#T={}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const s=t[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#L||null}setCredentials(e,t){B(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#L=`${e}:${t}`}get allowGzip(){return this.#k}set allowGzip(e){this.#k=!!e}get allowInsecureAuthentication(){return!!this.#E}set allowInsecureAuthentication(e){this.#E=!!e}get timeout(){return this.#C}set timeout(e){B(e>=0,"timeout must be non-zero","timeout",e),this.#C=e}get preflightFunc(){return this.#B||null}set preflightFunc(e){this.#B=e}get processFunc(){return this.#O||null}set processFunc(e){this.#O=e}get retryFunc(){return this.#P||null}set retryFunc(e){this.#P=e}get getUrlFunc(){return this.#M||es}set getUrlFunc(e){this.#M=e}constructor(e){this.#x=String(e),this.#E=!1,this.#k=!0,this.#T={},this.#v="",this.#C=3e5,this.#R={slotInterval:250,maxAttempts:12},this.#M=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#I?G(this.#I):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#R.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#R.maxAttempts=e.maxAttempts)}async#D(e,t,n,s,r){if(e>=this.#R.maxAttempts)return r.makeServerError("exceeded maximum retry limit");L(ps()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await function(e){return new Promise((t=>setTimeout(t,e)))}(n);let a=this.clone();const i=(a.url.split(":")[0]||"").toLowerCase();if(i in is){const e=await is[i](a.url,cs(s.#S));if(e instanceof ds){let t=e;if(this.processFunc){cs(s.#S);try{t=await this.processFunc(a,t)}catch(e){null!=e.throttle&&"number"==typeof e.stall||t.makeServerError("error in post-processing function",e).assertOk()}}return t}a=e}this.preflightFunc&&(a=await this.preflightFunc(a));const o=await this.getUrlFunc(a,cs(s.#S));let l=new ds(o.statusCode,o.statusMessage,o.headers,o.body,s);if(301===l.statusCode||302===l.statusCode){try{const n=l.headers.location||"";return a.redirect(n).#D(e+1,t,0,s,l)}catch(e){}return l}if(429===l.statusCode&&(null==this.retryFunc||await this.retryFunc(a,l,e))){const n=l.headers["retry-after"];let r=this.#R.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof n&&n.match(/^[1-9][0-9]*$/)&&(r=parseInt(n)),a.clone().#D(e+1,t,r,s,l)}if(this.processFunc){cs(s.#S);try{l=await this.processFunc(a,l)}catch(n){null!=n.throttle&&"number"==typeof n.stall||l.makeServerError("error in post-processing function",n).assertOk();let r=this.#R.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return n.stall>=0&&(r=n.stall),a.clone().#D(e+1,t,r,s,l)}}return l}send(){return L(null==this.#S,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#S=new ls(this),this.#D(0,ps()+this.timeout,0,this,new ds(0,"",{},null,this))}cancel(){L(null!=this.#S,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=os.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();L("GET"===this.method&&("https"!==t||"http"!==n)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new us(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,s.#T=Object.assign({},this.#T),this.#I&&(s.#I=new Uint8Array(this.#I)),s.#N=this.#N,s}clone(){const e=new us(this.url);return e.#v=this.#v,this.#I&&(e.#I=this.#I),e.#N=this.#N,e.#T=Object.assign({},this.#T),e.#L=this.#L,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#B=this.#B,e.#O=this.#O,e.#P=this.#P,e.#R=Object.assign({},this.#R),e.#M=this.#M,e}static lockConfig(){ss=!0}static getGateway(e){return is[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(ss)throw new Error("gateways locked");is[e]=t}static registerGetUrl(e){if(ss)throw new Error("gateways locked");es=e}static createGetUrlFunc(e){return $n()}static createDataGateway(){return rs}static createIpfsGatewayFunc(e){return as(e)}}class ds{#U;#F;#T;#I;#H;#G;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#I?G(this.#I):"null"}>`}get statusCode(){return this.#U}get statusMessage(){return this.#F}get headers(){return Object.assign({},this.#T)}get body(){return null==this.#I?null:new Uint8Array(this.#I)}get bodyText(){try{return null==this.#I?"":Ot(this.#I)}catch(e){L(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){L(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const s=t[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,n,s,r){this.#U=e,this.#F=t,this.#T=Object.keys(n).reduce(((e,t)=>(e[t.toLowerCase()]=String(n[t]),e)),{}),this.#I=null==s?null:new Uint8Array(s),this.#H=r||null,this.#G={message:""}}makeServerError(e,t){let n;n=e?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:`CLIENT ESCALATED SERVER ERROR (${e=`${this.statusCode} ${this.statusMessage}`})`;const s=new ds(599,n,this.headers,this.body,this.#H||void 0);return s.#G={message:e,error:t},s}throwThrottleError(e,t){null==t?t=-1:B(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw v(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#I}get request(){return this.#H}ok(){return""===this.#G.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#G;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{this.#I&&(s=Ot(this.#I))}catch(e){}L(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function ps(){return(new Date).getTime()}const hs="0x0000000000000000000000000000000000000000";class fs{fragment;name;signature;topic;args;constructor(e,t,n){const s=e.name,r=e.format();v(this,{fragment:e,name:s,signature:r,topic:t,args:n})}}class ms{fragment;name;args;signature;selector;value;constructor(e,t,n,s){const r=e.name,a=e.format();v(this,{fragment:e,name:r,args:n,signature:a,selector:t,value:s})}}class gs{fragment;name;args;signature;selector;constructor(e,t,n){const s=e.name,r=e.format();v(this,{fragment:e,name:s,args:n,signature:r,selector:t})}}class ys{hash;_isIndexed;static isIndexed(e){return!(!e||!e._isIndexed)}constructor(e){v(this,{hash:e,_isIndexed:!0})}}const ws={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},bs={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&ws[e.toString()]&&(t=ws[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class As{fragments;deploy;fallback;receive;#_;#Q;#z;#j;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#z=new Map,this.#_=new Map,this.#Q=new Map;const n=[];for(const e of t)try{n.push(wn.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}v(this,{fragments:Object.freeze(n)});let s=null,r=!1;this.#j=this.getAbiCoder(),this.fragments.forEach(((e,t)=>{let n;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void v(this,{deploy:e});case"fallback":return void(0===e.inputs.length?r=!0:(B(!s||e.payable!==s.payable,"conflicting fallback fragments",`fragments[${t}]`,e),s=e,r=s.payable));case"function":n=this.#z;break;case"event":n=this.#Q;break;case"error":n=this.#_;break;default:return}const a=e.format();n.has(a)||n.set(a,e)})),this.deploy||v(this,{deploy:Tn.from("constructor()")}),v(this,{fallback:s,receive:r})}format(e){const t=e?"minimal":"full";return this.fragments.map((e=>e.format(t)))}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return Pn.defaultAbiCoder()}#V(e,t,n){if(U(e)){const t=e.toLowerCase();for(const e of this.#z.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const s=[];for(const[t,n]of this.#z)t.split("(")[0]===e&&s.push(n);if(t){const e=t.length>0?t[t.length-1]:null;let n=t.length,r=!0;pt.isTyped(e)&&"overrides"===e.type&&(r=!1,n--);for(let e=s.length-1;e>=0;e--){const t=s[e].inputs.length;t===n||r&&t===n-1||s.splice(e,1)}for(let e=s.length-1;e>=0;e--){const n=s[e].inputs;for(let r=0;r<t.length;r++)if(pt.isTyped(t[r])){if(r>=n.length){if("overrides"===t[r].type)continue;s.splice(e,1);break}if(t[r].type!==n[r].baseType){s.splice(e,1);break}}}}if(1===s.length&&t&&t.length!==s[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&s.splice(0,1)}return 0===s.length?null:(s.length>1&&n&&B(!1,`ambiguous function description (i.e. matches ${s.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e),s[0])}return this.#z.get(Cn.from(e).format())||null}getFunctionName(e){const t=this.#V(e,null,!1);return B(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#V(e,null,!1)}getFunction(e,t){return this.#V(e,t||null,!0)}forEachFunction(e){const t=Array.from(this.#z.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#z.get(s),n)}}#J(e,t,n){if(U(e)){const t=e.toLowerCase();for(const e of this.#Q.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const s=[];for(const[t,n]of this.#Q)t.split("(")[0]===e&&s.push(n);if(t){for(let e=s.length-1;e>=0;e--)s[e].inputs.length<t.length&&s.splice(e,1);for(let e=s.length-1;e>=0;e--){const n=s[e].inputs;for(let r=0;r<t.length;r++)if(pt.isTyped(t[r])&&t[r].type!==n[r].baseType){s.splice(e,1);break}}}return 0===s.length?null:(s.length>1&&n&&B(!1,`ambiguous event description (i.e. matches ${s.map((e=>JSON.stringify(e.format()))).join(", ")})`,"key",e),s[0])}return this.#Q.get(kn.from(e).format())||null}getEventName(e){const t=this.#J(e,null,!1);return B(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#J(e,null,!1)}getEvent(e,t){return this.#J(e,t||null,!0)}forEachEvent(e){const t=Array.from(this.#Q.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#Q.get(s),n)}}getError(e,t){if(U(e)){const t=e.toLowerCase();if(bs[t])return En.from(bs[t].signature);for(const e of this.#_.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[n,s]of this.#_)n.split("(")[0]===e&&t.push(s);return 0===t.length?"Error"===e?En.from("error Error(string)"):"Panic"===e?En.from("error Panic(uint256)"):null:(t.length>1&&B(!1,`ambiguous error description (i.e. ${t.map((e=>JSON.stringify(e.format()))).join(", ")})`,"name",e),t[0])}if("Error(string)"===(e=En.from(e).format()))return En.from("error Error(string)");if("Panic(uint256)"===e)return En.from("error Panic(uint256)");return this.#_.get(e)||null}forEachError(e){const t=Array.from(this.#_.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let n=0;n<t.length;n++){const s=t[n];e(this.#_.get(s),n)}}_decodeParams(e,t){return this.#j.decode(e,t)}_encodeParams(e,t){return this.#j.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);B(t,"unknown error","fragment",e),e=t}return B(z(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,z(t,4))}encodeErrorResult(e,t){if("string"==typeof e){const t=this.getError(e);B(t,"unknown error","fragment",e),e=t}return _([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);B(t,"unknown function","fragment",e),e=t}return B(z(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,z(t,4))}encodeFunctionData(e,t){if("string"==typeof e){const t=this.getFunction(e);B(t,"unknown function","fragment",e),e=t}return _([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);B(t,"unknown function","fragment",e),e=t}let n="invalid length for result data";const s=D(t);if(s.length%32==0)try{return this.#j.decode(e.outputs,s)}catch(e){n="could not decode result data"}L(!1,n,"BAD_DATA",{value:G(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=M(e,"data"),s=Pn.getBuiltinCallException("call",t,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const e=G(n.slice(0,4)),t=this.getError(e);if(t)try{const e=this.#j.decode(t.inputs,n.slice(4));s.revert={name:t.name,signature:t.format(),args:e},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch(e){s.message="execution reverted (coult not decode custom error)"}}const r=this.parseTransaction(t);return r&&(s.invocation={method:r.name,signature:r.signature,args:r.args}),s}encodeFunctionResult(e,t){if("string"==typeof e){const t=this.getFunction(e);B(t,"unknown function","fragment",e),e=t}return G(this.#j.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){const t=this.getEvent(e);B(t,"unknown event","eventFragment",e),e=t}L(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const s=(e,t)=>"string"===e.type?Rt(t):"bytes"===e.type?et(G(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=ne(t):e.type.match(/^bytes/)?t=j(t,32,!1):"address"===e.type&&this.#j.encode(["address"],[t]),V(G(t),32));for(t.forEach(((t,r)=>{const a=e.inputs[r];a.indexed?null==t?n.push(null):"array"===a.baseType||"tuple"===a.baseType?B(!1,"filtering with tuples or arrays not supported","contract."+a.name,t):Array.isArray(t)?n.push(t.map((e=>s(a,e)))):n.push(s(a,t)):B(null==t,"cannot filter non-indexed parameters; must be null","contract."+a.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){if("string"==typeof e){const t=this.getEvent(e);B(t,"unknown event","eventFragment",e),e=t}const n=[],s=[],r=[];return e.anonymous||n.push(e.topicHash),B(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach(((e,a)=>{const i=t[a];if(e.indexed)if("string"===e.type)n.push(Rt(i));else if("bytes"===e.type)n.push(et(i));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this.#j.encode([e.type],[i]))}else s.push(e),r.push(i)})),{data:this.#j.encode(s,r),topics:n}}decodeEventLog(e,t,n){if("string"==typeof e){const t=this.getEvent(e);B(t,"unknown event","eventFragment",e),e=t}if(null!=n&&!e.anonymous){const t=e.topicHash;B(U(n[0],32)&&n[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],r=[],a=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(s.push(yn.from({type:"bytes32",name:e.name})),a.push(!0)):(s.push(e),a.push(!1)):(r.push(e),a.push(!1))}));const i=null!=n?this.#j.decode(s,_(n)):null,o=this.#j.decode(r,t,!0),l=[],c=[];let u=0,d=0;return e.inputs.forEach(((e,t)=>{let n=null;if(e.indexed)if(null==i)n=new ys(null);else if(a[t])n=new ys(i[d++]);else try{n=i[d++]}catch(e){n=e}else try{n=o[u++]}catch(e){n=e}l.push(n),c.push(e.name||null)})),ue.fromItems(l,c)}parseTransaction(e){const t=M(e.data,"tx.data"),n=W(null!=e.value?e.value:0,"tx.value"),s=this.getFunction(G(t.slice(0,4)));if(!s)return null;const r=this.#j.decode(s.inputs,t.slice(4));return new ms(s,s.selector,r,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new fs(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=G(e),n=this.getError(z(t,0,4));if(!n)return null;const s=this.#j.decode(n.inputs,z(t,4));return new gs(n,n.selector,s)}static from(e){return e instanceof As?e:"string"==typeof e?new As(JSON.parse(e)):"function"==typeof e.formatJson?new As(e.formatJson()):"function"==typeof e.format?new As(e.format("json")):new As(e)}}const Es=BigInt(0);function ks(e){return null==e?null:e}function Ts(e){return null==e?null:e.toString()}class vs{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,n){v(this,{gasPrice:ks(e),maxFeePerGas:ks(t),maxPriorityFeePerGas:ks(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:Ts(e),maxFeePerGas:Ts(t),maxPriorityFeePerGas:Ts(n)}}}function Cs(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=G(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)s in e&&null!=e[s]&&(t[s]=W(e[s],`request.${s}`));const s="type,nonce".split(/,/);for(const n of s)n in e&&null!=e[n]&&(t[n]=te(e[n],`request.${n}`));return e.accessList&&(t.accessList=Xn(e.accessList)),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map((e=>F(e)?G(e):Object.assign({},e)))),t}class xs{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#K;constructor(e,t){this.#K=e.transactions.map((e=>"string"!=typeof e?new Ls(e,t):e)),v(this,{provider:t,hash:ks(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:ks(e.prevRandao),extraData:e.extraData,baseFeePerGas:ks(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#K.map((e=>"string"==typeof e?e:e.hash))}get prefetchedTransactions(){const e=this.#K.slice();return 0===e.length?[]:(L("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:s,gasUsed:r,hash:a,miner:i,prevRandao:o,nonce:l,number:c,parentHash:u,parentBeaconBlockRoot:d,stateRoot:p,receiptsRoot:h,timestamp:f,transactions:m}=this;return{_type:"Block",baseFeePerGas:Ts(e),difficulty:Ts(t),extraData:n,gasLimit:Ts(s),gasUsed:Ts(r),blobGasUsed:Ts(this.blobGasUsed),excessBlobGas:Ts(this.excessBlobGas),hash:a,miner:i,prevRandao:o,nonce:l,number:c,parentHash:u,timestamp:f,parentBeaconBlockRoot:d,stateRoot:p,receiptsRoot:h,transactions:m}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#K.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#K[e];else{const n=e.toLowerCase();for(const e of this.#K){if("string"==typeof e){if(e!==n)continue;t=e;break}if(e.hash!==n){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"==typeof e)return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;B(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return function(e){return{orphan:"drop-block",hash:e.hash,number:e.number}}(this)}}class Is{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const n=Object.freeze(e.topics.slice());v(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:s,index:r,removed:a,topics:i,transactionHash:o,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:s,index:r,removed:a,topics:i,transactionHash:o,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return L(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return L(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return L(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}class Ns{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#q;constructor(e,t){this.#q=Object.freeze(e.logs.map((e=>new Is(e,t))));let n=Es;null!=e.effectiveGasPrice?n=e.effectiveGasPrice:null!=e.gasPrice&&(n=e.gasPrice),v(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#q}toJSON(){const{to:e,from:t,contractAddress:n,hash:s,index:r,blockHash:a,blockNumber:i,logsBloom:o,logs:l,status:c,root:u}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:i,contractAddress:n,cumulativeGasUsed:Ts(this.cumulativeGasUsed),from:t,gasPrice:Ts(this.gasPrice),blobGasUsed:Ts(this.blobGasUsed),blobGasPrice:Ts(this.blobGasPrice),gasUsed:Ts(this.gasUsed),hash:s,index:r,logs:l,logsBloom:o,root:u,status:c,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Os(this)}reorderedEvent(e){return L(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Bs(this,e)}}class Ls{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;#Z;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.#Z=-1}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:s,type:r,to:a,from:i,nonce:o,data:l,signature:c,accessList:u,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:e,blockHash:t,blobVersionedHashes:d,chainId:Ts(this.chainId),data:l,from:i,gasLimit:Ts(this.gasLimit),gasPrice:Ts(this.gasPrice),hash:s,maxFeePerGas:Ts(this.maxFeePerGas),maxPriorityFeePerGas:Ts(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ts(this.maxFeePerBlobGas),nonce:o,signature:c,to:a,index:n,type:r,value:Ts(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await T({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=null==e?1:e,s=null==t?0:t;let r=this.#Z,a=-1,i=-1===r;const o=async()=>{if(i)return null;const{blockNumber:e,nonce:t}=await T({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(r=e);if(i)return null;const s=await this.getTransaction();if(!s||null==s.blockNumber)for(-1===a&&(a=r-3,a<this.#Z&&(a=this.#Z));a<=e;){if(i)return null;const t=await this.provider.getBlock(a,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let s=0;s<t.length;s++){const a=await t.getTransaction(s);if(a.from===this.from&&a.nonce===this.nonce){if(i)return null;const t=await this.provider.getTransactionReceipt(a.hash);if(null==t)return;if(e-t.blockNumber+1<n)return;let s="replaced";a.data===this.data&&a.to===this.to&&a.value===this.value?s="repriced":"0x"===a.data&&a.from===a.to&&a.value===Es&&(s="cancelled"),L(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===s||"cancelled"===s,reason:s,replacement:a.replaceableTransaction(r),hash:a.hash,receipt:t})}}a++}},l=e=>{if(null==e||0!==e.status)return e;L(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},c=await this.provider.getTransactionReceipt(this.hash);if(0===n)return l(c);if(c){if(await c.confirmations()>=n)return l(c)}else if(await o(),0===n)return null;const u=new Promise(((e,t)=>{const a=[],c=()=>{a.forEach((e=>e()))};if(a.push((()=>{i=!0})),s>0){const e=setTimeout((()=>{c(),t(N("wait for transaction timeout","TIMEOUT"))}),s);a.push((()=>{clearTimeout(e)}))}const u=async s=>{if(await s.confirmations()>=n){c();try{e(l(s))}catch(e){t(e)}}};if(a.push((()=>{this.provider.off(this.hash,u)})),this.provider.on(this.hash,u),r>=0){const e=async()=>{try{await o()}catch(e){if(x(e,"TRANSACTION_REPLACED"))return c(),void t(e)}i||this.provider.once("block",e)};a.push((()=>{this.provider.off("block",e)})),this.provider.once("block",e)}}));return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return L(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Os(this)}reorderedEvent(e){return L(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),L(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Bs(this,e)}replaceableTransaction(e){B(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Ls(this,this.provider);return t.#Z=e,t}}function Bs(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function Os(e){return{orphan:"drop-transaction",tx:e}}class Ps{filter;emitter;#Y;constructor(e,t,n){this.#Y=t,v(this,{emitter:e,filter:n})}async removeListener(){null!=this.#Y&&await this.emitter.off(this.filter,this.#Y)}}class Ss extends Is{interface;fragment;args;constructor(e,t,n){super(e,e.provider),v(this,{args:t.decodeEventLog(n,e.data,e.topics),fragment:n,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Rs extends Is{error;constructor(e,t){super(e,e.provider),v(this,{error:t})}}class Ms extends Ns{#W;constructor(e,t,n){super(n,t),this.#W=e}get logs(){return super.logs.map((e=>{const t=e.topics.length?this.#W.getEvent(e.topics[0]):null;if(t)try{return new Ss(e,this.#W,t)}catch(t){return new Rs(e,t)}return e}))}}class Ds extends Ls{#W;constructor(e,t,n){super(n,t),this.#W=e}async wait(e,t){const n=await super.wait(e,t);return null==n?null:new Ms(this.#W,this.provider,n)}}class Us extends Ps{log;constructor(e,t,n,s){super(e,t,n),v(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Fs extends Us{constructor(e,t,n,s,r){super(e,t,n,new Ss(r,e.interface,s)),v(this,{args:e.interface.decodeEventLog(s,this.log.data,this.log.topics),fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Hs=BigInt(0);function Gs(e){return e&&"function"==typeof e.call}function _s(e){return e&&"function"==typeof e.estimateGas}function Qs(e){return e&&"function"==typeof e.resolveName}function zs(e){return e&&"function"==typeof e.sendTransaction}function js(e){if(null!=e){if(Qs(e))return e;if(e.provider)return e.provider}}class Vs{#X;fragment;constructor(e,t,n){if(v(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const s=Js(e.runner,"resolveName"),r=Qs(s)?s:null;this.#X=async function(){const s=await Promise.all(t.inputs.map(((e,t)=>null==n[t]?null:e.walkAsync(n[t],((e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map((e=>Mn(e,r)))):Mn(t,r):t)))));return e.interface.encodeFilterTopics(t,s)}()}getTopicFilter(){return this.#X}}function Js(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function Ks(e){return null==e?null:e.provider||null}async function qs(e,t){const n=pt.dereference(e,"overrides");B("object"==typeof n,"invalid overrides parameter","overrides",e);const s=Cs(n);return B(null==s.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",s.to),B(null==s.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",s.data),s.from&&(s.from=s.from),s}function Zs(e){const t=async function(t){const n=await qs(t,["data"]);n.to=await e.getAddress(),n.from&&(n.from=await Mn(n.from,js(e.runner)));const s=e.interface,r=W(n.value||Hs,"overrides.value")===Hs,a="0x"===(n.data||"0x");return!s.fallback||s.fallback.payable||!s.receive||a||r||B(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),B(s.fallback||a,"cannot send data to receive-only contract","overrides.data",n.data),B(s.receive||s.fallback&&s.fallback.payable||r,"cannot send value to non-payable fallback","overrides.value",n.value),B(s.fallback||a,"cannot send data to receive-only contract","overrides.data",n.data),n},n=async function(n){const s=e.runner;L(zs(s),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await s.sendTransaction(await t(n)),a=Ks(e.runner);return new Ds(e.interface,a,r)},s=async e=>await n(e);return v(s,{_contract:e,estimateGas:async function(n){const s=Js(e.runner,"estimateGas");return L(_s(s),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await s.estimateGas(await t(n))},populateTransaction:t,send:n,staticCall:async function(n){const s=Js(e.runner,"call");L(Gs(s),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const r=await t(n);try{return await s.call(r)}catch(t){if(I(t)&&t.data)throw e.interface.makeError(t.data,r);throw t}}}),s}const Ys=Symbol.for("_ethersInternal_contract"),Ws=new WeakMap;function Xs(e){return Ws.get(e[Ys])}async function $s(e,t){let n,s=null;if(Array.isArray(t)){const s=function(t){if(U(t,32))return t;const n=e.interface.getEvent(t);return B(n,"unknown fragment","name",t),n.topicHash};n=t.map((e=>null==e?null:Array.isArray(e)?e.map(s):s(e)))}else"*"===t?n=[null]:"string"==typeof t?U(t,32)?n=[t]:(s=e.interface.getEvent(t),B(s,"unknown fragment","event",t),n=[s.topicHash]):(r=t)&&"object"==typeof r&&"getTopicFilter"in r&&"function"==typeof r.getTopicFilter&&r.fragment?n=await t.getTopicFilter():"fragment"in t?(s=t.fragment,n=[s.topicHash]):B(!1,"unknown event name","event",t);var r;return n=n.map((e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})),{fragment:s,tag:n.map((e=>null==e?"null":Array.isArray(e)?e.join("|"):e)).join("&"),topics:n}}async function er(e,t){const{subs:n}=Xs(e);return n.get((await $s(e,t)).tag)||null}async function tr(e,t,n){const s=Ks(e.runner);L(s,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:r,tag:a,topics:i}=await $s(e,n),{addr:o,subs:l}=Xs(e);let c=l.get(a);if(!c){const t={address:o||e,topics:i},u=t=>{let s=r;if(null==s)try{s=e.interface.getEvent(t.topics[0])}catch(e){}if(s){const a=s,i=r?e.interface.decodeEventLog(r,t.data,t.topics):[];sr(e,n,i,(s=>new Fs(e,s,n,a,t)))}else sr(e,n,[],(s=>new Us(e,s,n,t)))};let d=[];c={tag:a,listeners:[],start:()=>{d.length||d.push(s.on(t,u))},stop:async()=>{if(0==d.length)return;let e=d;d=[],await Promise.all(e),s.off(t,u)}},l.set(a,c)}return c}let nr=Promise.resolve();async function sr(e,t,n,s){try{await nr}catch(e){}const r=async function(e,t,n,s){await nr;const r=await er(e,t);if(!r)return!1;const a=r.listeners.length;return r.listeners=r.listeners.filter((({listener:t,once:r})=>{const a=Array.from(n);s&&a.push(s(r?null:t));try{t.call(e,...a)}catch(e){}return!r})),0===r.listeners.length&&(r.stop(),Xs(e).subs.delete(r.tag)),a>0}(e,t,n,s);return nr=r,await r}const rr=["then"];class ar{target;interface;runner;filters;[Ys];fallback;constructor(e,t,n,s){B("string"==typeof e||Sn(e),"invalid value for Contract target","target",e),null==n&&(n=null);const r=As.from(t);let a;v(this,{target:e,runner:n,interface:r}),Object.defineProperty(this,Ys,{value:{}});let i=null,o=null;if(s){const e=Ks(n);o=new Ds(this.interface,e,s)}let l=new Map;if("string"==typeof e)if(U(e))i=e,a=Promise.resolve(e);else{const t=Js(n,"resolveName");if(!Qs(t))throw N("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=t.resolveName(e).then((t=>{if(null==t)throw N("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Xs(this).addr=t,t}))}else a=e.getAddress().then((e=>{if(null==e)throw new Error("TODO");return Xs(this).addr=e,e}));var c;c={addrPromise:a,addr:i,deployTx:o,subs:l},Ws.set(this[Ys],c);const u=new Proxy({},{get:(e,t,n)=>{if("symbol"==typeof t||rr.indexOf(t)>=0)return Reflect.get(e,t,n);try{return this.getEvent(t)}catch(e){if(!x(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>rr.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return v(this,{filters:u}),v(this,{fallback:r.receive||r.fallback?Zs(this):null}),new Proxy(this,{get:(e,t,n)=>{if("symbol"==typeof t||t in e||rr.indexOf(t)>=0)return Reflect.get(e,t,n);try{return e.getFunction(t)}catch(e){if(!x(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||rr.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new ar(this.target,this.interface,e)}attach(e){return new ar(e,this.interface,this.runner)}async getAddress(){return await Xs(this).addrPromise}async getDeployedCode(){const e=Ks(this.runner);L(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=Ks(this.runner);return L(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((e,n)=>{const s=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",s)}catch(e){n(e)}};s()}))}deploymentTransaction(){return Xs(this).deployTx}getFunction(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const n=function(...n){const s=e.interface.getFunction(t,n);return L(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),s},s=async function(...t){const s=n(...t);let r={};if(s.inputs.length+1===t.length&&(r=await qs(t.pop()),r.from&&(r.from=await Mn(r.from,js(e.runner)))),s.inputs.length!==t.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const a=await async function(e,t,n){const s=Js(e,"resolveName"),r=Qs(s)?s:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(n[t],((e,t)=>(t=pt.dereference(t,e),"address"===e?Mn(t,r):t))))))}(e.runner,s.inputs,t);return Object.assign({},r,await T({to:e.getAddress(),data:e.interface.encodeFunctionData(s,a)}))},r=async function(...e){const t=await i(...e);return 1===t.length?t[0]:t},a=async function(...t){const n=e.runner;L(zs(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await n.sendTransaction(await s(...t)),a=Ks(e.runner);return new Ds(e.interface,a,r)},i=async function(...t){const r=Js(e.runner,"call");L(Gs(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const a=await s(...t);let i="0x";try{i=await r.call(a)}catch(t){if(I(t)&&t.data)throw e.interface.makeError(t.data,a);throw t}const o=n(...t);return e.interface.decodeFunctionResult(o,i)},o=async(...e)=>n(...e).constant?await r(...e):await a(...e);return v(o,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:async function(...t){const n=Js(e.runner,"estimateGas");return L(_s(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await s(...t))},populateTransaction:s,send:a,staticCall:r,staticCallResult:i}),Object.defineProperty(o,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getFunction(t);return L(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),o}(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){const n=function(...n){const s=e.interface.getEvent(t,n);return L(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:n}}),s},s=function(...t){return new Vs(e,n(...t),t)};return v(s,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(s,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getEvent(t);return L(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),s}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){null==t&&(t=0),null==n&&(n="latest");const{addr:s,addrPromise:r}=Xs(this),a=s||await r,{fragment:i,topics:o}=await $s(this,e),l={address:a,topics:o,fromBlock:t,toBlock:n},c=Ks(this.runner);return L(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await c.getLogs(l)).map((e=>{let t=i;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new Ss(e,this.interface,t)}catch(t){return new Rs(e,t)}return new Is(e,c)}))}async on(e,t){const n=await tr(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await tr(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await sr(this,e,t,null)}async listenerCount(e){if(e){const t=await er(this,e);return t?t.listeners.length:0}const{subs:t}=Xs(this);let n=0;for(const{listeners:e}of t.values())n+=e.length;return n}async listeners(e){if(e){const t=await er(this,e);return t?t.listeners.map((({listener:e})=>e)):[]}const{subs:t}=Xs(this);let n=[];for(const{listeners:e}of t.values())n=n.concat(e.map((({listener:e})=>e)));return n}async off(e,t){const n=await er(this,e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return null!=t&&0!==n.listeners.length||(n.stop(),Xs(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await er(this,e);if(!t)return this;t.stop(),Xs(this).subs.delete(t.tag)}else{const{subs:e}=Xs(this);for(const{tag:t,stop:n}of e.values())n(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){return class extends ar{constructor(t,n=null){super(t,e,n)}}}static from(e,t,n){return null==n&&(n=null),new this(e,t,n)}}class ir extends(function(){return ar}()){}var or="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";const lr=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),cr=4;function ur(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function n(){return e[t++]<<8|e[t++]}let s=n(),r=1,a=[0,1];for(let e=1;e<s;e++)a.push(r+=n());let i=n(),o=t;t+=i;let l=0,c=0;function u(){return 0==l&&(c=c<<8|e[t++],l=8),c>>--l&1}const d=2**31,p=d>>>1,h=p>>1,f=d-1;let m=0;for(let e=0;e<31;e++)m=m<<1|u();let g=[],y=0,w=d;for(;;){let e=Math.floor(((m-y+1)*r-1)/w),t=0,n=s;for(;n-t>1;){let s=t+n>>>1;e<a[s]?n=s:t=s}if(0==t)break;g.push(t);let i=y+Math.floor(w*a[t]/r),o=y+Math.floor(w*a[t+1]/r)-1;for(;!((i^o)&p);)m=m<<1&f|u(),i=i<<1&f,o=o<<1&f|1;for(;i&~o&h;)m=m&p|m<<1&f>>>1|u(),i=i<<1^p,o=(o^p)<<1|p|1;y=i,w=1+o-i}let b=s-4;return g.map((t=>{switch(t-b){case 3:return b+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return b+256+(e[o++]<<8|e[o++]);case 1:return b+e[o++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,n)=>t[e.charCodeAt(0)]=n));let n=e.length,s=new Uint8Array(6*n>>3);for(let r=0,a=0,i=0,o=0;r<n;r++)o=o<<6|t[e.charCodeAt(r)],i+=6,i>=8&&(s[a++]=o>>(i-=8));return s}(e)))}function dr(e){return 1&e?~e>>1:e>>1}function pr(e,t){let n=Array(e);for(let s=0,r=0;s<e;s++)n[s]=r+=dr(t());return n}function hr(e,t=0){let n=[];for(;;){let s=e(),r=e();if(!r)break;t+=s;for(let e=0;e<r;e++)n.push(t+e);t+=r+1}return n}function fr(e){return gr((()=>{let t=hr(e);if(t.length)return t}))}function mr(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(wr(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(br(n,e))}return t.flat()}function gr(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function yr(e,t,n){let s=Array(e).fill().map((()=>[]));for(let r=0;r<t;r++)pr(e,n).forEach(((e,t)=>s[t].push(e)));return s}function wr(e,t){let n=1+t(),s=t(),r=gr(t);return yr(r.length,1+e,t).flatMap(((e,t)=>{let[a,...i]=e;return Array(r[t]).fill().map(((e,t)=>{let r=t*s;return[a+t*n,i.map((e=>e+r))]}))}))}function br(e,t){return yr(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}function Ar(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function Er(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let n=[];for(let s=0;s<t;)n.push(String.fromCodePoint(...e.slice(s,s+=4096)));return n.join("")}function kr(e,t){let n=e.length,s=n-t.length;for(let r=0;0==s&&r<n;r++)s=e[r]-t[r];return s}var Tr="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";const vr=44032,Cr=4352,xr=4449,Ir=4519,Nr=28,Lr=21*Nr,Br=vr+19*Lr,Or=Cr+19,Pr=xr+21,Sr=Ir+Nr;function Rr(e){return e>>24&255}function Mr(e){return 16777215&e}let Dr,Ur,Fr,Hr;function Gr(e){return e>=vr&&e<Br}function _r(e,t){if(e>=Cr&&e<Or&&t>=xr&&t<Pr)return vr+(e-Cr)*Lr+(t-xr)*Nr;if(Gr(e)&&t>Ir&&t<Sr&&(e-vr)%Nr==0)return e+(t-Ir);{let n=Hr.get(e);return n&&(n=n.get(t),n)?n:-1}}function Qr(e){Dr||function(){let e=ur(Tr);Dr=new Map(fr(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),Ur=new Set(hr(e)),Fr=new Map,Hr=new Map;for(let[t,n]of mr(e)){if(!Ur.has(t)&&2==n.length){let[e,s]=n,r=Hr.get(e);r||(r=new Map,Hr.set(e,r)),r.set(s,t)}Fr.set(t,n.reverse())}}();let t=[],n=[],s=!1;function r(e){let n=Dr.get(e);n&&(s=!0,e|=n),t.push(e)}for(let s of e)for(;;){if(s<128)t.push(s);else if(Gr(s)){let e=s-vr,t=e%Lr/Nr|0,n=e%Nr;r(Cr+(e/Lr|0)),r(xr+t),n>0&&r(Ir+n)}else{let e=Fr.get(s);e?n.push(...e):r(s)}if(!n.length)break;s=n.pop()}if(s&&t.length>1){let e=Rr(t[0]);for(let n=1;n<t.length;n++){let s=Rr(t[n]);if(0==s||e<=s){e=s;continue}let r=n-1;for(;;){let n=t[r+1];if(t[r+1]=t[r],t[r]=n,!r)break;if(e=Rr(t[--r]),e<=s)break}e=Rr(t[n])}}return t}function zr(e){return Qr(e).map(Mr)}function jr(e){return function(e){let t=[],n=[],s=-1,r=0;for(let a of e){let e=Rr(a),i=Mr(a);if(-1==s)0==e?s=i:t.push(i);else if(r>0&&r>=e)0==e?(t.push(s,...n),n.length=0,s=i):n.push(i),r=e;else{let a=_r(s,i);a>=0?s=a:0==r&&0==e?(t.push(s),s=i):(n.push(i),r=e)}}return s>=0&&t.push(s,...n),t}(Qr(e))}const Vr=45,Jr=".",Kr=65039,qr=1,Zr=e=>Array.from(e);function Yr(e,t){return e.P.has(t)||e.Q.has(t)}class Wr extends Array{get is_emoji(){return!0}}let Xr,$r,ea,ta,na,sa,ra,aa,ia,oa,la,ca;function ua(){if(Xr)return;let e=ur(or);const t=()=>hr(e),n=()=>new Set(t()),s=(e,t)=>t.forEach((t=>e.add(t)));Xr=new Map(mr(e)),$r=n(),ea=t(),ta=new Set(t().map((e=>ea[e]))),ea=new Set(ea),na=n(),sa=n();let r=fr(e),a=e();const i=()=>{let e=new Set;return t().forEach((t=>s(e,r[t]))),s(e,t()),e};ra=gr((t=>{let n=gr(e).map((e=>e+96));if(n.length){let s=t>=a;return n[0]-=32,n=Er(n),s&&(n=`Restricted[${n}]`),{N:n,P:i(),Q:i(),M:!e(),R:s}}})),aa=n(),ia=new Map;let o=t().concat(Zr(aa)).sort(((e,t)=>e-t));o.forEach(((t,n)=>{let s=e(),r=o[n]=s?o[n-s]:{V:[],M:new Map};r.V.push(t),aa.has(t)||ia.set(t,r)}));for(let{V:e,M:t}of new Set(ia.values())){let n=[];for(let t of e){let e=ra.filter((e=>Yr(e,t))),r=n.find((({G:t})=>e.some((e=>t.has(e)))));r||(r={G:new Set,V:[]},n.push(r)),r.V.push(t),s(r.G,e)}let r=n.flatMap((e=>Zr(e.G)));for(let{G:e,V:s}of n){let n=new Set(r.filter((t=>!e.has(t))));for(let e of s)t.set(e,n)}}oa=new Set;let l=new Set;const c=e=>oa.has(e)?l.add(e):oa.add(e);for(let e of ra){for(let t of e.P)c(t);for(let t of e.Q)c(t)}for(let e of oa)ia.has(e)||l.has(e)||ia.set(e,qr);s(oa,zr(oa)),la=function(e){let t=[],n=hr(e);return function e({S:n,B:s},r,a){if(!(4&n&&a===r[r.length-1])){2&n&&(a=r[r.length-1]),1&n&&t.push(r);for(let t of s)for(let n of t.Q)e(t,[...r,n],a)}}(function t(s){return{S:e(),B:gr((()=>{let s=hr(e).map((e=>n[e]));if(s.length)return t(s)})),Q:s}}([]),[]),t}(e).map((e=>Wr.from(e))).sort(kr),ca=new Map;for(let e of la){let t=[ca];for(let n of e){let e=t.map((e=>{let t=e.get(n);return t||(t=new Map,e.set(n,t)),t}));n===Kr?t.push(...e):t=e}for(let n of t)n.V=e}}function da(e){return(fa(e)?"":`${pa(ha([e]))} `)+Ar(e)}function pa(e){return`"${e}"‎`}function ha(e,t=1/0,n=Ar){let s=[];var r;r=e[0],ua(),ea.has(r)&&s.push("◌"),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let a=0,i=e.length;for(let t=0;t<i;t++){let r=e[t];fa(r)&&(s.push(Er(e.slice(a,t))),s.push(n(r)),a=t+1)}return s.push(Er(e.slice(a,i))),s.join("")}function fa(e){return ua(),na.has(e)}function ma(e,t,n){if(!e)return[];ua();let s=0;return e.split(Jr).map((e=>{let r=function(e){let t=[];for(let n=0,s=e.length;n<s;){let s=e.codePointAt(n);n+=s<65536?1:2,t.push(s)}return t}(e),a={input:r,offset:s};s+=r.length+1;try{let e,s=a.tokens=function(e,t,n){let s=[],r=[];for(e=e.slice().reverse();e.length;){let a=Aa(e);if(a)r.length&&(s.push(t(r)),r=[]),s.push(n(a));else{let t=e.pop();if(oa.has(t))r.push(t);else{let e=Xr.get(t);if(e)r.push(...e);else if(!$r.has(t))throw ga(t)}}}return r.length&&s.push(t(r)),s}(r,t,n),i=s.length;if(!i)throw new Error("empty label");let o=a.output=s.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(o),!(a.emoji=i>1||s[0].is_emoji)&&o.every((e=>e<128)))!function(e){if(e.length>=4&&e[2]==Vr&&e[3]==Vr)throw new Error(`invalid label extension: "${Er(e.slice(0,4))}"`)}(o),e="ASCII";else{let t=s.flatMap((e=>e.is_emoji?[]:e));if(t.length){if(ea.has(o[0]))throw wa("leading combining mark");for(let e=1;e<i;e++){let t=s[e];if(!t.is_emoji&&ea.has(t[0]))throw wa(`emoji + combining mark: "${Er(s[e-1])} + ${ha([t[0]])}"`)}!function(e){let t=e[0],n=lr.get(t);if(n)throw wa(`leading ${n}`);let s=e.length,r=-1;for(let a=1;a<s;a++){t=e[a];let s=lr.get(t);if(s){if(r==a)throw wa(`${n} + ${s}`);r=a+1,n=s}}if(r==s)throw wa(`trailing ${n}`)}(o);let n=Zr(new Set(t)),[r]=function(e){let t=ra;for(let n of e){let e=t.filter((e=>Yr(e,n)));if(!e.length)throw ra.some((e=>Yr(e,n)))?ya(t[0],n):ga(n);if(t=e,1==e.length)break}return t}(n);!function(e,t){for(let n of t)if(!Yr(e,n))throw ya(e,n);if(e.M){let e=zr(t);for(let t=1,n=e.length;t<n;t++)if(ta.has(e[t])){let s=t+1;for(let r;s<n&&ta.has(r=e[s]);s++)for(let n=t;n<s;n++)if(e[n]==r)throw new Error(`duplicate non-spacing marks: ${da(r)}`);if(s-t>cr)throw new Error(`excessive non-spacing marks: ${pa(ha(e.slice(t-1,s)))} (${s-t}/${cr})`);t=s}}}(r,t),function(e,t){let n,s=[];for(let e of t){let t=ia.get(e);if(t===qr)return;if(t){let s=t.M.get(e);if(n=n?n.filter((e=>s.has(e))):Zr(s),!n.length)return}else s.push(e)}if(n)for(let t of n)if(s.every((e=>Yr(t,e))))throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}(r,n),e=r.N}else e="Emoji"}a.type=e}catch(e){a.error=e}return a}))}function ga(e){return new Error(`disallowed character: ${da(e)}`)}function ya(e,t){let n=da(t),s=ra.find((e=>e.P.has(t)));return s&&(n=`${s.N} ${n}`),new Error(`illegal mixture: ${e.N} + ${n}`)}function wa(e){return new Error(`illegal placement: ${e}`)}function ba(e){return e.filter((e=>e!=Kr))}function Aa(e,t){let n,s=ca,r=e.length;for(;r&&(s=s.get(e[--r]),s);){let{V:a}=s;a&&(n=a,t&&t.push(...e.slice(r).reverse()),e.length=r)}return n}const Ea=new Uint8Array(32);function ka(e){return B(0!==e.length,"invalid ENS name; empty component","comp",e),e}function Ta(e){const t=Bt(function(e){try{if(0===e.length)throw new Error("empty label");return function(e){return function(e){return e.map((({input:t,error:n,output:s})=>{if(n){let s=n.message;throw new Error(1==e.length?s:`Invalid label ${pa(ha(t,63))}: ${s}`)}return Er(s)})).join(Jr)}(ma(e,jr,ba))}(e)}catch(t){B(!1,`invalid ENS name (${t.message})`,"name",e)}}(e)),n=[];if(0===e.length)return n;let s=0;for(let e=0;e<t.length;e++)46===t[e]&&(n.push(ka(t.slice(s,e))),s=e+1);return B(s<t.length,"invalid ENS name; empty component","name",e),n.push(ka(t.slice(s))),n}function va(e){B("string"==typeof e,"invalid ENS name; not a string","name",e),B(e.length,"invalid ENS name (empty label)","name",e);let t=Ea;const n=Ta(e);for(;n.length;)t=et(_([t,et(n.pop())]));return G(t)}function Ca(e,t){const n=null!=t?t:63;return B(n<=255,"DNS encoded label cannot exceed 255","length",n),G(_(Ta(e).map((t=>{B(t.length<=n,`label ${JSON.stringify(e)} exceeds ${n} bytes`,"name",e);const s=new Uint8Array(t.length+1);return s.set(t,1),s[0]=s.length-1,s}))))+"00"}Ea.fill(0);class xa extends Se{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Be(this.buffer)}update(e){ye(this);const{view:t,buffer:n,blockLen:s}=this,r=(e=Pe(e)).length;for(let a=0;a<r;){const i=Math.min(s-this.pos,r-a);if(i!==s)n.set(e.subarray(a,a+i),this.pos),this.pos+=i,a+=i,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=Be(e);for(;s<=r-a;a+=s)this.process(t,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){ye(this),we(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:r}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let e=a;e<s;e++)t[e]=0;!function(e,t,n,s){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,s);const r=BigInt(32),a=BigInt(4294967295),i=Number(n>>r&a),o=Number(n&a),l=s?4:0,c=s?0:4;e.setUint32(t+l,i,s),e.setUint32(t+c,o,s)}(n,s-8,BigInt(8*this.length),r),this.process(n,0);const i=Be(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=o/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)i.setUint32(4*e,c[e],r)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:r,destroyed:a,pos:i}=this;return e.length=s,e.pos=i,e.finished=r,e.destroyed=a,s%t&&e.buffer.set(n),e}}const Ia=(e,t,n)=>e&t^~e&n,Na=(e,t,n)=>e&t^e&n^t&n,La=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ba=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Oa=new Uint32Array(64);class Pa extends xa{constructor(){super(64,32,8,!1),this.A=0|Ba[0],this.B=0|Ba[1],this.C=0|Ba[2],this.D=0|Ba[3],this.E=0|Ba[4],this.F=0|Ba[5],this.G=0|Ba[6],this.H=0|Ba[7]}get(){const{A:e,B:t,C:n,D:s,E:r,F:a,G:i,H:o}=this;return[e,t,n,s,r,a,i,o]}set(e,t,n,s,r,a,i,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|s,this.E=0|r,this.F=0|a,this.G=0|i,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)Oa[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Oa[e-15],n=Oa[e-2],s=Oe(t,7)^Oe(t,18)^t>>>3,r=Oe(n,17)^Oe(n,19)^n>>>10;Oa[e]=r+Oa[e-7]+s+Oa[e-16]|0}let{A:n,B:s,C:r,D:a,E:i,F:o,G:l,H:c}=this;for(let e=0;e<64;e++){const t=c+(Oe(i,6)^Oe(i,11)^Oe(i,25))+Ia(i,o,l)+La[e]+Oa[e]|0,u=(Oe(n,2)^Oe(n,13)^Oe(n,22))+Na(n,s,r)|0;c=l,l=o,o=i,i=a+t|0,a=r,r=s,s=n,n=t+u|0}n=n+this.A|0,s=s+this.B|0,r=r+this.C|0,a=a+this.D|0,i=i+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,s,r,a,i,o,l,c)}roundClean(){Oa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Sa=Re((()=>new Pa)),[Ra,Ma]=(()=>Ie.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),Da=new Uint32Array(80),Ua=new Uint32Array(80);class Fa extends xa{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:r,Cl:a,Dh:i,Dl:o,Eh:l,El:c,Fh:u,Fl:d,Gh:p,Gl:h,Hh:f,Hl:m}=this;return[e,t,n,s,r,a,i,o,l,c,u,d,p,h,f,m]}set(e,t,n,s,r,a,i,o,l,c,u,d,p,h,f,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|s,this.Ch=0|r,this.Cl=0|a,this.Dh=0|i,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|d,this.Gh=0|p,this.Gl=0|h,this.Hh=0|f,this.Hl=0|m}process(e,t){for(let n=0;n<16;n++,t+=4)Da[n]=e.getUint32(t),Ua[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Da[e-15],n=0|Ua[e-15],s=Ie.rotrSH(t,n,1)^Ie.rotrSH(t,n,8)^Ie.shrSH(t,n,7),r=Ie.rotrSL(t,n,1)^Ie.rotrSL(t,n,8)^Ie.shrSL(t,n,7),a=0|Da[e-2],i=0|Ua[e-2],o=Ie.rotrSH(a,i,19)^Ie.rotrBH(a,i,61)^Ie.shrSH(a,i,6),l=Ie.rotrSL(a,i,19)^Ie.rotrBL(a,i,61)^Ie.shrSL(a,i,6),c=Ie.add4L(r,l,Ua[e-7],Ua[e-16]),u=Ie.add4H(c,s,o,Da[e-7],Da[e-16]);Da[e]=0|u,Ua[e]=0|c}let{Ah:n,Al:s,Bh:r,Bl:a,Ch:i,Cl:o,Dh:l,Dl:c,Eh:u,El:d,Fh:p,Fl:h,Gh:f,Gl:m,Hh:g,Hl:y}=this;for(let e=0;e<80;e++){const t=Ie.rotrSH(u,d,14)^Ie.rotrSH(u,d,18)^Ie.rotrBH(u,d,41),w=Ie.rotrSL(u,d,14)^Ie.rotrSL(u,d,18)^Ie.rotrBL(u,d,41),b=u&p^~u&f,A=d&h^~d&m,E=Ie.add5L(y,w,A,Ma[e],Ua[e]),k=Ie.add5H(E,g,t,b,Ra[e],Da[e]),T=0|E,v=Ie.rotrSH(n,s,28)^Ie.rotrBH(n,s,34)^Ie.rotrBH(n,s,39),C=Ie.rotrSL(n,s,28)^Ie.rotrBL(n,s,34)^Ie.rotrBL(n,s,39),x=n&r^n&i^r&i,I=s&a^s&o^a&o;g=0|f,y=0|m,f=0|p,m=0|h,p=0|u,h=0|d,({h:u,l:d}=Ie.add(0|l,0|c,0|k,0|T)),l=0|i,c=0|o,i=0|r,o=0|a,r=0|n,a=0|s;const N=Ie.add3L(T,C,I);n=Ie.add3H(N,k,v,x),s=0|N}({h:n,l:s}=Ie.add(0|this.Ah,0|this.Al,0|n,0|s)),({h:r,l:a}=Ie.add(0|this.Bh,0|this.Bl,0|r,0|a)),({h:i,l:o}=Ie.add(0|this.Ch,0|this.Cl,0|i,0|o)),({h:l,l:c}=Ie.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:d}=Ie.add(0|this.Eh,0|this.El,0|u,0|d)),({h:p,l:h}=Ie.add(0|this.Fh,0|this.Fl,0|p,0|h)),({h:f,l:m}=Ie.add(0|this.Gh,0|this.Gl,0|f,0|m)),({h:g,l:y}=Ie.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(n,s,r,a,i,o,l,c,u,d,p,h,f,m,g,y)}roundClean(){Da.fill(0),Ua.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ha=Re((()=>new Fa)),Ga=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();function _a(e){switch(e){case"sha256":return Sa.create();case"sha512":return Ha.create()}B(!1,"invalid hashing algorithm name","algorithm",e)}Ga.crypto||Ga.msCrypto;const Qa=function(e){return _a("sha256").update(e).digest()},za=function(e){return _a("sha512").update(e).digest()};let ja=Qa,Va=za,Ja=!1,Ka=!1;function qa(e){const t=M(e,"data");return G(ja(t))}function Za(e){const t=M(e,"data");return G(Va(t))}qa._=Qa,qa.lock=function(){Ja=!0},qa.register=function(e){if(Ja)throw new Error("sha256 is locked");ja=e},Object.freeze(qa),Za._=za,Za.lock=function(){Ka=!0},Za.register=function(e){if(Ka)throw new Error("sha512 is locked");Va=e},Object.freeze(qa);const Ya="0x0000000000000000000000000000000000000000000000000000000000000000",Wa=BigInt(0),Xa=BigInt(1),$a=BigInt(2),ei=BigInt(27),ti=BigInt(28),ni=BigInt(35),si={};function ri(e){return V(se(e),32)}class ai{#$;#ee;#te;#ne;get r(){return this.#$}set r(e){B(32===Q(e),"invalid r","value",e),this.#$=G(e)}get s(){return this.#ee}set s(e){B(32===Q(e),"invalid s","value",e);const t=G(e);B(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),this.#ee=t}get v(){return this.#te}set v(e){const t=te(e,"value");B(27===t||28===t,"invalid v","v",e),this.#te=t}get networkV(){return this.#ne}get legacyChainId(){const e=this.networkV;return null==e?null:ai.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=M(this.s);return this.yParity&&(e[0]|=128),G(e)}get compactSerialized(){return _([this.r,this.yParityAndS])}get serialized(){return _([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,s){S(e,si,"Signature"),this.#$=t,this.#ee=n,this.#te=s,this.#ne=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new ai(si,this.r,this.s,this.v);return this.networkV&&(e.#ne=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=W(e,"v");return t==ei||t==ti?Wa:(B(t>=ni,"invalid EIP-155 v","v",e),(t-ni)/$a)}static getChainIdV(e,t){return W(e)*$a+BigInt(35+t-27)}static getNormalizedV(e){const t=W(e);return t===Wa||t===ei?27:t===Xa||t===ti?28:(B(t>=ni,"invalid v","v",e),t&Xa?27:28)}static from(e){function t(t,n){B(t,n,"signature",e)}if(null==e)return new ai(si,Ya,Ya,27);if("string"==typeof e){const n=M(e,"signature");if(64===n.length){const e=G(n.slice(0,32)),t=n.slice(32,64),s=128&t[0]?28:27;return t[0]&=127,new ai(si,e,G(t),s)}if(65===n.length){const e=G(n.slice(0,32)),s=n.slice(32,64);t(!(128&s[0]),"non-canonical s");const r=ai.getNormalizedV(n[64]);return new ai(si,e,G(s),r)}t(!1,"invalid raw signature length")}if(e instanceof ai)return e.clone();const n=e.r;t(null!=n,"missing r");const s=ri(n),r=function(e,n){if(null!=e)return ri(e);if(null!=n){t(U(n,32),"invalid yParityAndS");const e=M(n);return e[0]&=127,G(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t(!(128&M(r)[0]),"non-canonical s");const{networkV:a,v:i}=function(e,n,s){if(null!=e){const t=W(e);return{networkV:t>=ni?t:void 0,v:ai.getNormalizedV(t)}}if(null!=n)return t(U(n,32),"invalid yParityAndS"),{v:128&M(n)[0]?28:27};if(null!=s){switch(te(s,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),o=new ai(si,s,r,i);return a&&(o.#ne=a),t(null==e.yParity||te(e.yParity,"sig.yParity")===o.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===o.yParityAndS,"yParityAndS mismatch"),o}}BigInt(0);const ii=BigInt(1),oi=BigInt(2),li=e=>e instanceof Uint8Array,ci=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function ui(e){if(!li(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=ci[e[n]];return t}function di(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function pi(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const s=2*t,r=e.slice(s,s+2),a=Number.parseInt(r,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[t]=a}return n}function hi(e){return di(ui(e))}function fi(e){if(!li(e))throw new Error("Uint8Array expected");return di(ui(Uint8Array.from(e).reverse()))}function mi(e,t){return pi(e.toString(16).padStart(2*t,"0"))}function gi(e,t){return mi(e,t).reverse()}function yi(e,t,n){let s;if("string"==typeof t)try{s=pi(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!li(t))throw new Error(`${e} must be hex string or Uint8Array`);s=Uint8Array.from(t)}const r=s.length;if("number"==typeof n&&r!==n)throw new Error(`${e} expected ${n} bytes, got ${r}`);return s}function wi(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!li(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}const bi=e=>(oi<<BigInt(e-1))-ii,Ai=e=>new Uint8Array(e),Ei=e=>Uint8Array.from(e);function ki(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let s=Ai(e),r=Ai(e),a=0;const i=()=>{s.fill(1),r.fill(0),a=0},o=(...e)=>n(r,s,...e),l=(e=Ai())=>{r=o(Ei([0]),e),s=o(),0!==e.length&&(r=o(Ei([1]),e),s=o())},c=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){s=o();const t=s.slice();n.push(t),e+=s.length}return wi(...n)};return(e,t)=>{let n;for(i(),l(e);!(n=t(c()));)l();return i(),n}}const Ti={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function vi(e,t,n={}){const s=(t,n,s)=>{const r=Ti[n];if("function"!=typeof r)throw new Error(`Invalid validator "${n}", expected function`);const a=e[t];if(!(s&&void 0===a||r(a,e)))throw new Error(`Invalid param ${String(t)}=${a} (${typeof a}), expected ${n}`)};for(const[e,n]of Object.entries(t))s(e,n,!1);for(const[e,t]of Object.entries(n))s(e,t,!0);return e}const Ci=BigInt(0),xi=BigInt(1),Ii=BigInt(2),Ni=BigInt(3),Li=BigInt(4),Bi=BigInt(5),Oi=BigInt(8);function Pi(e,t){const n=e%t;return n>=Ci?n:t+n}function Si(e,t,n){if(n<=Ci||t<Ci)throw new Error("Expected power/modulo > 0");if(n===xi)return Ci;let s=xi;for(;t>Ci;)t&xi&&(s=s*e%n),e=e*e%n,t>>=xi;return s}function Ri(e,t,n){let s=e;for(;t-- >Ci;)s*=s,s%=n;return s}function Mi(e,t){if(e===Ci||t<=Ci)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Pi(e,t),s=t,r=Ci,a=xi,i=xi,o=Ci;for(;n!==Ci;){const e=s/n,t=s%n,l=r-i*e,c=a-o*e;s=n,n=t,r=i,a=o,i=l,o=c}if(s!==xi)throw new Error("invert: does not exist");return Pi(r,t)}BigInt(9),BigInt(16);const Di=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ui(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Fi(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Hi(e){const t=Fi(e);return t+Math.ceil(t/2)}class Gi extends Se{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");me(e.outputLen),me(e.blockLen)}(e);const n=Pe(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,r=new Uint8Array(s);r.set(n.length>s?e.create().update(n).digest():n);for(let e=0;e<r.length;e++)r[e]^=54;this.iHash.update(r),this.oHash=e.create();for(let e=0;e<r.length;e++)r[e]^=106;this.oHash.update(r),r.fill(0)}update(e){return ye(this),this.iHash.update(e),this}digestInto(e){ye(this),ge(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:r,blockLen:a,outputLen:i}=this;return e.finished=s,e.destroyed=r,e.blockLen=a,e.outputLen=i,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const _i=(e,t,n)=>new Gi(e,t).update(n).digest();_i.create=(e,t)=>new Gi(e,t);const Qi=BigInt(0),zi=BigInt(1);function ji(e){return vi(e.Fp,Di.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),vi(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ui(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:Vi,hexToBytes:Ji}=t,Ki={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=Ki;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],s=e.subarray(2,n+2);if(!n||s.length!==n)throw new t("Invalid signature integer: wrong length");if(128&s[0])throw new t("Invalid signature integer: negative");if(0===s[0]&&!(128&s[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Vi(s),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Ki,n="string"==typeof e?Ji(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let s=n.length;if(s<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==s-2)throw new t("Invalid signature: incorrect length");const{d:r,l:a}=Ki._parseInt(n.subarray(2)),{d:i,l:o}=Ki._parseInt(a);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r,s:i}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},s=t(n(e.s)),r=t(n(e.r)),a=s.length/2,i=r.length/2,o=n(a),l=n(i);return`30${n(i+a+4)}02${l}${r}02${o}${s}`}},qi=BigInt(0),Zi=BigInt(1),Yi=(BigInt(2),BigInt(3));function Wi(e){const t=function(e){const t=ji(e);return vi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:s}=t,r=n.BYTES+1,a=2*n.BYTES+1;function i(e){return Pi(e,s)}function o(e){return Mi(e,s)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:d}=function(e){const t=function(e){const t=ji(e);vi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:r}=t;if(n){if(!s.eql(r,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,s=t.toBytes||((e,t,s)=>{const r=t.toAffine();return wi(Uint8Array.from([4]),n.toBytes(r.x),n.toBytes(r.y))}),r=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function a(e){const{a:s,b:r}=t,a=n.sqr(e),i=n.mul(a,e);return n.add(n.add(i,n.mul(e,s)),r)}if(!n.eql(n.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function i(e){return"bigint"==typeof e&&qi<e&&e<t.n}function o(e){if(!i(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:n,nByteLength:s,wrapPrivateKey:r,n:a}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=ui(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*s,"0")}let i;try{i="bigint"==typeof e?e:hi(yi("private key",e,s))}catch(t){throw new Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}return r&&(i=Pi(i,a)),o(i),i}const c=new Map;function u(e){if(!(e instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(e,t,s){if(this.px=e,this.py=t,this.pz=s,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==s||!n.isValid(s))throw new Error("z required")}static fromAffine(e){const{x:t,y:s}=e||{};if(!e||!n.isValid(t)||!n.isValid(s))throw new Error("invalid affine point");if(e instanceof d)throw new Error("projective point not allowed");const r=e=>n.eql(e,n.ZERO);return r(t)&&r(s)?d.ZERO:new d(t,s,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(d.fromAffine)}static fromHex(e){const t=d.fromAffine(r(yi("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:s}=this.toAffine();if(!n.isValid(e)||!n.isValid(s))throw new Error("bad point: x or y not FE");const r=n.sqr(s),i=a(e);if(!n.eql(r,i))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:s,pz:r}=this,{px:a,py:i,pz:o}=e,l=n.eql(n.mul(t,o),n.mul(a,r)),c=n.eql(n.mul(s,o),n.mul(i,r));return l&&c}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:s}=t,r=n.mul(s,Yi),{px:a,py:i,pz:o}=this;let l=n.ZERO,c=n.ZERO,u=n.ZERO,p=n.mul(a,a),h=n.mul(i,i),f=n.mul(o,o),m=n.mul(a,i);return m=n.add(m,m),u=n.mul(a,o),u=n.add(u,u),l=n.mul(e,u),c=n.mul(r,f),c=n.add(l,c),l=n.sub(h,c),c=n.add(h,c),c=n.mul(l,c),l=n.mul(m,l),u=n.mul(r,u),f=n.mul(e,f),m=n.sub(p,f),m=n.mul(e,m),m=n.add(m,u),u=n.add(p,p),p=n.add(u,p),p=n.add(p,f),p=n.mul(p,m),c=n.add(c,p),f=n.mul(i,o),f=n.add(f,f),p=n.mul(f,m),l=n.sub(l,p),u=n.mul(f,h),u=n.add(u,u),u=n.add(u,u),new d(l,c,u)}add(e){u(e);const{px:s,py:r,pz:a}=this,{px:i,py:o,pz:l}=e;let c=n.ZERO,p=n.ZERO,h=n.ZERO;const f=t.a,m=n.mul(t.b,Yi);let g=n.mul(s,i),y=n.mul(r,o),w=n.mul(a,l),b=n.add(s,r),A=n.add(i,o);b=n.mul(b,A),A=n.add(g,y),b=n.sub(b,A),A=n.add(s,a);let E=n.add(i,l);return A=n.mul(A,E),E=n.add(g,w),A=n.sub(A,E),E=n.add(r,a),c=n.add(o,l),E=n.mul(E,c),c=n.add(y,w),E=n.sub(E,c),h=n.mul(f,A),c=n.mul(m,w),h=n.add(c,h),c=n.sub(y,h),h=n.add(y,h),p=n.mul(c,h),y=n.add(g,g),y=n.add(y,g),w=n.mul(f,w),A=n.mul(m,A),y=n.add(y,w),w=n.sub(g,w),w=n.mul(f,w),A=n.add(A,w),g=n.mul(y,A),p=n.add(p,g),g=n.mul(E,A),c=n.mul(b,c),c=n.sub(c,g),g=n.mul(b,y),h=n.mul(E,h),h=n.add(h,g),new d(c,p,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return h.wNAFCached(this,c,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(d.fromAffine)}))}multiplyUnsafe(e){const s=d.ZERO;if(e===qi)return s;if(o(e),e===Zi)return this;const{endo:r}=t;if(!r)return h.unsafeLadder(this,e);let{k1neg:a,k1:i,k2neg:l,k2:c}=r.splitScalar(e),u=s,p=s,f=this;for(;i>qi||c>qi;)i&Zi&&(u=u.add(f)),c&Zi&&(p=p.add(f)),f=f.double(),i>>=Zi,c>>=Zi;return a&&(u=u.negate()),l&&(p=p.negate()),p=new d(n.mul(p.px,r.beta),p.py,p.pz),u.add(p)}multiply(e){o(e);let s,r,a=e;const{endo:i}=t;if(i){const{k1neg:e,k1:t,k2neg:o,k2:l}=i.splitScalar(a);let{p:c,f:u}=this.wNAF(t),{p,f}=this.wNAF(l);c=h.constTimeNegate(e,c),p=h.constTimeNegate(o,p),p=new d(n.mul(p.px,i.beta),p.py,p.pz),s=c.add(p),r=u.add(f)}else{const{p:e,f:t}=this.wNAF(a);s=e,r=t}return d.normalizeZ([s,r])[0]}multiplyAndAddUnsafe(e,t,n){const s=d.BASE,r=(e,t)=>t!==qi&&t!==Zi&&e.equals(s)?e.multiply(t):e.multiplyUnsafe(t),a=r(this,t).add(r(e,n));return a.is0()?void 0:a}toAffine(e){const{px:t,py:s,pz:r}=this,a=this.is0();null==e&&(e=a?n.ONE:n.inv(r));const i=n.mul(t,e),o=n.mul(s,e),l=n.mul(r,e);if(a)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:i,y:o}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Zi)return!0;if(n)return n(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Zi?this:n?n(d,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),s(d,this,e)}toHex(e=!0){return ui(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const p=t.nBitLength,h=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},s=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let s=e.ZERO,r=t;for(;n>Qi;)n&zi&&(s=s.add(r)),r=r.double(),n>>=zi;return s},precomputeWindow(e,t){const{windows:n,windowSize:r}=s(t),a=[];let i=e,o=i;for(let e=0;e<n;e++){o=i,a.push(o);for(let e=1;e<r;e++)o=o.add(i),a.push(o);i=o.double()}return a},wNAF(t,r,a){const{windows:i,windowSize:o}=s(t);let l=e.ZERO,c=e.BASE;const u=BigInt(2**t-1),d=2**t,p=BigInt(t);for(let e=0;e<i;e++){const t=e*o;let s=Number(a&u);a>>=p,s>o&&(s-=d,a+=zi);const i=t,h=t+Math.abs(s)-1,f=e%2!=0,m=s<0;0===s?c=c.add(n(f,r[i])):l=l.add(n(m,r[h]))}return{p:l,f:c}},wNAFCached(e,t,n,s){const r=e._WINDOW_SIZE||1;let a=t.get(e);return a||(a=this.precomputeWindow(e,r),1!==r&&t.set(e,s(a))),this.wNAF(r,a,n)}}}(d,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:a,isWithinCurveOrder:i}}({...t,toBytes(e,t,s){const r=t.toAffine(),a=n.toBytes(r.x),i=wi;return s?i(Uint8Array.from([t.hasEvenY()?2:3]),a):i(Uint8Array.from([4]),a,n.toBytes(r.y))},fromBytes(e){const t=e.length,s=e[0],i=e.subarray(1);if(t!==r||2!==s&&3!==s){if(t===a&&4===s)return{x:n.fromBytes(i.subarray(0,n.BYTES)),y:n.fromBytes(i.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${r} compressed bytes or ${a} uncompressed bytes`)}{const e=hi(i);if(!(qi<(o=e)&&o<n.ORDER))throw new Error("Point is not on curve");const t=u(e);let r=n.sqrt(t);return!(1&~s)!=((r&Zi)===Zi)&&(r=n.neg(r)),{x:e,y:r}}var o}}),p=e=>ui(mi(e,t.nByteLength));function h(e){return e>s>>Zi}const f=(e,t,n)=>hi(e.slice(t,n));class m{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=yi("compactSignature",e,2*n),new m(f(e,0,n),f(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Ki.toSig(yi("DER",e));return new m(t,n)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:s,s:r,recovery:a}=this,c=b(yi("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");const u=2===a||3===a?s+t.n:s;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=1&a?"03":"02",h=l.fromHex(d+p(u)),f=o(u),m=i(-c*f),g=i(r*f),y=l.BASE.multiplyAndAddUnsafe(h,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return pi(this.toDERHex())}toDERHex(){return Ki.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return pi(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const g={isValidPrivateKey(e){try{return c(e),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=Hi(t.n);return function(e,t,n=!1){const s=e.length,r=Fi(t),a=Hi(t);if(s<16||s<a||s>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${s}`);const i=Pi(n?hi(e):fi(e),t-xi)+xi;return n?gi(i,r):mi(i,r)}(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=e instanceof Uint8Array,n="string"==typeof e,s=(t||n)&&e.length;return t?s===r||s===a:n?s===2*r||s===2*a:e instanceof l}const w=t.bits2int||function(e){const n=hi(e),s=8*e.length-t.nBitLength;return s>0?n>>BigInt(s):n},b=t.bits2int_modN||function(e){return i(w(e))},A=bi(t.nBitLength);function E(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(qi<=e&&e<A))throw new Error(`bigint expected < 2^${t.nBitLength}`);return mi(e,t.nByteLength)}const k={lowS:t.lowS,prehash:!1},T={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(c(e)).toRawBytes(n)},sign:function(e,s,r=k){const{seed:a,k2sig:u}=function(e,s,r=k){if(["recovered","canonical"].some((e=>e in r)))throw new Error("sign() legacy options not supported");const{hash:a,randomBytes:u}=t;let{lowS:p,prehash:f,extraEntropy:g}=r;null==p&&(p=!0),e=yi("msgHash",e),f&&(e=yi("prehashed msgHash",a(e)));const y=b(e),A=c(s),T=[E(A),E(y)];if(null!=g){const e=!0===g?u(n.BYTES):g;T.push(yi("extraEntropy",e))}const v=wi(...T),C=y;return{seed:v,k2sig:function(e){const t=w(e);if(!d(t))return;const n=o(t),s=l.BASE.multiply(t).toAffine(),r=i(s.x);if(r===qi)return;const a=i(n*i(C+r*A));if(a===qi)return;let c=(s.x===r?0:2)|Number(s.y&Zi),u=a;return p&&h(a)&&(u=function(e){return h(e)?i(-e):e}(a),c^=1),new m(r,u,c)}}}(e,s,r),p=t;return ki(p.hash.outputLen,p.nByteLength,p.hmac)(a,u)},verify:function(e,n,s,r=T){const a=e;if(n=yi("msgHash",n),s=yi("publicKey",s),"strict"in r)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:u}=r;let d,p;try{if("string"==typeof a||a instanceof Uint8Array)try{d=m.fromDER(a)}catch(e){if(!(e instanceof Ki.Err))throw e;d=m.fromCompact(a)}else{if("object"!=typeof a||"bigint"!=typeof a.r||"bigint"!=typeof a.s)throw new Error("PARSE");{const{r:e,s:t}=a;d=new m(e,t)}}p=l.fromHex(s)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&d.hasHighS())return!1;u&&(n=t.hash(n));const{r:h,s:f}=d,g=b(n),y=o(f),w=i(g*y),A=i(h*y),E=l.BASE.multiplyAndAddUnsafe(p,w,A)?.toAffine();return!!E&&i(E.x)===h},ProjectivePoint:l,Signature:m,utils:g}}function Xi(e){return{hash:e,hmac:(t,...n)=>_i(e,t,function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!Le(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}(...n)),randomBytes:Me}}BigInt(4);const $i=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),eo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),to=BigInt(1),no=BigInt(2),so=(e,t)=>(e+t/no)/t;const ro=function(e,t,n=!1,s={}){if(e<=Ci)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:r,nByteLength:a}=Ui(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const i=function(e){if(e%Li===Ni){const t=(e+xi)/Li;return function(e,n){const s=e.pow(n,t);if(!e.eql(e.sqr(s),n))throw new Error("Cannot find square root");return s}}if(e%Oi===Bi){const t=(e-Bi)/Oi;return function(e,n){const s=e.mul(n,Ii),r=e.pow(s,t),a=e.mul(n,r),i=e.mul(e.mul(a,Ii),r),o=e.mul(a,e.sub(i,e.ONE));if(!e.eql(e.sqr(o),n))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-xi)/Ii;let n,s,r;for(n=e-xi,s=0;n%Ii===Ci;n/=Ii,s++);for(r=Ii;r<e&&Si(r,t,e)!==e-xi;r++);if(1===s){const t=(e+xi)/Li;return function(e,n){const s=e.pow(n,t);if(!e.eql(e.sqr(s),n))throw new Error("Cannot find square root");return s}}const a=(n+xi)/Ii;return function(e,i){if(e.pow(i,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=s,l=e.pow(e.mul(e.ONE,r),n),c=e.pow(i,a),u=e.pow(i,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(l,xi<<BigInt(o-t-1));l=e.sqr(n),c=e.mul(c,n),u=e.mul(u,l),o=t}return c}}(e)}(e),o=Object.freeze({ORDER:e,BITS:r,BYTES:a,MASK:bi(r),ZERO:Ci,ONE:xi,create:t=>Pi(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return Ci<=t&&t<e},is0:e=>e===Ci,isOdd:e=>(e&xi)===xi,neg:t=>Pi(-t,e),eql:(e,t)=>e===t,sqr:t=>Pi(t*t,e),add:(t,n)=>Pi(t+n,e),sub:(t,n)=>Pi(t-n,e),mul:(t,n)=>Pi(t*n,e),pow:(e,t)=>function(e,t,n){if(n<Ci)throw new Error("Expected power > 0");if(n===Ci)return e.ONE;if(n===xi)return t;let s=e.ONE,r=t;for(;n>Ci;)n&xi&&(s=e.mul(s,r)),r=e.sqr(r),n>>=xi;return s}(o,e,t),div:(t,n)=>Pi(t*Mi(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Mi(t,e),sqrt:s.sqrt||(e=>i(o,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),s=t.reduce(((t,s,r)=>e.is0(s)?t:(n[r]=t,e.mul(t,s))),e.ONE),r=e.inv(s);return t.reduceRight(((t,s,r)=>e.is0(s)?t:(n[r]=e.mul(t,n[r]),e.mul(t,s))),r),n}(o,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?gi(e,a):mi(e,a),fromBytes:e=>{if(e.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${e.length}`);return n?fi(e):hi(e)}});return Object.freeze(o)}($i,void 0,void 0,{sqrt:function(e){const t=$i,n=BigInt(3),s=BigInt(6),r=BigInt(11),a=BigInt(22),i=BigInt(23),o=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,d=Ri(u,n,t)*u%t,p=Ri(d,n,t)*u%t,h=Ri(p,no,t)*c%t,f=Ri(h,r,t)*h%t,m=Ri(f,a,t)*f%t,g=Ri(m,o,t)*m%t,y=Ri(g,l,t)*g%t,w=Ri(y,o,t)*m%t,b=Ri(w,n,t)*u%t,A=Ri(b,i,t)*f%t,E=Ri(A,s,t)*c%t,k=Ri(E,no,t);if(!ro.eql(ro.sqr(k),e))throw new Error("Cannot find square root");return k}}),ao=function(e,t){const n=t=>Wi({...e,...Xi(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:ro,n:eo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=eo,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-to*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=n,i=BigInt("0x100000000000000000000000000000000"),o=so(a*e,t),l=so(-s*e,t);let c=Pi(e-o*n-l*r,t),u=Pi(-o*s-l*a,t);const d=c>i,p=u>i;if(d&&(c=t-c),p&&(u=t-u),c>i||u>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:c,k2neg:p,k2:u}}}},Sa);BigInt(0),ao.ProjectivePoint;class io{#se;constructor(e){B(32===Q(e),"invalid private key","privateKey","[REDACTED]"),this.#se=G(e)}get privateKey(){return this.#se}get publicKey(){return io.computePublicKey(this.#se)}get compressedPublicKey(){return io.computePublicKey(this.#se,!0)}sign(e){B(32===Q(e),"invalid digest length","digest",e);const t=ao.sign(D(e),D(this.#se),{lowS:!0});return ai.from({r:ne(t.r,32),s:ne(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=io.computePublicKey(e);return G(ao.getSharedSecret(D(this.#se),M(t),!1))}static computePublicKey(e,t){let n=M(e,"key");if(32===n.length)return G(ao.getPublicKey(n,!!t));if(64===n.length){const e=new Uint8Array(65);e[0]=4,e.set(n,1),n=e}return G(ao.ProjectivePoint.fromHex(n).toRawBytes(t))}static recoverPublicKey(e,t){B(32===Q(e),"invalid digest length","digest",e);const n=ai.from(t);let s=ao.Signature.fromCompact(D(_([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const r=s.recoverPublicKey(D(e));return B(null!=r,"invalid signautre for digest","signature",t),"0x"+r.toHex(!1)}static addPoints(e,t,n){const s=ao.ProjectivePoint.fromHex(io.computePublicKey(e).substring(2)),r=ao.ProjectivePoint.fromHex(io.computePublicKey(t).substring(2));return"0x"+s.add(r).toHex(!!n)}}function oo(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function lo(e,t,n){let s=0;for(let r=0;r<n;r++)s=256*s+e[t+r];return s}function co(e,t,n,s){const r=[];for(;n<t+1+s;){const a=uo(e,n);r.push(a.result),L((n+=a.consumed)<=t+1+s,"child data too short","BUFFER_OVERRUN",{buffer:e,length:s,offset:t})}return{consumed:1+s,result:r}}function uo(e,t){L(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=t=>{L(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const s=e[t]-247;n(t+1+s);const r=lo(e,t+1,s);return n(t+1+s+r),co(e,t,t+1+s,s+r)}if(e[t]>=192){const s=e[t]-192;return n(t+1+s),co(e,t,t+1,s)}if(e[t]>=184){const s=e[t]-183;n(t+1+s);const r=lo(e,t+1,s);return n(t+1+s+r),{consumed:1+s+r,result:G(e.slice(t+1+s,t+1+s+r))}}if(e[t]>=128){const s=e[t]-128;return n(t+1+s),{consumed:1+s,result:G(e.slice(t+1,t+1+s))}}return{consumed:1,result:oo(e[t])}}function po(e){const t=M(e,"data"),n=uo(t,0);return B(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function ho(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function fo(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(fo(e))})),t.length<=55)return t.unshift(192+t.length),t;const n=ho(t.length);return n.unshift(247+n.length),n.concat(t)}const t=Array.prototype.slice.call(M(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=ho(t.length);return n.unshift(183+n.length),n.concat(t)}const mo="0123456789abcdef";function go(e){let t="0x";for(const n of fo(e))t+=mo[n>>4],t+=mo[15&n];return t}const yo=BigInt(0),wo=BigInt(2),bo=BigInt(27),Ao=BigInt(28),Eo=BigInt(35),ko=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),To=131072;function vo(e,t){let n=e.toString(16);for(;n.length<2;)n="0"+n;return n+=qa(t).substring(4),"0x"+n}function Co(e){return"0x"===e?null:ot(e)}function xo(e,t){try{return Xn(e)}catch(n){B(!1,n.message,t,e)}}function Io(e,t){return"0x"===e?0:te(e,t)}function No(e,t){if("0x"===e)return yo;const n=W(e,t);return B(n<=ko,"value exceeds uint size",t,n),n}function Lo(e,t){const n=W(e,"value"),s=se(n);return B(s.length<=32,"value too large",`tx.${t}`,n),s}function Bo(e){return Xn(e).map((e=>[e.address,e.storageKeys]))}function Oo(e,t){B(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)B(U(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}function Po(e,t){let n;try{if(n=Io(t[0],"yParity"),0!==n&&1!==n)throw new Error("bad yParity")}catch(e){B(!1,"invalid yParity","yParity",t[0])}const s=V(t[1],32),r=V(t[2],32),a=ai.from({r:s,s:r,yParity:n});e.signature=a}class So{#re;#ae;#t;#ie;#oe;#le;#ce;#ue;#de;#pe;#he;#fe;#me;#ge;#ye;#we;get type(){return this.#re}set type(e){switch(e){case null:this.#re=null;break;case 0:case"legacy":this.#re=0;break;case 1:case"berlin":case"eip-2930":this.#re=1;break;case 2:case"london":case"eip-1559":this.#re=2;break;case 3:case"cancun":case"eip-4844":this.#re=3;break;default:B(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const e=this.#ae;return null==e&&3===this.type?hs:e}set to(e){this.#ae=null==e?null:ot(e)}get nonce(){return this.#ie}set nonce(e){this.#ie=te(e,"value")}get gasLimit(){return this.#oe}set gasLimit(e){this.#oe=W(e)}get gasPrice(){const e=this.#le;return null!=e||0!==this.type&&1!==this.type?e:yo}set gasPrice(e){this.#le=null==e?null:W(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#ce;return null==e?2===this.type||3===this.type?yo:null:e}set maxPriorityFeePerGas(e){this.#ce=null==e?null:W(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#ue;return null==e?2===this.type||3===this.type?yo:null:e}set maxFeePerGas(e){this.#ue=null==e?null:W(e,"maxFeePerGas")}get data(){return this.#t}set data(e){this.#t=G(e)}get value(){return this.#de}set value(e){this.#de=W(e,"value")}get chainId(){return this.#pe}set chainId(e){this.#pe=W(e)}get signature(){return this.#he||null}set signature(e){this.#he=null==e?null:ai.from(e)}get accessList(){const e=this.#fe||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){this.#fe=null==e?null:Xn(e)}get maxFeePerBlobGas(){const e=this.#me;return null==e&&3===this.type?yo:e}set maxFeePerBlobGas(e){this.#me=null==e?null:W(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#ge;return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){B(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)B(U(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#ge=e}get blobs(){return null==this.#we?null:this.#we.map((e=>Object.assign({},e)))}set blobs(e){if(null==e)return void(this.#we=null);const t=[],n=[];for(let s=0;s<e.length;s++){const r=e[s];if(F(r)){L(this.#ye,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=M(r);if(B(e.length<=To,"blob is too large",`blobs[${s}]`,r),e.length!==To){const t=new Uint8Array(To);t.set(e),e=t}const a=this.#ye.blobToKzgCommitment(e),i=G(this.#ye.computeBlobKzgProof(e,a));t.push({data:G(e),commitment:G(a),proof:i}),n.push(vo(1,a))}else{const e=G(r.commitment);t.push({data:G(r.data),commitment:e,proof:G(r.proof)}),n.push(vo(1,e))}}this.#we=t,this.#ge=n}get kzg(){return this.#ye}set kzg(e){this.#ye=e}constructor(){this.#re=null,this.#ae=null,this.#ie=0,this.#oe=yo,this.#le=null,this.#ce=null,this.#ue=null,this.#t="0x",this.#de=yo,this.#pe=yo,this.#he=null,this.#fe=null,this.#me=null,this.#ge=null,this.#we=null,this.#ye=null}get hash(){return null==this.signature?null:et(this.#be(!0,!1))}get unsignedHash(){return et(this.unsignedSerialized)}get from(){return null==this.signature?null:(e=this.unsignedHash,t=this.signature,function(e){let t;return t="string"==typeof e?io.computePublicKey(e,!1):e.publicKey,ot(et("0x"+t.substring(4)).substring(26))}(io.recoverPublicKey(e,t)));var e,t}get fromPublicKey(){return null==this.signature?null:io.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#be(e,t){L(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){const n=[Lo(e.nonce,"nonce"),Lo(e.gasPrice||0,"gasPrice"),Lo(e.gasLimit,"gasLimit"),e.to||"0x",Lo(e.value,"value"),e.data];let s=yo;if(e.chainId!=yo)s=W(e.chainId,"tx.chainId"),B(!t||null==t.networkV||t.legacyChainId===s,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(s=t)}if(!t)return s!==yo&&(n.push(se(s)),n.push("0x"),n.push("0x")),go(n);let r=BigInt(27+t.yParity);return s!==yo?r=ai.getChainIdV(s,t.v):BigInt(t.v)!==r&&B(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(se(r)),n.push(se(t.r)),n.push(se(t.s)),go(n)}(this,n);case 1:return function(e,t){const n=[Lo(e.chainId,"chainId"),Lo(e.nonce,"nonce"),Lo(e.gasPrice||0,"gasPrice"),Lo(e.gasLimit,"gasLimit"),e.to||"0x",Lo(e.value,"value"),e.data,Bo(e.accessList||[])];return t&&(n.push(Lo(t.yParity,"recoveryParam")),n.push(se(t.r)),n.push(se(t.s))),_(["0x01",go(n)])}(this,n);case 2:return function(e,t){const n=[Lo(e.chainId,"chainId"),Lo(e.nonce,"nonce"),Lo(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Lo(e.maxFeePerGas||0,"maxFeePerGas"),Lo(e.gasLimit,"gasLimit"),e.to||"0x",Lo(e.value,"value"),e.data,Bo(e.accessList||[])];return t&&(n.push(Lo(t.yParity,"yParity")),n.push(se(t.r)),n.push(se(t.s))),_(["0x02",go(n)])}(this,n);case 3:return function(e,t,n){const s=[Lo(e.chainId,"chainId"),Lo(e.nonce,"nonce"),Lo(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Lo(e.maxFeePerGas||0,"maxFeePerGas"),Lo(e.gasLimit,"gasLimit"),e.to||hs,Lo(e.value,"value"),e.data,Bo(e.accessList||[]),Lo(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Oo(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(s.push(Lo(t.yParity,"yParity")),s.push(se(t.r)),s.push(se(t.s)),n)?_(["0x03",go([s,n.map((e=>e.data)),n.map((e=>e.commitment)),n.map((e=>e.proof))])]):_(["0x03",go(s)])}(this,n,t?this.blobs:null)}L(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#be(!0,!0)}get unsignedSerialized(){return this.#be(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList,s=null!=this.#me||this.#ge;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&L(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),L(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),L(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const r=[];return null!=this.type?r.push(this.type):t?r.push(2):e?(r.push(1),n||r.push(0)):n?(r.push(1),r.push(2)):(s&&this.to||(r.push(0),r.push(1),r.push(2)),r.push(3)),r.sort(),r}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return So.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new So;if("string"==typeof e){const t=M(e);if(t[0]>=127)return So.from(function(e){const t=po(e);B(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:Io(t[0],"nonce"),gasPrice:No(t[1],"gasPrice"),gasLimit:No(t[2],"gasLimit"),to:Co(t[3]),value:No(t[4],"value"),data:G(t[5]),chainId:yo};if(6===t.length)return n;const s=No(t[6],"v"),r=No(t[7],"r"),a=No(t[8],"s");if(r===yo&&a===yo)n.chainId=s;else{let e=(s-Eo)/wo;e<yo&&(e=yo),n.chainId=e,B(e!==yo||s===bo||s===Ao,"non-canonical legacy v","v",t[6]),n.signature=ai.from({r:V(t[7],32),s:V(t[8],32),v:s})}return n}(t));switch(t[0]){case 1:return So.from(function(e){const t=po(M(e).slice(1));B(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",G(e));const n={type:1,chainId:No(t[0],"chainId"),nonce:Io(t[1],"nonce"),gasPrice:No(t[2],"gasPrice"),gasLimit:No(t[3],"gasLimit"),to:Co(t[4]),value:No(t[5],"value"),data:G(t[6]),accessList:xo(t[7],"accessList")};return 8===t.length||Po(n,t.slice(8)),n}(t));case 2:return So.from(function(e){const t=po(M(e).slice(1));B(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",G(e));const n={type:2,chainId:No(t[0],"chainId"),nonce:Io(t[1],"nonce"),maxPriorityFeePerGas:No(t[2],"maxPriorityFeePerGas"),maxFeePerGas:No(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:No(t[4],"gasLimit"),to:Co(t[5]),value:No(t[6],"value"),data:G(t[7]),accessList:xo(t[8],"accessList")};return 9===t.length||Po(n,t.slice(9)),n}(t));case 3:return So.from(function(e){let t=po(M(e).slice(1)),n="3",s=null;if(4===t.length&&Array.isArray(t[0])){n="3 (network format)";const e=t[1],r=t[2],a=t[3];B(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),B(Array.isArray(r),"invalid network format: commitments not an array","fields[2]",r),B(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),B(e.length===r.length,"invalid network format: blobs/commitments length mismatch","fields",t),B(e.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),s=[];for(let n=0;n<t[1].length;n++)s.push({data:e[n],commitment:r[n],proof:a[n]});t=t[0]}B(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${n}`,"data",G(e));const r={type:3,chainId:No(t[0],"chainId"),nonce:Io(t[1],"nonce"),maxPriorityFeePerGas:No(t[2],"maxPriorityFeePerGas"),maxFeePerGas:No(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:No(t[4],"gasLimit"),to:Co(t[5]),value:No(t[6],"value"),data:G(t[7]),accessList:xo(t[8],"accessList"),maxFeePerBlobGas:No(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};s&&(r.blobs=s),B(null!=r.to,`invalid address for transaction type: ${n}`,"data",e),B(Array.isArray(r.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<r.blobVersionedHashes.length;t++)B(U(r.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||Po(r,t.slice(11)),r}(t))}L(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new So;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=ai.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&(B(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),B(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(B(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),B(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}const Ro="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Mo=BigInt(58);function Do(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):B(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class Uo{name;constructor(e){v(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const Fo=new RegExp("^(ipfs)://(.*)$","i"),Ho=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Fo,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class Go{provider;address;name;#Ae;#Ee;constructor(e,t,n){v(this,{provider:e,address:t,name:n}),this.#Ae=null,this.#Ee=new ir(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#Ae&&(this.#Ae=(async()=>{try{return await this.#Ee.supportsInterface("0x9061b923")}catch(e){if(x(e,"CALL_EXCEPTION"))return!1;throw this.#Ae=null,e}})()),await this.#Ae}async#ke(e,t){t=(t||[]).slice();const n=this.#Ee.interface;t.unshift(va(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(e),L(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[Ca(this.name,255),n.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const r=await this.#Ee[e](...t);return s?n.decodeFunctionResult(s,r)[0]:r}catch(e){if(!x(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await this.#ke("addr(bytes32)");return null==e||e===hs?null:e}catch(e){if(x(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<2147483648){let t=e+2147483648;const n=await this.#ke("addr(bytes32,uint)",[t]);if(U(n,20))return ot(n)}let t=null;for(const n of this.provider.plugins)if(n instanceof Uo&&n.supportsCoinType(e)){t=n;break}if(null==t)return null;const n=await this.#ke("addr(bytes32,uint)",[e]);if(null==n||"0x"===n)return null;const s=await t.decodeAddress(e,n);if(null!=s)return s;L(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await this.#ke("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await this.#ke("contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",n=parseInt(t[4],16);if(t[5].length===2*n)return`${e}://${function(e){const t=M(e);let n=ee(t),s="";for(;n;)s=Ro[Number(n%Mo)]+s,n/=Mo;for(let e=0;e<t.length&&!t[e];e++)s=Ro[0]+s;return s}("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return`bzz://${n[1]}`;L(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<Ho.length;n++){const s=t.match(Ho[n]);if(null==s)continue;const r=s[1].toLowerCase();switch(r){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const n=Do(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:n}),{linkage:e,url:n}}case"erc721":case"erc1155":{const n="erc721"===r?"tokenURI(uint256)":"uri(uint256)";e.push({type:r,value:t});const a=await this.getAddress();if(null==a)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const i=(s[2]||"").split("/");if(2!==i.length)return e.push({type:`!${r}caip`,value:s[2]||""}),{url:null,linkage:e};const o=i[1],l=new ir(i[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===r){const t=await l.ownerOf(o);if(a!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===r){const t=await l.balanceOf(a,o);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let c=await l[n](o);if(null==c||"0x"===c)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:c}),"erc1155"===r&&(c=c.replace("{id}",ne(o,32).substring(2)),e.push({type:"metadata-url-expanded",value:c})),c.match(/^ipfs:/i)&&(c=Do(c)),e.push({type:"metadata-url",value:c});let u={};const d=await new us(c).send();d.assertOk();try{u=d.bodyJson}catch(t){try{e.push({type:"!metadata",value:d.bodyText})}catch(t){const n=d.body;return n&&e.push({type:"!metadata",value:G(n)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!u)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(u)});let p=u.image;if("string"!=typeof p)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(p.match(/^(https:\/\/|data:)/i));else{if(null==p.match(Fo))return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=Do(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return L(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async#Te(e,t){const n=await Go.getEnsAddress(e);try{const s=new ir(n,["function resolver(bytes32) view returns (address)"],e),r=await s.resolver(va(t),{enableCcipRead:!0});return r===hs?null:r}catch(e){throw e}return null}static async fromName(e,t){let n=t;for(;;){if(""===n||"."===n)return null;if("eth"!==t&&"eth"===n)return null;const s=await Go.#Te(e,n);if(null!=s){const r=new Go(e,s,t);return n===t||await r.supportsWildcard()?r:null}n=n.split(".").slice(1).join(".")}}}const _o=BigInt(0);function Qo(e,t){return function(n){return null==n?t:e(n)}}function zo(e,t){return n=>{if(t&&null==n)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map((t=>e(t)))}}function jo(e,t){return n=>{const s={};for(const r in e){let a=r;if(t&&r in t&&!(a in n))for(const e of t[r])if(e in n){a=e;break}try{const t=e[r](n[a]);void 0!==t&&(s[r]=t)}catch(e){L(!1,`invalid value for value.${r} (${e instanceof Error?e.message:"not-an-error"})`,"BAD_DATA",{value:n})}}return s}}function Vo(e){return B(U(e,!0),"invalid data","value",e),e}function Jo(e){return B(U(e,32),"invalid hash","value",e),e}const Ko=jo({address:ot,blockHash:Jo,blockNumber:te,data:Vo,index:te,removed:Qo((function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}B(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}),!1),topics:zo(Jo),transactionHash:Jo,transactionIndex:te},{index:["logIndex"]}),qo=jo({hash:Qo(Jo),parentHash:Jo,parentBeaconBlockRoot:Qo(Jo,null),number:te,timestamp:te,nonce:Qo(Vo),difficulty:W,gasLimit:W,gasUsed:W,stateRoot:Qo(Jo,null),receiptsRoot:Qo(Jo,null),blobGasUsed:Qo(W,null),excessBlobGas:Qo(W,null),miner:Qo(ot),prevRandao:Qo(Jo,null),extraData:Vo,baseFeePerGas:Qo(W)},{prevRandao:["mixHash"]}),Zo=jo({transactionIndex:te,blockNumber:te,transactionHash:Jo,address:ot,topics:zo(Jo),data:Vo,index:te,blockHash:Jo},{index:["logIndex"]}),Yo=jo({to:Qo(ot,null),from:Qo(ot,null),contractAddress:Qo(ot,null),index:te,root:Qo(G),gasUsed:W,blobGasUsed:Qo(W,null),logsBloom:Qo(Vo),blockHash:Jo,hash:Jo,logs:zo((function(e){return Zo(e)})),blockNumber:te,cumulativeGasUsed:W,effectiveGasPrice:Qo(W),blobGasPrice:Qo(W,null),status:Qo(te),type:Qo(te,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Wo(e){e.to&&W(e.to)===_o&&(e.to="0x0000000000000000000000000000000000000000");const t=jo({hash:Jo,index:Qo(te,void 0),type:e=>"0x"===e||null==e?0:te(e),accessList:Qo(Xn,null),blobVersionedHashes:Qo(zo(Jo,!0),null),blockHash:Qo(Jo,null),blockNumber:Qo(te,null),transactionIndex:Qo(te,null),from:ot,gasPrice:Qo(W),maxPriorityFeePerGas:Qo(W),maxFeePerGas:Qo(W),maxFeePerBlobGas:Qo(W,null),gasLimit:W,to:Qo(ot,null),value:W,nonce:te,data:Vo,creates:Qo(ot,null),chainId:Qo(W,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){const t=ot(e.from);let n=W(e.nonce,"tx.nonce").toString(16);return n="0"===n?"0x":n.length%2?"0x0"+n:"0x"+n,ot(z(et(go([t,n])),12))}(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=ai.from(e.signature):t.signature=ai.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&W(t.blockHash)===_o&&(t.blockHash=null),t}class Xo{name;constructor(e){v(this,{name:e})}clone(){return new Xo(this.name)}}class $o extends Xo{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const n={effectiveBlock:e};function s(e,s){let r=(t||{})[e];null==r&&(r=s),B("number"==typeof r,`invalud value for ${e}`,"costs",t),n[e]=r}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),v(this,n)}clone(){return new $o(this.effectiveBlock,this)}}class el extends Xo{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),v(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new el(this.address,this.targetNetwork)}}class tl extends Xo{#x;#ve;get url(){return this.#x}get processFunc(){return this.#ve}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#x=e,this.#ve=t}clone(){return this}}const nl=new Map;class sl{#Ce;#pe;#xe;constructor(e,t){this.#Ce=e,this.#pe=W(t),this.#xe=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#Ce}set name(e){this.#Ce=e}get chainId(){return this.#pe}set chainId(e){this.#pe=W(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===W(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===W(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===W(e.chainId)}catch(e){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(this.#xe.values())}attachPlugin(e){if(this.#xe.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#xe.set(e.name,e.clone()),this}getPlugin(e){return this.#xe.get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const e=new sl(this.name,this.chainId);return this.plugins.forEach((t=>{e.attachPlugin(t.clone())})),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new $o;let n=t.txBase;if(null==e.to&&(n+=t.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)"00"===e.data.substring(s,s+2)?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const s=Xn(e.accessList);for(const e in s)n+=t.txAccessListAddress+t.txAccessListStorageKey*s[e].storageKeys.length}return n}static from(e){if(function(){function e(e,t,n){const s=function(){const s=new sl(e,t);return null!=n.ensNetwork&&s.attachPlugin(new el(null,n.ensNetwork)),s.attachPlugin(new $o),(n.plugins||[]).forEach((e=>{s.attachPlugin(e)})),s};sl.register(e,s),sl.register(t,s),n.altNames&&n.altNames.forEach((e=>{sl.register(e,s)}))}il||(il=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[al("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[al("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1}))}(),null==e)return sl.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){const t=nl.get(e);if(t)return t();if("bigint"==typeof e)return new sl("unknown",e);B(!1,"unknown network","network",e)}if("function"==typeof e.clone)return e.clone();if("object"==typeof e){B("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);const t=new sl(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new el(e.ensAddress,e.ensNetwork)),t}B(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));const n=nl.get(e);n&&B(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),nl.set(e,t)}}function rl(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${e}`);const s=n.split(".");if(1===s.length&&s.push(""),2!==s.length)throw new Error(`invalid gwei value: ${e}`);for(;s[1].length<t;)s[1]+="0";if(s[1].length>9){let e=BigInt(s[1].substring(0,9));s[1].substring(9).match(/^0+$/)||e++,s[1]=e.toString()}return BigInt(s[0]+s[1])}function al(e){return new tl(e,(async(e,t,n)=>{let s;n.setHeader("User-Agent","ethers");try{const[t,r]=await Promise.all([n.send(),e()]);s=t;const a=s.bodyJson.standard;return{gasPrice:r.gasPrice,maxFeePerGas:rl(a.maxFee,9),maxPriorityFeePerGas:rl(a.maxPriorityFee,9)}}catch(e){L(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:e})}}))}let il=!1;function ol(e){return JSON.parse(JSON.stringify(e))}class ll{#Ie;#Ne;#Le;#Be;constructor(e){this.#Ie=e,this.#Ne=null,this.#Le=4e3,this.#Be=-2}get pollingInterval(){return this.#Le}set pollingInterval(e){this.#Le=e}async#Oe(){try{const e=await this.#Ie.getBlockNumber();if(-2===this.#Be)return void(this.#Be=e);if(e!==this.#Be){for(let t=this.#Be+1;t<=e;t++){if(null==this.#Ne)return;await this.#Ie.emit("block",t)}this.#Be=e}}catch(e){}null!=this.#Ne&&(this.#Ne=this.#Ie._setTimeout(this.#Oe.bind(this),this.#Le))}start(){this.#Ne||(this.#Ne=this.#Ie._setTimeout(this.#Oe.bind(this),this.#Le),this.#Oe())}stop(){this.#Ne&&(this.#Ie._clearTimeout(this.#Ne),this.#Ne=null)}pause(e){this.stop(),e&&(this.#Be=-2)}resume(){this.start()}}class cl{#Ie;#Oe;#Pe;constructor(e){this.#Ie=e,this.#Pe=!1,this.#Oe=e=>{this._poll(e,this.#Ie)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){this.#Pe||(this.#Pe=!0,this.#Oe(-2),this.#Ie.on("block",this.#Oe))}stop(){this.#Pe&&(this.#Pe=!1,this.#Ie.off("block",this.#Oe))}pause(e){this.stop()}resume(){this.start()}}class ul extends cl{#Se;#Re;constructor(e,t){super(e),this.#Se=t,this.#Re=-2}pause(e){e&&(this.#Re=-2),super.pause(e)}async _poll(e,t){const n=await t.getBlock(this.#Se);null!=n&&(-2===this.#Re?this.#Re=n.number:n.number>this.#Re&&(t.emit(this.#Se,n.number),this.#Re=n.number))}}class dl extends cl{#X;constructor(e,t){super(e),this.#X=ol(t)}async _poll(e,t){throw new Error("@TODO")}}class pl extends cl{#Me;constructor(e,t){super(e),this.#Me=t}async _poll(e,t){const n=await t.getTransactionReceipt(this.#Me);n&&t.emit(this.#Me,n)}}class hl{#Ie;#X;#Ne;#Pe;#Be;constructor(e,t){this.#Ie=e,this.#X=ol(t),this.#Ne=this.#Oe.bind(this),this.#Pe=!1,this.#Be=-2}async#Oe(e){if(-2===this.#Be)return;const t=ol(this.#X);t.fromBlock=this.#Be+1,t.toBlock=e;const n=await this.#Ie.getLogs(t);if(0!==n.length)for(const e of n)this.#Ie.emit(this.#X,e),this.#Be=e.blockNumber;else this.#Be<e-60&&(this.#Be=e-60)}start(){this.#Pe||(this.#Pe=!0,-2===this.#Be&&this.#Ie.getBlockNumber().then((e=>{this.#Be=e})),this.#Ie.on("block",this.#Ne))}stop(){this.#Pe&&(this.#Pe=!1,this.#Ie.off("block",this.#Ne))}pause(e){this.stop(),e&&(this.#Be=-2)}resume(){this.start()}}const fl=BigInt(2);function ml(e){return e&&"function"==typeof e.then}function gl(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce(((e,n)=>(e[n]=t[n],e)),{})}return t}))}class yl{name;constructor(e){v(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function wl(e){return(e=Array.from(new Set(e).values())).sort(),e}async function bl(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(U(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:gl("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:gl("orphan",t),filter:(n=t,JSON.parse(JSON.stringify(n)))}}var n;if(e.address||e.topics){const n=e,s={topics:(n.topics||[]).map((e=>null==e?null:Array.isArray(e)?wl(e.map((e=>e.toLowerCase()))):e.toLowerCase()))};if(n.address){const e=[],r=[],a=n=>{U(n)?e.push(n):r.push((async()=>{e.push(await Mn(n,t))})())};Array.isArray(n.address)?n.address.forEach(a):a(n.address),r.length&&await Promise.all(r),s.address=wl(e.map((e=>e.toLowerCase())))}return{filter:s,tag:gl("event",s),type:"event"}}B(!1,"unknown ProviderEvent","event",e)}function Al(){return(new Date).getTime()}const El={cacheTimeout:250,pollingInterval:4e3};class kl{#De;#xe;#Ue;#Fe;#He;#Ge;#_e;#Qe;#ze;#je;#Ve;#u;constructor(e,t){if(this.#u=Object.assign({},El,t||{}),"any"===e)this.#Ge=!0,this.#He=null;else if(e){const t=sl.from(e);this.#Ge=!1,this.#He=Promise.resolve(t),setTimeout((()=>{this.emit("network",t,null)}),0)}else this.#Ge=!1,this.#He=null;this.#Qe=-1,this.#_e=new Map,this.#De=new Map,this.#xe=new Map,this.#Ue=null,this.#Fe=!1,this.#ze=1,this.#je=new Map,this.#Ve=!1}get pollingInterval(){return this.#u.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#xe.values())}attachPlugin(e){if(this.#xe.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#xe.set(e.name,e.connect(this)),this}getPlugin(e){return this.#xe.get(e)||null}get disableCcipRead(){return this.#Ve}set disableCcipRead(e){this.#Ve=!!e}async#Je(e){const t=this.#u.cacheTimeout;if(t<0)return await this._perform(e);const n=gl(e.method,e);let s=this.#_e.get(n);return s||(s=this._perform(e),this.#_e.set(n,s),setTimeout((()=>{this.#_e.get(n)===s&&this.#_e.delete(n)}),t)),await s}async ccipReadFetch(e,t,n){if(this.disableCcipRead||0===n.length||null==e.to)return null;const s=e.to.toLowerCase(),r=t.toLowerCase(),a=[];for(let t=0;t<n.length;t++){const i=n[t],o=i.replace("{sender}",s).replace("{data}",r),l=new us(o);-1===i.indexOf("{data}")&&(l.body={data:r,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:t,urls:n});let c="unknown error";const u=await l.send();try{const e=u.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:e}),e.data;e.message&&(c=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:e})}catch(e){}L(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${c}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:i,errorMessage:c}}),a.push(c)}L(!1,`error encountered during CCIP fetch: ${a.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:a}})}_wrapBlock(e,t){return new xs(function(e){const t=qo(e);return t.transactions=e.transactions.map((e=>"string"==typeof e?e:Wo(e))),t}(e),this)}_wrapLog(e,t){return new Is(function(e){return Ko(e)}(e),this)}_wrapTransactionReceipt(e,t){return new Ns(function(e){return Yo(e)}(e),this)}_wrapTransactionResponse(e,t){return new Ls(Wo(e),this)}_detectNetwork(){L(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){L(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=te(await this.#Je({method:"getBlockNumber"}),"%response");return this.#Qe>=0&&(this.#Qe=e),e}_getAddress(e){return Mn(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return U(e)?U(e,32)?e:re(e):("bigint"==typeof e&&(e=te(e,"blockTag")),"number"==typeof e?e>=0?re(e):this.#Qe>=0?re(this.#Qe+e):this.getBlockNumber().then((t=>re(t+e))):void B(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map((e=>null==e?null:Array.isArray(e)?wl(e.map((e=>e.toLowerCase()))):e.toLowerCase())),n="blockHash"in e?e.blockHash:void 0,s=(e,s,r)=>{let a;switch(e.length){case 0:break;case 1:a=e[0];break;default:e.sort(),a=e}if(n&&(null!=s||null!=r))throw new Error("invalid filter");const i={};return a&&(i.address=a),t.length&&(i.topics=t),s&&(i.fromBlock=s),r&&(i.toBlock=r),n&&(i.blockHash=n),i};let r,a,i=[];if(e.address)if(Array.isArray(e.address))for(const t of e.address)i.push(this._getAddress(t));else i.push(this._getAddress(e.address));return"fromBlock"in e&&(r=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter((e=>"string"!=typeof e)).length||null!=r&&"string"!=typeof r||null!=a&&"string"!=typeof a?Promise.all([Promise.all(i),r,a]).then((e=>s(e[0],e[1],e[2]))):s(i,r,a)}_getTransactionRequest(e){const t=Cs(e),n=[];if(["to","from"].forEach((e=>{if(null==t[e])return;const s=Mn(t[e],this);ml(s)?n.push(async function(){t[e]=await s}()):t[e]=s})),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);ml(e)?n.push(async function(){t.blockTag=await e}()):t.blockTag=e}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(null==this.#He){const e=(async()=>{try{const e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw this.#He===e&&(this.#He=null),t}})();return this.#He=e,(await e).clone()}const e=this.#He,[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(this.#Ge?(this.emit("network",n,t),this.#He===e&&(this.#He=Promise.resolve(n))):L(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:n,priorityFee:s}=await T({_block:this.#Ke("latest",!1),gasPrice:(async()=>{try{return W(await this.#Je({method:"getGasPrice"}),"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{return W(await this.#Je({method:"getPriorityFee"}),"%response")}catch(e){}return null})()});let r=null,a=null;const i=this._wrapBlock(t,e);return i&&i.baseFeePerGas&&(a=null!=s?s:BigInt("1000000000"),r=i.baseFeePerGas*fl+a),new vs(n,r,a)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const e=new us(n.url),s=await n.processFunc(t,this,e);return new vs(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return ml(t)&&(t=await t),W(await this.#Je({method:"estimateGas",transaction:t}),"%response")}async#qe(e,t,n){L(n<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const s=Cs(e);try{return G(await this._perform({method:"call",transaction:s,blockTag:t}))}catch(e){if(!this.disableCcipRead&&I(e)&&e.data&&n>=0&&"latest"===t&&null!=s.to&&"0x556f1830"===z(e.data,0,4)){const r=e.data,a=await Mn(s.to,this);let i;try{i=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};L(Q(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=z(e,0,32);L(z(n,0,12)===z(Ll,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=z(n,12);try{const n=[],s=te(z(e,32,64)),r=te(z(e,s,s+32)),a=z(e,s+32);for(let e=0;e<r;e++){const t=Tl(a,32*e);if(null==t)throw new Error("abort");n.push(t)}t.urls=n}catch(e){L(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=vl(e,64);if(null==n)throw new Error("abort");t.calldata=n}catch(e){L(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}L(z(e,100,128)===z(Ll,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=z(e,96,100);try{const n=vl(e,128);if(null==n)throw new Error("abort");t.extraData=n}catch(e){L(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e])),t}(z(e.data,4))}catch(e){L(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:r}})}L(i.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:r,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:i.errorArgs}});const o=await this.ccipReadFetch(s,i.calldata,i.urls);L(null!=o,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:e.data,errorArgs:i.errorArgs}});const l={to:a,data:_([i.selector,Nl([o,i.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{const e=await this.#qe(l,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:e}),e}}throw e}}async#Ze(e){const{value:t}=await T({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:n}=await T({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#Ze(this.#qe(t,n,e.enableCcipRead?0:-1))}async#Ye(e,t,n){let s=this._getAddress(t),r=this._getBlockTag(n);return"string"==typeof s&&"string"==typeof r||([s,r]=await Promise.all([s,r])),await this.#Ze(this.#Je(Object.assign(e,{address:s,blockTag:r})))}async getBalance(e,t){return W(await this.#Ye({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return te(await this.#Ye({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return G(await this.#Ye({method:"getCode"},e,t))}async getStorage(e,t,n){const s=W(t,"position");return G(await this.#Ye({method:"getStorage",position:s},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:s}=await T({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),r=So.from(e);if(r.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(r,s).replaceableTransaction(t)}async#Ke(e,t){if(U(e,32))return await this.#Je({method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return"string"!=typeof n&&(n=await n),await this.#Je({method:"getBlock",blockTag:n,includeTransactions:t})}async getBlock(e,t){const{network:n,params:s}=await T({network:this.getNetwork(),params:this.#Ke(e,!!t)});return null==s?null:this._wrapBlock(s,n)}async getTransaction(e){const{network:t,params:n}=await T({network:this.getNetwork(),params:this.#Je({method:"getTransaction",hash:e})});return null==n?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await T({network:this.getNetwork(),params:this.#Je({method:"getTransactionReceipt",hash:e})});if(null==n)return null;if(null==n.gasPrice&&null==n.effectiveGasPrice){const t=await this.#Je({method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await T({network:this.getNetwork(),result:this.#Je({method:"getTransactionResult",hash:e})});return null==t?null:G(t)}async getLogs(e){let t=this._getFilter(e);ml(t)&&(t=await t);const{network:n,params:s}=await T({network:this.getNetwork(),params:this.#Je({method:"getLogs",filter:t})});return s.map((e=>this._wrapLog(e,n)))}_getProvider(e){L(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Go.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=va((e=ot(e)).substring(2).toLowerCase()+".addr.reverse");try{const n=await Go.getEnsAddress(this),s=new ir(n,["function resolver(bytes32) view returns (address)"],this),r=await s.resolver(t);if(null==r||r===hs)return null;const a=new ir(r,["function name(bytes32) view returns (string)"],this),i=await a.name(t);return await this.resolveName(i)!==e?null:i}catch(e){if(x(e,"BAD_DATA")&&"0x"===e.value)return null;if(x(e,"CALL_EXCEPTION"))return null;throw e}return null}async waitForTransaction(e,t,n){const s=null!=t?t:1;return 0===s?this.getTransactionReceipt(e):new Promise((async(t,r)=>{let a=null;const i=async n=>{try{const r=await this.getTransactionReceipt(e);if(null!=r&&n-r.blockNumber+1>=s)return t(r),void(a&&(clearTimeout(a),a=null))}catch(e){console.log("EEE",e)}this.once("block",i)};null!=n&&(a=setTimeout((()=>{null!=a&&(a=null,this.off("block",i),r(N("timeout","TIMEOUT",{reason:"timeout"})))}),n)),i(await this.getBlockNumber())}))}async waitForBlock(e){L(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#je.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#je.delete(e))}_setTimeout(e,t){null==t&&(t=0);const n=this.#ze++,s=()=>{this.#je.delete(n),e()};if(this.paused)this.#je.set(n,{timer:null,func:s,time:t});else{const e=setTimeout(s,t);this.#je.set(n,{timer:e,func:s,time:Al()})}return n}_forEachSubscriber(e){for(const t of this.#De.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new yl(e.type);case"block":{const e=new ll(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new ul(this,e.type);case"event":return new hl(this,e.filter);case"transaction":return new pl(this,e.hash);case"orphan":return new dl(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of this.#De.values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),null!=this.#Ue&&t.pause(this.#Ue);break}}async#We(e,t){let n=await bl(e,this);return"event"===n.type&&t&&t.length>0&&!0===t[0].removed&&(n=await bl({orphan:"drop-log",log:t[0]},this)),this.#De.get(n.tag)||null}async#Xe(e){const t=await bl(e,this),n=t.tag;let s=this.#De.get(n);return s||(s={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#De.set(n,s)),s}async on(e,t){const n=await this.#Xe(e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#Ue&&n.subscriber.pause(this.#Ue)),this}async once(e,t){const n=await this.#Xe(e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#Ue&&n.subscriber.pause(this.#Ue)),this}async emit(e,...t){const n=await this.#We(e,t);if(!n||0===n.listeners.length)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter((({listener:n,once:s})=>{const r=new Ps(this,s?null:n,e);try{n.call(this,...t,r)}catch(e){}return!s})),0===n.listeners.length&&(n.started&&n.subscriber.stop(),this.#De.delete(n.tag)),s>0}async listenerCount(e){if(e){const t=await this.#We(e);return t?t.listeners.length:0}let t=0;for(const{listeners:e}of this.#De.values())t+=e.length;return t}async listeners(e){if(e){const t=await this.#We(e);return t?t.listeners.map((({listener:e})=>e)):[]}let t=[];for(const{listeners:e}of this.#De.values())t=t.concat(e.map((({listener:e})=>e)));return t}async off(e,t){const n=await this.#We(e);if(!n)return this;if(t){const e=n.listeners.map((({listener:e})=>e)).indexOf(t);e>=0&&n.listeners.splice(e,1)}return t&&0!==n.listeners.length||(n.started&&n.subscriber.stop(),this.#De.delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:s}=await this.#Xe(e);n&&s.stop(),this.#De.delete(t)}else for(const[e,{started:t,subscriber:n}]of this.#De)t&&n.stop(),this.#De.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#Fe}destroy(){this.removeAllListeners();for(const e of this.#je.keys())this._clearTimeout(e);this.#Fe=!0}get paused(){return null!=this.#Ue}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#Qe=-1,null!=this.#Ue){if(this.#Ue==!!e)return;L(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e))),this.#Ue=!!e;for(const e of this.#je.values())e.timer&&clearTimeout(e.timer),e.time=Al()-e.time}resume(){if(null!=this.#Ue){this._forEachSubscriber((e=>e.resume())),this.#Ue=null;for(const e of this.#je.values()){let t=e.time;t<0&&(t=0),e.time=Al(),setTimeout(e.func,t)}}}}function Tl(e,t){try{const n=vl(e,t);if(n)return Ot(n)}catch(e){}return null}function vl(e,t){if("0x"===e)return null;try{const n=te(z(e,t,t+32)),s=te(z(e,n,n+32));return z(e,n+32,n+32+s)}catch(e){}return null}function Cl(e){const t=se(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function xl(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}const Il=new Uint8Array([]);function Nl(e){const t=[];let n=0;for(let s=0;s<e.length;s++)t.push(Il),n+=32;for(let s=0;s<e.length;s++){const r=M(e[s]);t[s]=Cl(n),t.push(Cl(r.length)),t.push(xl(r)),n+=32+32*Math.ceil(r.length/32)}return _(t)}const Ll="0x0000000000000000000000000000000000000000000000000000000000000000";function Bl(e,t){if(e.provider)return e.provider;L(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Ol(e,t){let n=Cs(t);if(null!=n.to&&(n.to=Mn(n.to,e)),null!=n.from){const t=n.from;n.from=Promise.all([e.getAddress(),Mn(t,e)]).then((([e,t])=>(B(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e)))}else n.from=e.getAddress();return await T(n)}class Pl{provider;constructor(e){v(this,{provider:e||null})}async getNonce(e){return Bl(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Ol(this,e)}async populateTransaction(e){const t=Bl(this,"populateTransaction"),n=await Ol(this,e);null==n.nonce&&(n.nonce=await this.getNonce("pending")),null==n.gasLimit&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();null!=n.chainId?B(W(n.chainId)===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId):n.chainId=s.chainId;const r=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas;if(null==n.gasPrice||2!==n.type&&!r?0!==n.type&&1!==n.type||!r||B(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):B(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas)if(0===n.type||1===n.type){const e=await t.getFeeData();L(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==n.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(n.type=2,null!=n.gasPrice){const e=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=e,n.maxPriorityFeePerGas=e}else null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(L(!r,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice),n.type=0):L(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2!==n.type&&3!==n.type||(null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else n.type=2;return await T(n)}async estimateGas(e){return Bl(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Bl(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=Bl(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=Bl(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const s=So.from(n);return await t.broadcastTransaction(await this.signTransaction(s))}}class Sl{#Ie;#$e;#Ne;#Pe;#et;#tt;constructor(e){this.#Ie=e,this.#$e=null,this.#Ne=this.#Oe.bind(this),this.#Pe=!1,this.#et=null,this.#tt=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#Oe(e){try{null==this.#$e&&(this.#$e=this._subscribe(this.#Ie));let e=null;try{e=await this.#$e}catch(e){if(!x(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e)return this.#$e=null,void this.#Ie._recoverSubscriber(this,this._recover(this.#Ie));const t=await this.#Ie.getNetwork();if(this.#et||(this.#et=t),this.#et.chainId!==t.chainId)throw new Error("chaid changed");if(this.#tt)return;const n=await this.#Ie.send("eth_getFilterChanges",[e]);await this._emitResults(this.#Ie,n)}catch(e){console.log("@TODO",e)}this.#Ie.once("block",this.#Ne)}#nt(){const e=this.#$e;e&&(this.#$e=null,e.then((e=>{this.#Ie.destroyed||this.#Ie.send("eth_uninstallFilter",[e])})))}start(){this.#Pe||(this.#Pe=!0,this.#Oe(-2))}stop(){this.#Pe&&(this.#Pe=!1,this.#tt=!0,this.#nt(),this.#Ie.off("block",this.#Ne))}pause(e){e&&this.#nt(),this.#Ie.off("block",this.#Ne)}resume(){this.start()}}class Rl extends Sl{#st;constructor(e,t){var n;super(e),this.#st=(n=t,JSON.parse(JSON.stringify(n)))}_recover(e){return new hl(e,this.#st)}async _subscribe(e){return await e.send("eth_newFilter",[this.#st])}async _emitResults(e,t){for(const n of t)e.emit(this.#st,e._wrapLog(n,e._network))}}class Ml extends Sl{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const Dl="bigint,boolean,function,number,string,symbol".split(/,/g);function Ul(e){if(null==e||Dl.indexOf(typeof e)>=0)return e;if("function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(Ul);if("object"==typeof e)return Object.keys(e).reduce(((t,n)=>(t[n]=e[n],t)),{});throw new Error(`should not happen: ${e} (${typeof e})`)}function Fl(e){return new Promise((t=>{setTimeout(t,e)}))}function Hl(e){return e?e.toLowerCase():e}function Gl(e){return e&&"number"==typeof e.pollingInterval}const _l={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Ql extends Pl{address;constructor(e,t){super(e),v(this,{address:t=ot(t)})}connect(e){L(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=Ul(e),n=[];if(t.from){const s=t.from;n.push((async()=>{const n=await Mn(s,this.provider);B(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n})())}else t.from=this.address;if(null==t.gasLimit&&n.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){const e=t.to;n.push((async()=>{t.to=await Mn(e,this.provider)})())}n.length&&await Promise.all(n);const s=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(e);return await new Promise(((e,s)=>{const r=[1e3,100];let a=0;const i=async()=>{try{const s=await this.provider.getTransaction(n);if(null!=s)return void e(s.replaceableTransaction(t))}catch(e){if(x(e,"CANCELLED")||x(e,"BAD_DATA")||x(e,"NETWORK_ERROR"))return null==e.info&&(e.info={}),e.info.sendTransactionHash=n,void s(e);if(x(e,"INVALID_ARGUMENT")&&(a++,null==e.info&&(e.info={}),e.info.sendTransactionHash=n,a>10))return void s(e);this.provider.emit("error",N("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:e}))}this.provider._setTimeout((()=>{i()}),r.pop()||4e3)};i()}))}async signTransaction(e){const t=Ul(e);if(t.from){const n=await Mn(t.from,this.provider);B(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n}else t.from=this.address;const n=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[n])}async signMessage(e){const t="string"==typeof e?Bt(e):e;return await this.provider.send("personal_sign",[G(t),this.address.toLowerCase()])}async signTypedData(e,t,n){const s=Ul(n),r=await Yn.resolveNames(e,t,s,(async e=>{const t=await Mn(e);return B(null!=t,"TypedData does not support null address","value",e),t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Yn.getPayload(r.domain,t,r.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"==typeof e?Bt(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),G(t)])}}class zl extends kl{#u;#rt;#at;#it;#ot;#et;#lt;#ct(){if(this.#it)return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#it=setTimeout((()=>{this.#it=null;const e=this.#at;for(this.#at=[];e.length;){const t=[e.shift()];for(;e.length&&t.length!==this.#u.batchMaxCount;)if(t.push(e.shift()),JSON.stringify(t.map((e=>e.payload))).length>this.#u.batchMaxSize){e.unshift(t.pop());break}(async()=>{const e=1===t.length?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const n=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:n});for(const{resolve:e,reject:s,payload:r}of t){if(this.destroyed){s(N("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:r.method}));continue}const t=n.filter((e=>e.id===r.id))[0];if(null!=t)"error"in t?s(this.getRpcError(r,t)):e(t.result);else{const e=N("missing response for request","BAD_DATA",{value:n,info:{payload:r}});this.emit("error",e),s(e)}}}catch(e){this.emit("debug",{action:"receiveRpcError",error:e});for(const{reject:n}of t)n(e)}})()}}),e)}constructor(e,t){super(e,t),this.#rt=1,this.#u=Object.assign({},_l,t||{}),this.#at=[],this.#it=null,this.#et=null,this.#lt=null;{let e=null;const t=new Promise((t=>{e=t}));this.#ot={promise:t,resolve:e}}const n=this._getOption("staticNetwork");"boolean"==typeof n?(B(!n||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),n&&null!=e&&(this.#et=sl.from(e))):n&&(B(null==e||n.matches(e),"staticNetwork MUST match network object","options",t),this.#et=n)}_getOption(e){return this.#u[e]}get _network(){return L(this.#et,"network is not available yet","NETWORK_ERROR"),this.#et}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&W(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const n=await this.getFeeData();null==n.maxFeePerGas&&null==n.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(this.#et)return this.#et}return this.#lt?await this.#lt:this.ready?(this.#lt=(async()=>{try{const e=sl.from(W(await this.send("eth_chainId",[])));return this.#lt=null,e}catch(e){throw this.#lt=null,e}})(),await this.#lt):(this.#lt=(async()=>{const e={id:this.#rt++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let t;this.emit("debug",{action:"sendRpcPayload",payload:e});try{t=(await this._send(e))[0],this.#lt=null}catch(e){throw this.#lt=null,this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:t}),"result"in t)return sl.from(W(t.result));throw this.getRpcError(e,t)})(),await this.#lt)}_start(){null!=this.#ot&&null!=this.#ot.resolve&&(this.#ot.resolve(),this.#ot=null,(async()=>{for(;null==this.#et&&!this.destroyed;)try{this.#et=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",N("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await Fl(1e3)}this.#ct()})())}async _waitUntilReady(){if(null!=this.#ot)return await this.#ot.promise}_getSubscriber(e){return"pending"===e.type?new Ml(this):"event"===e.type?this._getOption("polling")?new hl(this,e.filter):new Rl(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new yl("orphan"):super._getSubscriber(e)}get ready(){return null==this.#ot}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((n=>{if(null==e[n])return;let s=n;"gasLimit"===n&&(s="gas"),t[s]=re(W(e[n],`tx.${n}`))})),["from","to","data"].forEach((n=>{null!=e[n]&&(t[n]=G(e[n]))})),e.accessList&&(t.accessList=Xn(e.accessList)),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Hl(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Hl(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Hl(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Hl(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Hl):e.filter.address=Hl(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:n}=e,{error:s}=t;if("eth_estimateGas"===n&&s.message){const t=s.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return N("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:s}})}if("eth_call"===n||"eth_estimateGas"===n){const t=Jl(s),r=Pn.getBuiltinCallException("eth_call"===n?"call":"estimateGas",e.params[0],t?t.data:null);return r.info={error:s,payload:e},r}const r=JSON.stringify(function(e){const t=[];return Kl(e,t),t}(s));if("string"==typeof s.message&&s.message.match(/user denied|ethers-user-denied/i))return N("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:s}});if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){const t=e.params[0];if(r.match(/insufficient funds|base fee exceeds gas limit/i))return N("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:s}});if(r.match(/nonce/i)&&r.match(/too low/i))return N("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:s}});if(r.match(/replacement transaction/i)&&r.match(/underpriced/i))return N("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:s}});if(r.match(/only replay-protected/i))return N("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:t,info:{error:s}}})}let a=!!r.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?N("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:s,payload:e}}):N("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(N("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const n=this.#rt++,s=new Promise(((s,r)=>{this.#at.push({resolve:s,reject:r,payload:{method:e,params:t,id:n,jsonrpc:"2.0"}})}));return this.#ct(),s}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"==typeof e){const n=await t;if(e>=n.length)throw new Error("no such account");return new Ql(this,n[e])}const{accounts:n}=await T({network:this.getNetwork(),accounts:t});e=ot(e);for(const t of n)if(ot(t)===e)return new Ql(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((e=>new Ql(this,e)))}destroy(){this.#it&&(clearTimeout(this.#it),this.#it=null);for(const{payload:e,reject:t}of this.#at)t(N("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#at=[],super.destroy()}}class jl extends zl{#ut;constructor(e,t){super(e,t);let n=this._getOption("pollingInterval");null==n&&(n=_l.pollingInterval),this.#ut=n}_getSubscriber(e){const t=super._getSubscriber(e);return Gl(t)&&(t.pollingInterval=this.#ut),t}get pollingInterval(){return this.#ut}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#ut=e,this._forEachSubscriber((e=>{Gl(e)&&(e.pollingInterval=this.#ut)}))}}class Vl extends jl{#dt;constructor(e,t,n){null==e&&(e="http://localhost:8545"),super(t,n),this.#dt="string"==typeof e?new us(e):e.clone()}_getConnection(){return this.#dt.clone()}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){const t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");const n=await t.send();n.assertOk();let s=n.bodyJson;return Array.isArray(s)||(s=[s]),s}}function Jl(e){if(null==e)return null;if("string"==typeof e.message&&e.message.match(/revert/i)&&U(e.data))return{message:e.message,data:e.data};if("object"==typeof e){for(const t in e){const n=Jl(e[t]);if(n)return n}return null}if("string"==typeof e)try{return Jl(JSON.parse(e))}catch(e){}return null}function Kl(e,t){if(null!=e){if("string"==typeof e.message&&t.push(e.message),"object"==typeof e)for(const n in e)Kl(e[n],t);if("string"==typeof e)try{return Kl(JSON.parse(e),t)}catch(e){}}}const ql=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"delAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"delCreator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"deleteContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"hiddenContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"hiddenCreator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"publicContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"publicCreator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"setAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"typename",type:"string"}],name:"setContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"typename",type:"string"}],name:"setContractInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"typename",type:"string"}],name:"setCreator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"typename",type:"string"}],name:"setCreatorInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"checkUser",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAdmins",outputs:[{internalType:"address[]",name:"",type:"address[]"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllContracts",outputs:[{internalType:"address[]",name:"",type:"address[]"},{internalType:"string[]",name:"",type:"string[]"},{internalType:"string[]",name:"",type:"string[]"},{internalType:"bool[]",name:"",type:"bool[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllCreators",outputs:[{internalType:"address[]",name:"",type:"address[]"},{internalType:"string[]",name:"",type:"string[]"},{internalType:"string[]",name:"",type:"string[]"},{internalType:"bool[]",name:"",type:"bool[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getContract",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Zl=[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burnable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address payable",name:"donateManageAddress",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"INVERSE_BASIS_POINT",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"_creator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"_creatorOnly",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"_lastTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"_owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"_usePoint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"metaUrl",type:"string"},{internalType:"uint256",name:"feeRate",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"metaUrl",type:"string"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"royalties",outputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint16",name:"feeRate",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"usePoint",type:"uint256"}],name:"setConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],Yl=[{inputs:[],name:"InitializationFailed",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"address",name:"implementation",type:"address"},{indexed:!1,internalType:"uint256",name:"chainId",type:"uint256"},{indexed:!1,internalType:"address",name:"tokenContract",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"salt",type:"uint256"}],name:"AccountCreated",type:"event"},{inputs:[{internalType:"address",name:"implementation",type:"address"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"tokenContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salt",type:"uint256"}],name:"account",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"implementation",type:"address"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"tokenContract",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salt",type:"uint256"},{internalType:"bytes",name:"initData",type:"bytes"}],name:"createAccount",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"}],Wl=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"target",type:"address"},{indexed:!0,internalType:"uint256",name:"value",type:"uint256"},{indexed:!1,internalType:"bytes",name:"data",type:"bytes"}],name:"TransactionExecuted",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"executeCall",outputs:[{internalType:"bytes",name:"result",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"hash",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{internalType:"bytes4",name:"magicValue",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"nonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],Xl=async e=>{const t=ql,n=new Vl(s),r=new ir(i,t,n);try{if("contracts"==e){const e=await r.getAllContracts().then((e=>e));return ec(e)}if("creators"==e){const e=await r.getAllCreators().then((e=>e));return ec(e)}if("admins"==e){const e=await r.getAdmins().then((e=>e));return $l(e)}}catch(e){console.dir(e)}},$l=e=>{let t=[];for(const n in e[0])t.push([e[0][n]]);return t},ec=e=>{let t=[];for(const n in e[0])t.push([e[0][n],e[1][n],e[2][n],e[3][n]]);return t},tc=Xl,nc=async e=>(await Xl("contracts")).filter((function(t){return t[2]==e}))[0][0],sc=Zl,rc=new Vl(s),ac=async(e,t,n)=>{const s=new ir(t,sc,rc);try{if("getInfo"==e)return await s.getInfo().then((e=>e));if("name"==e)return await s.name().then((e=>e));if("symbol"==e)return await s.symbol().then((e=>e));if("creatorOnly"==e)return await s._creatorOnly().then((e=>e));if("owner"==e)return await s._owner().then((e=>e));if("creator"==e)return await s._creator().then((e=>e));if("tokenAmount"==e)return await s._lastTokenId().then((e=>e));if("unlockPrice"==e)return await s._unlockPrice().then((e=>parseInt(e)/1e18));if("ownerOf"==e)return await s.ownerOf(n).then((e=>e));if("tokenURI"==e)return console.log("get Token URI"+t+":"+n),await s.tokenURI(n).then((e=>e));if("balanceOf"==e)return await s.balanceOf(n).then((e=>e));if("supportInterface"==e)return await s.supportInterface().then((e=>e));if("_locked"==e)return await s._locked(n).then((e=>e))}catch(n){console.error("can't get tokenInfo"+t+":"+e)}},ic=async e=>{const t=new ir(e,sc,rc);try{return await t._usePoint().then((e=>parseInt(e)/1e18))}catch(e){console.dir(e)}},oc=async(e,t,n)=>{const s=new ir(e,sc,rc);try{return await s.tokenOfOwnerByIndex(t,n).then((e=>e))}catch(e){console.dir(e)}},lc={getToken:ac,getTokenInfo:async e=>{try{return{ca:e,name:await ac("name",e),creator:await ac("creator",e),owner:await ac("owner",e),creatorOnly:await ac("creatorOnly",e),needPoint:await ic(e)}}catch(e){console.dir(e)}},getCallData:async(e,t,n)=>new ir(e,sc,rc).interface.encodeFunctionData(t,n),hasTokenList:async e=>{console.log("hasTokenList:"+e);let t=[];const n=await tc("contracts");for(const s of n)if("nft"==s[2]){const n=s[0];for(let s=await ac("balanceOf",n,e);s>0;s--){const r=await oc(n,e,Number(s)-1),a=await ac("name",n),i=await ac("tokenURI",n,r);t.push({ca:n,tokenId:r,name:a,tokenUri:i})}}return t}};class cc extends jl{#H;constructor(e,t){B(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,{batchMaxCount:1}),this.#H=async(t,n)=>{const s={method:t,params:n};this.emit("debug",{action:"sendEip1193Request",payload:s});try{const t=await e.request(s);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(e){const t=new Error(e.message);throw t.code=e.code,t.data=e.data,t.payload=s,this.emit("debug",{action:"receiveEip1193Error",error:t}),t}}}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){B(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#H(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter((t=>t.toLowerCase()===e)).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#H("eth_requestAccounts",[])}catch(e){const t=e.payload;throw this.getRpcError(t,{id:t.id,error:e})}return await super.getSigner(e)}}const uc={en:{common:"about BizenDAO",creator:"BizenDAO Creators",document:"document",operating_member:"BizenDAO operating member",official_link:"Official Links（How to use)",promotion_activities:"Promotion Activities",metaberse:" Metaverse",learn_more:"Learn More",HOME:"home",CREATORS:"creators",TOKENS:"tokens",COTENTS:"contents",ACCOUNT:"account",DONATE:"donate",META:"meta",METANAME:"item name",DESCRIPTION:"description",MAINIMAGE:"image file url（.jpeg or .png）",MOVURL:"3D data url（.glb)",EXTURL:"external url",ATTRIBUTES:"attributes",LABEL:"trait type",VALUE:"value",JSONLOAD:"JSON LOAD",JSONDOWNLOAD:"JSON DOWNLOAD",OPENVAULT:"open value",PICTTOOL:"img resize",PERMAWEB:"permaweb",JSONSAMPLE:"sample JSON",SUBDONATE:"SUBSTITUTE DONATION",DONATEPRICE:"DONATE PRICE",CASHBACK:"CASHBACK",DONOR:"DONOR",SUBDONAHIST:"substitute donation history",SELECTMES:"SELECT NFT",COPYED:" has been copied to the clipboard",COPYFAILED:"Copy failed",DONATEMESSAGE:"BizenDAO registered artists can donate on behalf of buyers here.<br /> You can also get cash back on gas costs.",SENDTOEOA:"Send this NFT to EOA",SENDNFTBEF:"Do you really want to send this NFT to ",SENDNFTAFT:"？",BURNNFT:"Do you really want to burn this NFT?",BURNED:"NFT Burned",BURN_STOP:"Burn transaction has aborted.",SENDED:"Sent NFT",CANTSEND:"Cannot send to this EOA",ARE_YOU_BUYER:", Are you the one who purchased this product?　",REQUIRE_META_URL:"*Please specify the URL where the metadata is stored.",TRYING_TO_MINT:"Bizen DAO SBT is a contract that is tied to the soul of the work, so if a completely unrelated SBT is created, it may be deleted by the Admin.\nPlease note that these rules are intended to prevent mischief and abuse.",REQUIRE_DBIZ:"require D-BIZ",INVALID_TOKENURI:" is an invalid tokenURI",CREATOR_ONLY:"This NFT MINT is limited to the artist",NOT_ENOUGH_DBIZ:"You don't have enough D-BIZ to mint.",NOT_ENOUGH:" is not enough",MES1:"Please enter your donation amount",MES2:"Failed to get current price. Please wait for a while.",MES3:"Cashback amount is too large",MES4:" : Are you sure you want to send it?",MES5:" sent",ARE_YOU_TBA:"Do you really want to issue a TBA?",TBA_MAKE:"Issue TZA to this NFT.",MINT_THE_TOKENURI:"mint the NFT using the specified tokenURI.",MINT_TX_SEND:"MINT transaction has been issued.",MINT_TX_STOP:"MINT transaction was aborted.",WAIT_MINT_TX:"Please wait while the transaction completes",MEMBER_SBT_EXIST:"Membership card SBT cannot be issued. It may have already been issued.",MEMBER_NOT_PARMITTED:"Membership card SBT cannot be issued. It may not be allowed.",TBA_ISSUE_SUCCESS:"Issued TBA issue transaction",TBA_ISSUE_ABORT:"TBA issue transaction aborted",POINT_NOT_EXIST:"D-BIZ of 1point or more is required to issue a member SBT"},ja:{common:"BIZENDAOとは",creator:"陶芸家一覧",document:"各種マニュアル",operating_member:"BizenDAO 運営Member",promotion_activities:"備前焼振興活動",official_link:"Officialリンク（使い方）",metaberse:"Metaverse",learn_more:"備前焼をもっと知ろう",HOME:"ホーム",CREATORS:"作家",TOKENS:"NFT",COTENTS:"記事",ACCOUNT:"ユーザ",DONATE:"寄付",META:"メタデータ",METANAME:"作品タイトル",DESCRIPTION:"概要",MAINIMAGE:"写真データのURL（.jpeg or .png）",MOVURL:"３DのURL（.glb)",EXTURL:"PDFのURL",ATTRIBUTES:"追加情報",LABEL:"小見出し",VALUE:"本文",JSONLOAD:"JSONを読み込む",JSONDOWNLOAD:"JSON DOWNLOAD",OPENVAULT:"ファイル倉庫を開く",PICTTOOL:"画像リサイズ",PERMAWEB:"パーマウェブ",JSONSAMPLE:"JSONサンプル",SUBDONATE:"代理寄付",DONATEPRICE:"寄付額",CASHBACK:"キャッシュバック",DONOR:"寄付者",SUBDONAHIST:"代理寄付履歴",SELECTMES:"選択してください",COPYED:"がクリップボードにコピーされました",COPYFAILED:"コピーに失敗しました",DONATEMESSAGE:"BizenDAO登録作家はこちらで購入者に代わって代理寄付が可能です。<br />またガス代としてキャッシュバックすることができます。",SENDTOEOA:"このNFTをEOA宛に送信します",SENDNFTBEF:"本当にこのNFTを",SENDNFTAFT:"に送信しますか？",BURNNFT:"NFTを完全に削除します。\nこの操作は取り消すことができません。\n本当にこのNFTをBURNしますか？",BURNED:"BURNしました。",BURN_STOP:"BURN操作を中断しました。",SENDED:"送信しました",CANTSEND:"このアドレスには送信できません",ARE_YOU_BUYER:" あなたはこちらの商品の購入者ですか？　",REQUIRE_META_URL:"※ メタデータが格納されているURLを指定してください。",TRYING_TO_MINT:"Bizen DAO SBTは作品の魂に紐付けるためのコントラクトですので、全く関連性のないSBTが作成された場合、Adminによって削除される事があります。\n悪戯と乱用を防ぐ為のルールですので、ご了承の上、ご利用ください。",REQUIRE_DBIZ:"必要なD-BIZ",INVALID_TOKENURI:" は無効なtokenURIです。",CREATOR_ONLY:"このNFTのMINTは作家限定です。",NOT_ENOUGH_DBIZ:"Mintするのに必要なD-BIZが足りません。",NOT_ENOUGH:" が足りません。",MES1:"寄付額を入力してください",MES2:"現在価格の取得に失敗しました。しばらくお待ち下さい。",MES3:"キャッシュバック額が大きすぎます",MES4:"を送信してもよろしいですか？",MES5:"を送信しました。",ARE_YOU_TBA:"本当にTBAを発行しますか？",TBA_MAKE:"このNFTにTBAを発行します。",MINT_THE_TOKENURI:"指定したtokenURIを利用しNFTをMINTします。",MINT_TX_SEND:"MINTのトランザクションを発行しました。",MINT_TX_STOP:"MINTのトランザクションを中断しました。",WAIT_MINT_TX:"トランザクションの実行が完了するまでしばらくお待ちください。",MEMBER_SBT_EXIST:"会員証SBT発行不可 すでに発行済みの可能性があります。",MEMBER_NOT_PARMITTED:"会員証SBT発行権限がありません。",TBA_ISSUE_SUCCESS:"TBA発行トランザクションを発行しました。",TBA_ISSUE_ABORT:"TBA発行を中断しました。",POINT_NOT_EXIST:"メンバーズカード発行には1p以上のD-BIZが必要です。"}},dc=e=>"en"!=A.lang&&"ja"!=A.lang?e:uc[A.lang][e],pc=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"addAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"donor",type:"address"},{internalType:"string",name:"detail",type:"string"}],name:"donate",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"donor",type:"address"},{internalType:"string",name:"detail",type:"string"},{internalType:"uint256",name:"gasCashback",type:"uint256"}],name:"donate",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"removeAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"donor",type:"address"},{internalType:"uint256",name:"usepoint",type:"uint256"}],name:"usePoint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_admins",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"_allTotalDonations",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"_allUsedPoints",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_donationAmounts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_donationDates",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"_donationHistory",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"date",type:"uint256"},{internalType:"string",name:"detail",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_donors",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"_lastDonateId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"_lastUseId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"_owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_senders",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"_substituteDonationHistory",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"donor",type:"address"},{internalType:"uint256",name:"date",type:"uint256"},{internalType:"string",name:"detail",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"_totalDonations",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_useDates",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_useDonors",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"_usedPoints",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"_usePoints",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"getDonationHistory",outputs:[{components:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"date",type:"uint256"},{internalType:"string",name:"detail",type:"string"}],internalType:"struct donateManage.Donation[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"getsubstituteDonationHistory",outputs:[{components:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"donor",type:"address"},{internalType:"uint256",name:"date",type:"uint256"},{internalType:"string",name:"detail",type:"string"}],internalType:"struct donateManage.SubstituteDonation[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isAdmin",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"donor",type:"address"}],name:"latestPoint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"}],hc=async(e,t,n)=>{const r=new Vl(s),a=new ir(t,pc,r);try{if("total"==e){const e=await a.totalSupply().then((e=>e));return qc.waiToEth(Number(e))}if("allTotalUsed"==e){const e=await a._allUsedPoints().then((e=>e));return qc.waiToEth(Number(e))}if("allTotalDonation"==e){const e=await a._allTotalDonations().then((e=>e));return qc.waiToEth(Number(e))}}catch(e){console.dir(e)}},fc=async(e,t,n)=>{const s=new cc(window.ethereum),r=await s.getSigner().then((e=>new ir(t,pc,e))),a=await s.getSigner(),i=await a.getAddress();try{if("donate"==e)return await r.donate(n[0],n[2],n[3],{value:n[1]}).then((e=>e));if("balance"==e){const e=await r.balanceOf(i).then((e=>e));return qc.waiToEth(Number(e))}if("total"==e){const e=await r.totalSupply().then((e=>e));return qc.waiToEth(Number(e))}if("usedpoints"==e){const e=await r._usedPoints(i).then((e=>e));return qc.waiToEth(Number(e))}if("totaldonations"==e){const e=await r._totalDonations(i).then((e=>e));return qc.waiToEth(Number(e))}if("allTotalUsed"==e){const e=await r._allUsedPoints().then((e=>e));return qc.waiToEth(Number(e))}if("allTotalDonation"==e){const e=await r._allTotalDonations().then((e=>e));return qc.waiToEth(Number(e))}if("getDonationHistory"==e)return await r.getDonationHistory(i).then((e=>e));if("getsubstituteDonationHistory"==e)return await r.getsubstituteDonationHistory(i).then((e=>e));"list"==e&&console.log("test")}catch(e){console.dir(e)}},mc=fc,gc={makeElement:(e,t,n,s)=>{const r=document.createElement(e);return n&&(r.id=n),s&&r.classList.add(s),r.innerText=t,r},makeInput:(e,t,n,s,r)=>{const a=document.createElement("input");return a.id=t,a.classList.add(n),a.setAttribute("type",e),a.setAttribute("placeholder",s),r&&a.setAttribute("value",r),a},makeTextarea:(e,t,n,s)=>{const r=document.createElement("textarea");return r.id=e,r.classList.add(t),r.innerText=s,r.placeholder=n,r},makeSelect:(e,t)=>{const n=document.createElement("select");n.id=e,n.classList.add(t);const s=document.createElement("option");return s.value=null,s.innerHTML=dc("SELECTMES"),n.appendChild(s),n},makeFileSelect:(e,t,n,s)=>{const r=document.createElement("div"),a=document.createElement("label"),i=document.createElement("input");return r.classList.add("custom-file-div"),r.classList.add(s),a.setAttribute("for",e),a.classList.add(t),a.classList.add(s),a.textContent=n,i.type="file",i.id=e,i.className="custom-file-input",r.appendChild(a),r.appendChild(i),r},setChild:(e,t,n,s,r)=>{const a=document.createElement(t);return s&&(a.id=s),r&&a.classList.add(r),a.innerText=n,e.appendChild(a),a},br:()=>document.createElement("br")},yc=gc,wc=document.getElementById("mainContents"),bc={getUI:async()=>{const e=A.params,t=document.createElement("div");t.classList.add("metadatabuilder"),wc.appendChild(t);const n=document.createElement("div"),s=document.createElement("div");t.id="meta-section",n.id="meta-disp",s.id="meta-control",t.appendChild(n),t.appendChild(s);const r=document.createElement("H2");r.classList.add("controlLavel"),r.innerHTML="Regist EOA",s.appendChild(r);const a=yc.makeInput("input","nameForm","BaseInput","SECRET");console.log("PARAM SET"+e[3]),a.value=e[3],a.classList.add("w7p"),s.appendChild(a);const i=yc.makeInput("submit","submitID","BaseSubmit","REGIST","REGIST");i.classList.add("w3p"),s.appendChild(i),i.addEventListener("click",(async()=>{const t=await(async(e,t)=>{const n=new cc(window.ethereum),s=await n.getSigner(),r={eoa:await s.getAddress(),discordId:e,secret:t},a=c+"regist";try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return await e.json()}catch(e){console.error("There was a problem with the fetch operation:",e)}})(e[2],a.value);alert("check user result :"+t.message),console.dir(t),t.result&&(window.location.href="/")}))},getUserByEoa:async e=>{const t=c+"member/"+e;try{const e=await fetch(t);return await e.json()}catch(e){console.error("There was a problem with the fetch operation:",e)}}},Ac=bc,Ec=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"addAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"order",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"removeAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"orderNum",type:"uint256"},{internalType:"string",name:"url",type:"string"},{internalType:"string",name:"filename",type:"string"}],name:"setUrl",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"orderNum",type:"uint256"},{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"},{indexed:!1,internalType:"string",name:"url",type:"string"}],name:"OrderPlaced",type:"event"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"admins",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getAssets",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"orderNum",type:"uint256"}],name:"getOrderDetails",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"eoa",type:"address"}],name:"getOrdersByEOA",outputs:[{internalType:"uint256[]",name:"orderNums",type:"uint256[]"},{internalType:"string[]",name:"orderFilenames",type:"string[]"},{internalType:"string[]",name:"orderUrls",type:"string[]"},{internalType:"uint256[]",name:"orderPrices",type:"uint256[]"},{internalType:"uint256[]",name:"orderDates",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isAdmin",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastOrderNum",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],kc={order:async(e,t)=>{const n=new cc(window.ethereum),s=await n.getSigner().then((t=>new ir(e,Ec,t)));try{const e=await s.order({value:t}),n=await e.wait();let r;if(1===n.status){console.log("Order transaction hash:",e.hash);for(let e in n.logs)n.logs[e].args&&(r=n.logs[e].args.orderNum.toString(),console.log("Order serial number:"+r));return r}console.error("Order transaction failed")}catch(e){console.error("Error placing order:",e)}},setUrl:async(e,t,n,s)=>{alert("ファイル管理に登録しますか?: filename:"+s+" url:"+n+"\nファイル管理が不要な場合このトランザクションをキャンセルすることが可能です。\n必ずpermawebURLを記録してください。。");const r=new cc(window.ethereum),a=await r.getSigner().then((t=>new ir(e,Ec,t)));try{const e=await a.setUrl(t,s,n).then((e=>e));return console.log("order selial number:"+e),e}catch(e){console.dir(e)}},getAsset:async e=>{const t=new cc(window.ethereum),n=await t.getSigner().then((t=>new ir(e,Ec,t)));try{const e=await t.getSigner(),s=await e.getAddress(),r=await n.getOrdersByEOA(s),a=Array.from(r[0]),i=Array.from(r[1]),o=Array.from(r[2]),l=Array.from(r[3]),c=Array.from(r[4]);return a.map(((e,t)=>({Num:a[t],Filename:i[t],Url:o[t],Price:l[t],Date:c[t]})))}catch(e){console.dir(e)}}},Tc=kc,vc=(e,t,n)=>{const s=document.createElement(t);s.classList.add(n);var r=document.createElement("img");r.src=e.tokenInfo.image,"https://discord.com/assets/f9bb9c4af2b9c32a2c5ee0014661546d.png"==r.src&&(r.src="https://bizen.sbs/img/alt.jpg"),r.classList.add("walletOwnerIcon"),s.appendChild(r);const a=document.createElement("span");return a.innerHTML='<a href="tokens/'+e.ca+"/"+e.tokenId+'" target="_blank">'+e.caName+" #"+e.tokenId+"</a>",s.appendChild(a),s},Cc=(e,t,n)=>{const s=document.createElement(t);s.classList.add(n);var r=document.createElement("img");r.src=e.Icon,"https://discord.com/assets/f9bb9c4af2b9c32a2c5ee0014661546d.png"==r.src&&(r.src="https://bizen.sbs/img/alt.jpg"),r.classList.add("walletOwnerIcon"),s.appendChild(r);const a=document.createElement("span");a.innerHTML=e.Name,s.appendChild(a);const i=document.createElement("span");i.id=e.DiscordId,i.classList.add("eoaCopy"),i.setAttribute("data-clipboard-text",e.DiscordId);const o=document.createElement("i");return o.classList.add("fa-brands","fa-discord"),i.appendChild(o),s.appendChild(i),i.onclick=()=>{const t=e.DiscordId;navigator.clipboard.writeText(t).then((()=>{alert(`DiscordId: ${t} ${dc("COPYED")}`)})).catch((e=>{console.error(dc("COPYFAILED"),e)}))},s.appendChild(i),s},xc=e=>e.substring(0,6)+"..."+e.substring(e.length-4),Ic={short:xc,link:(e,t)=>{const n=document.createElement("a");return n.href=t,n.textContent=e,n},linkCopy:(e,t)=>{const n=document.createElement("div");n.classList.add("linkCopyElm");const s=document.createElement("span");s.id=e,s.classList.add("linkCopy");const r=document.createElement("i");return r.classList.add("far","fa-copy","fa-fw"),s.appendChild(r),n.appendChild(s),s.onclick=()=>{const n=e;navigator.clipboard.writeText(n).then((()=>{t?alert(t):alert(`${n} ${dc("COPYED")}`)})).catch((e=>{console.error(dc("COPYFAILED"),e)}))},n.appendChild(s),n},eoa:(e,t={link:"",target:"_self",icon:"fa-copy"},n="none")=>{const{link:s,target:r,icon:a}=t,i=document.createElement("span"),o=e.substring(0,6)+"..."+e.substring(e.length-4);if("wallet"==n){const e=document.createElement("i");e.classList.add("fa-solid","fa-wallet"),i.appendChild(e)}if(s){const e=document.createElement("a");e.href=s,e.target=r,e.textContent=o,i.appendChild(e)}else i.textContent=o;const l=document.createElement("span");l.id=e,l.classList.add("eoaCopy"),l.setAttribute("data-clipboard-text",e);const c=document.createElement("i");return"bag"===a?c.classList.add("fa-solid","fa-shopping-bag"):c.classList.add("fa","fa-copy","fa-fw"),l.appendChild(c),i.appendChild(l),l.onclick=()=>{const t=e;navigator.clipboard.writeText(t).then((()=>{alert(`${t} ${dc("COPYED")}`)})).catch((e=>{console.error(dc("COPYFAILED"),e)}))},i.appendChild(l),i},scan:(e,t,n)=>{const s=document.createElement("span");let r=e;e.length>13&&(r=e.substring(0,6)+"..."+e.substring(e.length-4)),s.innerHTML="<span class='"+n+"'>"+t+"</span> "+r+" ";const a=document.createElement("a");a.href="https://polygonscan.com/address/"+e,a.target="_blank";const i=document.createElement("i");return i.classList.add("far","fa-solid","fa-magnifying-glass"),a.appendChild(i),s.appendChild(a),s},dispTbaOwner:e=>vc(e,"div","walletOwnerElement"),dispDiscordUser:e=>Cc(e,"div","walletOwnerElement"),getTbaOwnerSnipet:vc,getDiscordUserSnipet:Cc,labeledElm:(e,t,n=[])=>{const s=document.createElement(e);if(n.length>0){const e=document.createElement("i");e.classList.add("labelIcon");for(let t in n)e.classList.add(n[t]);s.appendChild(e)}const r=document.createElement("span");return r.classList.add("labeledText"),r.innerHTML=t,s.appendChild(r),s},span:e=>{const t=document.createElement("span");return t.innerText=e,t},br:()=>document.createElement("br"),copyAction:e=>{navigator.clipboard.writeText(e).then((()=>{alert(`DiscordId: ${e} ${dc("COPYED")}`)})).catch((e=>{console.error(dc("COPYFAILED"),e)}))},donateDetail:e=>{const t=document.createElement("span"),n=e.split(":");if(1==n.length)t.innerHTML="[ "+n[0]+" ]";else if("SEND TOKEN"==n[0]){const e=document.createElement("a"),s=n[1].split("/");e.href="/tokens/"+n[1],e.target="_brank",e.innerHTML="NFT:"+xc(s[0])+"#"+s[1],t.appendChild(e)}return t}},Nc=Ic,Lc=document.getElementById("connectWallet"),Bc=document.getElementById("modalbase"),Oc=document.getElementById("closemodal"),Pc=document.getElementById("modalcontent");let Sc=!1;const Rc=async e=>{const t=new Vl(s),n=await t.getCode(e);return"0x"!==n&&"0x0"!==n};Oc.addEventListener("click",(async()=>{Fc()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&Fc()}));const Mc=e=>{const t=new Date(1e3*Number(e));return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`},Dc=async(e=[])=>{console.log("getParmawebList data:"+JSON.stringify(e)),Pc.innerHTML="<div class='spinner'></div>loading...";const t=await nc("order"),n=await Tc.getAsset(t);Pc.innerHTML="permaweb assets";const s=document.createElement("span");s.classList.add("litelink"),s.classList.add("reloadLink"),s.id="vaultReload",s.innerHTML="reload",Pc.appendChild(s);const r=document.createElement("div");Pc.appendChild(r);const a=n.reverse();for(const t in a){let n=!0;const s=a[t].Filename;"jsonOnly"==e[0]&&(n=s.includes(".json")),"notJson"==e[0]&&(n=!s.includes(".json")),"upload_waiting"==a[t].Url&&(n=!1),n&&(console.dir(a[t]),r.innerHTML+="<br /><span class='datetime'>"+Mc(a[t].Date)+'</span> <a href="'+a[t].Url+'" target="_blank">'+a[t].Filename+"</a>",Uc(r,"COPYBUTTON_"+t,"COPYBTN",String(a[t].Url)))}document.querySelectorAll(".COPYBTN").forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-clipboard-text");navigator.clipboard.writeText(t).then((function(){alert("URL"+dc("COPYED"))})).catch((function(e){alert(dc("COPYFAILED")+e)}))}))})),document.getElementById("vaultReload").addEventListener("click",(function(t){Dc(e)}))},Uc=(e,t,n,s)=>{const r=document.createElement("span");r.id=t,r.classList.add(n),r.innerHTML="copy",r.classList.add("liteLink"),r.classList.add("copyLink"),r.setAttribute("data-clipboard-text",s);const a=document.createElement("i");r.appendChild(a),a.classList.add("far"),a.classList.add("fa-copy"),a.classList.add("fa-fw"),e.appendChild(r),document.getElementById(t).addEventListener("click",(function(e){console.log(t+":"+s)}))},Fc=async(e="permawebList",t=[])=>{if(console.log(e),Sc)Bc.classList.remove("active"),Sc=!1;else{Bc.classList.add("active"),Sc=!0;const n=await Jc();if("permawebList"==e&&null!=n.balance&&Kc.getParmawebList(t),"replaceValue"==e)return function(e){console.dir(e),Pc.innerHTML="Replace Attrebute";const t=document.createElement("div"),n=yc.makeInput("traittype","traittype","BaseInput","TRAIT TYPE");n.classList.add("w7p"),t.appendChild(n);const s=yc.makeInput("submit","submitID","BaseSubmit","SET","SET");s.classList.add("w3p"),t.appendChild(s);const r=yc.makeTextarea("attrvalue","BaseTextarea","VALUE","");return r.classList.add("wfull"),t.appendChild(r),Pc.appendChild(t),{setAttrForm:n,attrSet:s,setValForm:r}}(t)}},Hc=()=>(new Date).toLocaleTimeString()+"."+(new Date).getMilliseconds(),Gc=async e=>{e=e.replace("ipfs://","https://ipfs.io/ipfs/"),console.log(Hc()+" fetchData:"+e);try{const t=await fetch(e);if(console.dir(t),!t.ok)throw new Error("Network response was not ok");return await t.json()}catch(e){console.error("There was a problem with the fetch operation:",e)}},_c=e=>function(e,t){const n=Math.pow(10,4);return Math.round(e*n)/n}(Number(e)/1e18),Qc=async e=>{if(await nu.checkToken(e)){const t=await nu.checkToken(e),n=await lc.getToken("name",t[1]),s=await lc.getToken("tokenURI",t[1],t[2]),r=await Gc(s);return{eoa:e,ca:t[1],caName:n,tokenId:t[2],tokenUri:s,tokenInfo:r}}{let t="";return t=await Rc(e)?"ca":"eoa",{type:t}}},zc=async e=>{let t="none";const n=await Qc(e),s=await Ac.getUserByEoa(e);return n.tokenUri?(t="tba",console.dir(n)):t=n.type,s.DiscordId&&(t="discordConnect"),{type:t,discordUser:s,tbaInfo:n,eoa:e}},jc=async()=>{const e=await Jc();if(String(e.chainId)!=String(a))Lc.innerHTML="PLEASE CONNECT "+r+" NETWORK ";else if(null!=e.eoa){Lc.innerHTML="";var t=document.createElement("div");t.classList.add("walletOwnerArea"),Lc.appendChild(t),zc(e.eoa).then((e=>{"discordConnect"==e.type&&t.appendChild(Nc.dispDiscordUser(e.discordUser))})),Lc.appendChild(Nc.eoa(e.eoa,{link:"#",target:"",icon:"copy"},"wallet")),Lc.appendChild(Nc.labeledElm("span",String(_c(e.balance)),["fa-solid","fa-coins"])),document.getElementById("accountLink").href="/account/"+e.eoa,e.dpoint>0&&Lc.appendChild(Nc.labeledElm("span",String(e.dpoint),["fa-solid","fa-circle-dollar-to-slot"]))}else Lc.innerHTML="wallet not connected. please connect <a href='https://metamask.io/' target='_blank'>metamask</a>"},Vc=async()=>{try{await jc()}catch(e){console.error("Error handling accountsChanged event:",e)}};async function Jc(){let e,t,n,s,r;if(window.ethereum&&window.ethereum.isMetaMask)try{const i=new cc(window.ethereum),o=await i.getSigner(),c=await i.getNetwork();if(e=String(c.chainId),e==a){t=await o.getAddress(),n=await i.getBalance(t),s=c.name,"unknown"==s&&(s=l);const e=await nc("donate");r=await fc("balance",e,[])}window.ethereum.removeListener("accountsChanged",Vc),window.ethereum.removeListener("chainChanged",Vc),window.ethereum.on("accountsChanged",Vc),window.ethereum.on("chainChanged",Vc)}catch(e){console.info("wallet not connected"),console.error("Error details:",e)}return{chainId:e,eoa:t,balance:n,symbol:s,dpoint:r}}const Kc={isContract:Rc,getMaticPrice:async()=>{const e=new URLSearchParams({ids:"matic-network",vs_currencies:"usd,jpy"});try{const t=await fetch(`https://api.coingecko.com/api/v3/simple/price?${e.toString()}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json(),s=n["matic-network"].usd,r=n["matic-network"].jpy,a=1/s;return console.log(`1ドルは約${a.toFixed(4)} MATICです。`),console.log(`1MATICは約${r.toFixed(4)} JPYです。`),{matic_usd:a.toFixed(4),jpy_matic:r.toFixed(4)}}catch(e){console.error("価格データの取得中にエラーが発生しました:",e)}},getMaticYen:async()=>{const e=new URLSearchParams({ids:"matic-network",vs_currencies:"jpy"});try{const t=await fetch(`https://api.coingecko.com/api/v3/simple/price?${e.toString()}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return 1/(await t.json())["matic-network"].jpy}catch(e){console.error("価格データの取得中にエラーが発生しました:",e)}},containsBrowserName:function(e){var t=navigator.userAgent.toLowerCase();return console.log(t.toLowerCase()),t.includes(e.toLowerCase())},checkMetamask:jc,getLocalTime:Hc,sleep:e=>{if(e<1)return;const t=Date.now();for(;Date.now()-t<e;);},fetchData:Gc,isAddressesEqual:(e,t)=>null!=e&&null!=t&&e.toLowerCase()===t.toLowerCase(),waiToEth:_c,ethToWai:e=>BigInt(Math.round(1e18*e)),checkBalance:Jc,toggleModal:Fc,getParmawebList:Dc,formatUnixTime:Mc,openInNativeBrowser:function(e){window.open(e,"_blank")},getUserByEoa:zc,getTbaInfoByEoa:Qc,shortname:(e,t,n)=>e.substring(0,t)+"..."+e.substring(e.length-n)},qc=Kc,Zc=new Vl(s),Yc=async()=>(await tc("contracts")).filter((function(e){return"tba"==e[2]})),Wc=async(e,t,n,s,r,a)=>{const i=new ir(e,Yl,Zc);try{return await i.account(t,n,s,r,a).then((e=>e))}catch(e){console.dir(e)}},Xc=async e=>{const t=new ir(e,Wl,Zc);return await t.owner().then((e=>e)).catch((()=>!1))},$c=async e=>{const t=new ir(e,Wl,Zc);return await t.token().then((e=>e)).catch((()=>!1))},eu=async(e,t,n)=>{if(n>10)return console.log(e+" is too deep layer"+n),{result:!1,reason:"TOO_DEEP_"+n};if(!await qc.isContract(e))return console.log(e+" is eoa"+e),{result:!0,eoa:e};const s=await $c(e);if(t.ca==s[1]&&t.tokenId==s[2])return console.log(e+" is my own"),{result:!1,reason:"SEND_TO_LOOP"};const r=await Xc(e);return await eu(r,t,n+1)},tu={getTbaInfo:async(e,t)=>{var n=await Yc();const s=[];for(const r in n){console.dir(n[r]);const i=await Wc(n[r][1],n[r][0],a,e,t,"1");s.push(i)}return s.length>1&&(alert("このトークンには2つ以上のTBAが結びついています。"),console.dir(s)),s.length>0?s[0]:null},getAddress:Wc,executeCall:async(e,t,n,s)=>{const r=Wl,a=new cc(window.ethereum),i=await a.getSigner().then((t=>new ir(e,r,t)));return await i.executeCall(t,n,s).then((e=>e)).catch((e=>{throw console.dir(e),new Error("can not control")}))},checkOwner:Xc,checkToken:$c,createAccount:async(e,t)=>{var n=await Yc();const s=Yl,r=n[0][1],i=n[0][0],o=new cc(window.ethereum),l=await o.getSigner().then((e=>new ir(r,s,e)));return await l.createAccount(i,a,e,t,"1","0x").catch((e=>{throw new Error("txCancelMes")}))},sendToEoaCheck:eu},nu=tu,su=document.getElementById("mainContents"),ru=async()=>{const e=await qc.getMaticPrice(),t=Number(e.matic_usd),n=12*t/1e3/1e3/1e3/.42,s=Number(e.jpy_matic);return console.dir("VaultPrice "+1e3*n*1e3*1e3+" matic/GB"),{dollPolygonPrice:t,vaultPriceByByte:n,polygonYenPrice:s}},au={checkPrice:ru,getUI:async()=>{const e=new cc(window.ethereum),t=await e.getSigner(),n=(await t.getAddress(),document.createElement("div"));n.classList.add("akordUploader"),su.appendChild(n),((e,t)=>{const n=document.createElement("h2");n.classList.add("akordUploader"),n.innerHTML="ParmaWeb Uploader",e.appendChild(n);const s=document.createElement("div");s.classList.add("uploadInfoArea"),s.innerHTML=" ",e.appendChild(s);const r=yc.makeFileSelect("updateFile","BaseSubmit","FILE SELECT","w3p");e.appendChild(r),r.classList.add("w3p");const a=yc.makeInput("submit","uploadSend","BaseSubmit","FILE UPLOAD","FILE UPLOAD");a.classList.add("w7p"),e.appendChild(a),r.addEventListener("change",(async e=>{const t=await ru(),n=document.getElementById("updateFile").files[0],r=t.vaultPriceByByte*n.size;console.log(r),s.innerHTML="filename : "+n.name+"<br />filesize : "+(n.size/1e3/1e3).toFixed(2)+" Mb<br />estimate : "+r.toFixed(8).substring(0,10)+" "+l+" + GasFee<br/>about JPY:"+(r*t.polygonYenPrice).toFixed(2)+"<br />※ "+(t.vaultPriceByByte*t.polygonYenPrice*1e3*1e3).toFixed(2)+"JPY/1MB",s.classList.add("upload-confirm")})),a.addEventListener("click",(async e=>{const t=await ru();e.preventDefault();const n=document.getElementById("updateFile"),r=await n.files[0],a=t.vaultPriceByByte*r.size;if(confirm("以下のファイルをアップロードします。よろしいですか？\nFileName: "+r.name+"\nMimeType: "+r.type+"\nfileSize: "+r.size+" Bites\nUPLOAD PRICE : "+a.toFixed(8).substring(0,10)+" "+l+"\nVAULT PRICE : "+(1e3*t.vaultPriceByByte).toFixed(8).substring(0,10)+" "+l+" / KB \n"))if(s.innerHTML="<div class='spinner'></div>uploading...",s.classList.remove("upload-confirm"),s.classList.remove("upload-success"),s.classList.remove("upload-failed"),r){const e=new cc(window.ethereum),t=await e.getSigner(),n=await t.getAddress(),i=new FormData;i.append("file",r),i.append("eoa",n),i.append("price",String(a)),i.append("filesize",String(r.size));const o=u+"filecheck",l=u+"upload";try{const e=await fetch(o,{method:"POST",body:i});if(e.ok){const t=await e.json();console.log("File check successfully:",t),i.append("checkfile",t.file);const n=await nc("order"),o=String(qc.ethToWai(a)),c=await Tc.order(n,o).then((e=>(console.dir(e),e))).catch((e=>{console.dir(e)}));if(c){console.log("orderResult"),console.dir(c);const e=await fetch(l,{method:"POST",body:i});if(e.ok){const t=await e.json();console.log("File upload successfully:",t),console.log("order ca",n),console.log("order result",c),console.log("filename",r.name),console.log("parmawebUrl",t.parmawebUrl);const a=await Tc.setUrl(n,c,r.name,t.parmawebUrl).then((e=>(console.dir(e),s.innerHTML="UPLOAD SUCCESSFULLY",s.classList.add("upload-success"),e))).catch((e=>{s.innerHTML=" Non Manage This File<br /> permaweb url:"+t.permawebUrl,s.classList.add("upload-success"),console.dir(e)}));console.log("SetUrlResult"+a)}else console.error("Failed to upload file:",e.statusText),s.innerHTML="Failed to Upload file",s.classList.add("upload-failed")}else console.error("Failed to check file:",e.statusText),s.innerHTML="cansel to upload",s.classList.add("upload-success")}else console.error("Failed to check file:",e.statusText),s.innerHTML="Failed to check file",s.classList.add("upload-failed")}catch(e){console.error("Error:",e),s.innerHTML="UPLOAD ERROR",s.classList.add("upload-failed")}}else console.log("No file selected"),s.innerHTML="",s.classList.remove("upload-success"),s.classList.remove("upload-failed")}))})(n)}},iu=au,ou={mint:async(e,t,n)=>{console.log("EOA : "+t),console.log("TOKENURI : "+n);const s=Zl,r=new cc(window.ethereum),a=await r.getSigner().then((t=>new ir(e,s,t))),i=await r.getSigner();await i.getAddress();try{return await a.mint(t,n).then((()=>(alert(dc("WAIT_MINT_TX")),"success"))).catch((e=>{throw alert(dc("MINT_TX_STOP")),console.dir(e),new Error("txCancelMes")}))}catch(e){console.dir(e)}},send:async(e,t,n)=>{const s=Zl,r=new cc(window.ethereum),a=await r.getSigner().then((t=>new ir(e,s,t))),i=await r.getSigner(),o=await i.getAddress();return await a.transferFrom(o,t,n).then((e=>e)).catch((e=>{throw console.dir(e),new Error("txCancelMes")}))},donatePoint:async e=>{console.log("DONTATIONS!!!");const t=Zl,n=new cc(window.ethereum),s=await n.getSigner().then((n=>new ir(e,t,n)));try{return await s._usePoint().then((e=>e)).catch((e=>{throw console.dir(e),new Error("txCancelMes")}))}catch(e){console.dir(e)}console.log("DONTATIONS!!!")},burn:async(e,t)=>{const n=Zl,s=new cc(window.ethereum),r=await s.getSigner().then((t=>new ir(e,n,t)));return await r.burn(t).then((e=>e)).catch((e=>{throw console.dir(e),new Error("txCancelMes")}))},burnable:async(e,t)=>{const n=Zl,s=new cc(window.ethereum),r=await s.getSigner().then((t=>new ir(e,n,t)));return await r.burnable(t).then((e=>e)).catch((e=>(console.dir(e),!1)))},getSupportIf:async e=>{try{const t=Zl,n=new cc(window.ethereum),s=await n.getSigner().then((n=>new ir(e,t,n)));await s.supportInterface().then((e=>e)).catch((e=>{throw console.dir(e),new Error("txCancelMes")}))}catch(e){console.dir(e)}}},lu=ou,cu=document.getElementById("pageHeader"),uu=(document.getElementById("pageFooter"),{showToken:async(e,t,n,s,r,a,i)=>{console.log("select type: "+e),console.dir(t),console.dir(a);const o=document.createElement("h1");o.textContent=t.name,r.appendChild(o);const l=document.createElement("p");l.innerHTML=t.description.replace(/\n/g,"<br />"),r.appendChild(l);const c=await nu.checkOwner(n),u=await nu.checkToken(n),d=document.createElement("p");if(d.classList.add("tokenOwnerInfo"),c){d.appendChild(Nc.span("ca: ")),d.appendChild(Nc.eoa(n,{link:"/account/"+n,target:"",icon:"copy"}));const e=document.createElement("span");e.innerHTML+=" <a class='parentTag' href='/account/"+c+"'> parent </a>",d.appendChild(e);const t=document.createElement("span");t.innerHTML+="<a class='tbaTag' href='/tokens/"+u[1]+"/"+u[2]+"'> token </a>",d.appendChild(t)}else n&&(d.appendChild(Nc.span("owner: ")),d.appendChild(Nc.eoa(n,{link:"/account/"+n,target:"",icon:"copy"})),await qc.getUserByEoa(n).then((e=>{"tba"==e.type?d.appendChild(Nc.getTbaOwnerSnipet(e.tbaInfo,"span","discordNameDisp")):"discordConnect"==e.type&&d.appendChild(Nc.getDiscordUserSnipet(e.discordUser,"span","discordNameDisp"))})));a&&await nu.checkOwner(a)&&(d.appendChild(Nc.span(" ｜ TBA ")),d.appendChild(Nc.eoa(a,{link:"/account/"+a,target:"",icon:"bag"}))),""!=n&&r.appendChild(d);const p=document.createElement("div");p.classList.add("nftImageArea"),r.appendChild(p);const h=document.createElement("img");h.classList.add("nftImage"),h.src=t.image,p.appendChild(h),t.animation_url&&fetch(t.animation_url).then((e=>{const n=e.headers.get("content-type");if("model/gltf-binary"==n){const e=document.createElement("a");e.target="blank",e.href="/modelviewer/?model-view-src="+t.animation_url,p.appendChild(e);var s=document.createElement("i");s.classList.add("far","fa-solid","fa-cubes","cubeMark"),e.appendChild(s)}else{const e=document.createElement("a");e.target="blank",e.href="/viewer/?src="+t.animation_url+"&type="+n,p.appendChild(e);var r=document.createElement("i");r.classList.add("far","fa-solid","fa-film","cubeMark"),e.appendChild(r)}}));const f=document.createElement("div");f.classList.add("nftExternal"),f.style.display="none",r.appendChild(f),t.external_url&&fetch(t.external_url).then((e=>{f.style.display="block";const n=e.headers.get("content-type");if(n.startsWith("application/")){const e=document.createElement("a");e.href=t.external_url;var s=document.createElement("i");s.classList.add("far","fa-regular","fa-file-pdf","cubeMark"),t.animation_url&&s.classList.add("cubeMark2"),e.appendChild(s),p.appendChild(e)}else if(n.startsWith("image/")){const e=document.createElement("img");e.classList.add("nftMedia"),e.src=t.external_url,e.setAttribute("type",n),f.appendChild(e)}})).catch((e=>{console.error("Error:",e)}));const m=t.attributes,g=document.createElement("div");r.appendChild(g);for(const t in m){const n=document.createElement("h4");if(n.textContent=m[t].trait_type,"metabuilder"==e){const e=document.createElement("span");e.id="attr_ed_"+t,e.classList.add("litelink"),e.classList.add("attrControlLink"),e.textContent="EDIT",n.appendChild(e);const s=document.createElement("span");s.id="attr_up_"+t,s.classList.add("litelink"),s.classList.add("attrControlLink"),s.textContent="UP",n.appendChild(s);const r=document.createElement("span");r.id="attr_dw_"+t,r.classList.add("litelink"),r.classList.add("attrControlLink"),r.textContent="DOWN",n.appendChild(r);const a=document.createElement("span");a.id="attr_rm_"+t,a.classList.add("litelink"),a.classList.add("attrControlLink"),a.textContent="DEL",n.appendChild(a)}const s=document.createElement("p");s.id="attrebuteContent_"+t,console.log("ValueCheck:"+m[t].value),"http"==m[t].value.slice(0,4)?(g.appendChild(n),g.appendChild(s),fetch(m[t].value).then((e=>{const n=e.headers.get("content-type");if(n.startsWith("application/")){const e=document.createElement("object");e.classList.add("nftObject"),e.setAttribute("type",n),e.setAttribute("data",m[t].value),s.appendChild(e);var r=document.createElement("script");r.src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js",r.type="module",cu.appendChild(r)}else if(n.startsWith("image/")){const e=document.createElement("img");e.classList.add("nftMedia"),e.src=m[t].value,e.setAttribute("type",n),s.appendChild(e)}})).catch((e=>{console.error("Error:",e)}))):(g.appendChild(n),g.appendChild(s),s.innerHTML=m[t].value.replace(/\n/g,"<br />"))}if(console.log(qc.getLocalTime()+" 遅延実行完了 "+s),c){const e=await qc.checkBalance();qc.isAddressesEqual(c,e.eoa)&&"SBT"!=i&&(i.includes("SBT")&&alert("このNFTはSBTの可能性があります。送信できない可能性があります。"),uu.tbaSendForm(c,n,r))}},sendForm:e=>{yc.setChild(e,"h2","Send NFT","ID_midashi2","CLASS_addclasses");const t=yc.makeElement("p",dc("SENDTOEOA"),null,"createdPelemBySetElement");e.appendChild(t);const n=document.createElement("div");e.appendChild(n);const s=yc.makeInput("input","sendTo","BaseInput","送信先(EOA)");s.classList.add("w7p"),e.appendChild(s);const r=yc.makeInput("submit","submitID","BaseSubmit","SEND TOKEN","SEND TOKEN");return r.classList.add("w3p"),e.appendChild(r),s.addEventListener("input",(async e=>{n.innerHTML="",n.classList.remove("sendToUser");const t=A.params,r=await nu.sendToEoaCheck(s.value,{ca:t[2],tokenId:t[3]},0);if(!r.result)return alert(dc("CANTSEND")+" : "+r.reason),!1;""!=s.value&&qc.getUserByEoa(s.value).then((e=>{n.classList.add("sendToUser"),"tba"==e.type?n.appendChild(Nc.dispTbaOwner(e.tbaInfo)):"discordConnect"==e.type?n.appendChild(Nc.dispDiscordUser(e.discordUser)):"eoa"==e.type?n.appendChild(Nc.scan(e.eoa,"UNKNOWN EOA","unknownEoa")):"ca"==e.type&&n.appendChild(Nc.scan(e.eoa,"UNKNOWN CA","unknownCa"))}))})),r.addEventListener("click",(async()=>{const e=A.params,t=await nu.sendToEoaCheck(s.value,{ca:e[2],tokenId:e[3]},0);if(!t.result)return alert(dc("CANTSEND")+" : "+t.reason),!1;if(confirm(dc("SENDNFTBEF")+s.value+dc("SENDNFTAFT"))){const t=await lu.send(e[2],s.value,e[3]);alert(dc("SENDED")),console.dir(t)}})),e},burnForm:e=>{const t=yc.makeInput("submit","submitID","BaseSubmit","BURN","BURN");return t.classList.add("wfull"),e.appendChild(t),t.addEventListener("click",(async()=>{const e=A.params;if(confirm(dc("BURNNFT"))){const t=await lu.burn(e[2],e[3]).then((()=>{alert(dc("BURNED"))})).catch((()=>{alert(dc("BURN_STOP"))}));console.dir(t)}})),e},tbaSendForm:(e,t,n)=>{const s=A.params,r=s[2],a=s[3],i=document.createElement("p");n.appendChild(i),i.innerHTML="TBA CONTROL",i.appendChild(Nc.br()),i.appendChild(Nc.span("Account-Bound NFT: ")),i.appendChild(Nc.eoa(r,{link:"/tokens/"+r,target:"",icon:"fa-copy"})),i.appendChild(Nc.link(" #"+a,"/tokens/"+r+"/"+a)),i.appendChild(Nc.br()),i.appendChild(Nc.span("parent: ")),i.appendChild(Nc.eoa(e,{link:"/account/"+e,target:"",icon:"copy"})),i.appendChild(Nc.br()),i.appendChild(Nc.span("owner: ")),i.appendChild(Nc.eoa(t,{link:"/account/"+t,target:"",icon:"copy"}));const o=yc.makeElement("p",dc("SENDTOEOA"),null,"createdPelemBySetElement");n.appendChild(o);const l=document.createElement("div");n.appendChild(l);const c=yc.makeInput("input","sendTo","BaseInput","送信先(EOA)");c.classList.add("w7p"),n.appendChild(c);const u=yc.makeInput("submit","submitID","BaseSubmit","SEND TOKEN","SEND TOKEN");u.classList.add("w3p"),n.appendChild(u),c.addEventListener("input",(async e=>{if(l.innerHTML="",l.classList.remove("sendToUser"),""!=c.value){l.classList.add("sendToUser");const e=await nu.sendToEoaCheck(c.value,{ca:r,tokenId:a},0);if(!e.result)return alert(dc("CANTSEND")+" : "+e.reason),!1;qc.getUserByEoa(c.value).then((t=>{"tba"==t.type?(l.appendChild(Nc.dispTbaOwner(t.tbaInfo)),qc.getUserByEoa(e.eoa).then((t=>{"discordConnect"==t.type?l.appendChild(Nc.dispDiscordUser(t.discordUser)):"eoa"==t.type&&l.appendChild(Nc.scan(e.eoa,"Final owner","unknownCa"))}))):"discordConnect"==t.type?l.appendChild(Nc.dispDiscordUser(t.discordUser)):"eoa"==t.type?l.appendChild(Nc.scan(t.eoa,"UNKNOWN EOA","unknownEoa")):"ca"==t.type&&l.appendChild(Nc.scan(t.eoa,"UNKNOWN CA","unknownCa"))}))}})),u.addEventListener("click",(async()=>{const e=await nu.sendToEoaCheck(c.value,{ca:r,tokenId:a},0);if(!e.result)return alert(dc("CANTSEND")+" : "+e.reason),!1;if(confirm(dc("SENDNFTBEF")+c.value+dc("SENDNFTAFT"))){const e=[t,c.value,a],n=0,s=await lc.getCallData(r,"transferFrom",e);console.log("CALLDATA:"+s);const i=await nu.executeCall(t,r,n,s);console.log(i),alert(dc("SENDED"))}}))},mintForm:e=>{yc.setChild(e,"h4","Mint Token","ID_midashi2","mintToolTitle");const t=yc.makeElement("p",dc("MINT_THE_TOKENURI"),null,"createdPelemBySetElement");e.appendChild(t);const n=yc.makeInput("input","TokenURI","BaseInput","TokenURI");n.classList.add("w7p"),e.appendChild(n);const s=yc.makeInput("submit","submitID","BaseSubmit","OPEN VAULT","OPEN VAULT");s.classList.add("w3p"),e.appendChild(s);const r=document.createElement("span");r.innerHTML=dc("REQUIRE_META_URL"),r.classList.add("labelspan"),e.appendChild(r),e.appendChild(Nc.br()),s.addEventListener("click",(async()=>{qc.toggleModal("permawebList",["jsonOnly"])}));const a=document.createElement("div");e.appendChild(a);const i=yc.makeInput("input","input4","BaseInput","送信先EOA");i.classList.add("w7p"),e.appendChild(i);const o=yc.makeInput("submit","submitID","BaseSubmit","MINT","MINT");o.classList.add("w3p"),e.appendChild(o);const l=document.createElement("div");l.classList.add("previewArea"),e.appendChild(l),i.addEventListener("input",(async e=>{a.innerHTML="",a.classList.remove("sendToUser"),""!=i.value&&qc.getUserByEoa(i.value).then((e=>{a.classList.add("sendToUser"),"tba"==e.type?a.appendChild(Nc.dispTbaOwner(e.tbaInfo)):"discordConnect"==e.type?a.appendChild(Nc.dispDiscordUser(e.discordUser)):"eoa"==e.type?a.appendChild(Nc.scan(e.eoa,"UNKNOWN EOA","unknownEoa")):"ca"==e.type&&a.appendChild(Nc.scan(e.eoa,"UNKNOWN CA","unknownCa"))}))})),n.addEventListener("input",(async e=>{qc.fetchData(n.value).then((async e=>{l.innerHTML="",uu.showToken("pc_normal",e,"",n.value,l,"","")})).catch((()=>{alert(n.value+dc("INVALID_TOKENURI"))}))})),o.addEventListener("click",(async()=>{const e=A.params;let t="metaURI : "+n.value+"\n";t+="SEND TO : "+i.value+"\n";const s=await lu.donatePoint(e[2]);if(console.log("D-BIZ:"+s),s>0&&(t+=dc("REQUIRE_DBIZ")+" : "+qc.waiToEth(s)+" pt"),confirm(t)&&"tokens"==e[1]){console.log("setTokens mint : "+e[2]);const t=await lu.mint(e[2],i.value,n.value);console.log("setTokens"+t),"success"==t&&(alert(dc("MINT_TX_SEND")),window.location.href="/tokens/"+e[2])}}))},tbaRegist:(e,t,n,s)=>{yc.setChild(e,"h2","RegistTBA","ID_midashi2","CLASS_addclasses");const r=yc.makeElement("p",dc("TBA_MAKE"),null,"createdPelemBySetElement");e.appendChild(r);const a=yc.makeInput("submit","submitID","BaseSubmit","TBA REGIST","TBA REGIST");a.classList.add("wfull"),e.appendChild(a),a.addEventListener("click",(async()=>{confirm(dc("ARE_YOU_TBA")+"\nToken info\n"+t+" #"+n)&&(await nu.createAccount(t,n).then((()=>(alert(dc("TBA_ISSUE_SUCCESS")),"success"))).catch((e=>{throw console.dir(e),alert(dc("TBA_ISSUE_ABORT")),new Error("txCancelMes")})),window.location.href="/tokens/"+t+"/"+n)}))},makeForm:e=>{yc.setChild(e,"h2","Make Form sample","ID_midashi2","CLASS_addclasses");const t=yc.makeElement("p","Make Form sample",null,"createdPelemBySetElement");e.appendChild(t);const n=yc.makeInput("input","input1","BaseInput","初期値設定");n.classList.add("wfull"),e.appendChild(n),e.appendChild(Nc.br());const s=yc.makeInput("input","input2","BaseInput","初期値設定");s.classList.add("w5p"),e.appendChild(s);const r=yc.makeInput("input","input3","BaseInput","初期値設定");r.classList.add("w5p"),e.appendChild(r),e.appendChild(Nc.br());const a=yc.makeInput("input","input4","BaseInput","初期値設定");a.classList.add("w7p"),e.appendChild(a);const i=yc.makeInput("submit","submitID","BaseSubmit","SETTING","設定");i.classList.add("w3p"),e.appendChild(i),i.addEventListener("click",(async()=>{confirm("are you ok?")&&console.log("送信しますよ")})),console.log("meta Attrebute")}}),du=uu;let pu={name:"",description:"",image:"",attributes:[]};const hu=document.getElementById("mainContents"),fu=async()=>{const e=document.getElementById("meta-preview");e.innerHTML="",await du.showToken("metabuilder",pu,"","",e,"",""),console.log("SetToken表示完了"),""!=pu.name&&(e.style.display="block"),document.querySelectorAll(".attrControlLink").forEach((e=>{e.addEventListener("click",(()=>{const t=e.id.substring(5,7),n=parseInt(e.id.substring(8));gu(n,t)}))}))},mu=async()=>{const e=document.getElementById("traittype"),t=document.getElementById("attrvalue");""!=e.value&&""!=t.value&&(pu.attributes.push({trait_type:e.value,value:t.value}),fu())},gu=async(e,t)=>{if("ed"==t){const t=await qc.toggleModal("replaceValue",[e,pu.attributes[e].trait_type,pu.attributes[e].value]);t.setValForm.value=pu.attributes[e].value,t.setAttrForm.value=pu.attributes[e].trait_type,t.attrSet.addEventListener("click",(async()=>{pu.attributes[e].trait_type=t.setAttrForm.value,pu.attributes[e].value=t.setValForm.value,qc.toggleModal(),fu()}))}if("up"==t&&0!=e){let t=pu.attributes[e],n=pu.attributes[e-1];pu.attributes[e]=n,pu.attributes[e-1]=t}if("dw"==t&&e!=pu.attributes.length-1){let t=pu.attributes[e],n=pu.attributes[e+1];pu.attributes[e]=n,pu.attributes[e+1]=t}"rm"==t&&confirm("本当に削除してよろしいですか？")&&pu.attributes.splice(e,1),fu()},yu={getUI:async()=>{const e=document.createElement("div");e.classList.add("metadatabuilder"),hu.appendChild(e);const t=document.createElement("div"),n=document.createElement("div"),s=document.createElement("h2"),r=document.createElement("div");e.id="meta-section",t.id="meta-disp",n.id="meta-control",s.innerHTML="NFT PREVIEW",r.id="meta-preview",e.appendChild(t),e.appendChild(n),r.appendChild(s),e.appendChild(r),r.style.display="none";const a=document.createElement("H2");a.classList.add("controlLavel"),a.innerHTML="Metadata builder",n.appendChild(a);const i=yc.makeInput("input","nameForm","BaseInput",dc("METANAME"));i.classList.add("w7p"),n.appendChild(i);const o=yc.makeFileSelect("fileimput","BaseSubmit",dc("JSONLOAD"),"w3p");n.appendChild(o);const l=yc.makeTextarea("description","BaseTextarea",dc("DESCRIPTION"),"");l.classList.add("wfull"),n.appendChild(l);const c=yc.makeInput("submit","jsonDownload","BaseSubmit",dc("JSONDOWNLOAD"),dc("JSONDOWNLOAD"));c.classList.add("wfull"),n.appendChild(c);const u=document.createElement("H3");u.classList.add("controlLavel"),u.innerHTML="Images",n.appendChild(u);const d=yc.makeInput("input","imageUrl","BaseInput",dc("MAINIMAGE"));d.classList.add("w7p"),n.appendChild(d);const p=yc.makeInput("submit","submitID","BaseSubmit",dc("OPENVAULT"),dc("OPENVAULT"));p.classList.add("w3p"),n.appendChild(p);const h=yc.makeInput("input","animationUrl","BaseInput",dc("MOVURL"));h.classList.add("wfull"),n.appendChild(h);const f=yc.makeInput("input","externalUrl","BaseInput",dc("EXTURL"));f.classList.add("wfull"),n.appendChild(f);const m=document.createElement("a");m.classList.add("litelink"),m.classList.add("mintlink"),m.href="/pict/",m.innerHTML=dc("PICTTOOL"),n.appendChild(m);const g=document.createElement("a");g.classList.add("litelink"),g.classList.add("mintlink"),g.href="/permaweb",g.innerHTML=dc("PERMAWEB"),n.appendChild(g);const y=document.createElement("a");y.classList.add("litelink"),y.classList.add("mintlink"),y.href="/json/sample.json",y.download="sample.json",y.innerHTML=dc("JSONSAMPLE"),n.appendChild(y),p.addEventListener("click",(async()=>{qc.toggleModal("permawebList",["notJson"])})),o.addEventListener("input",(e=>{(e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;"application/json"==t.type?(n.onload=async()=>{const t=n.result;if(t){pu=JSON.parse(t);try{document.getElementById("nameForm").value=pu.name,document.getElementById("description").value=pu.description,document.getElementById("imageUrl").value=pu.image?pu.image:"",document.getElementById("animationUrl").value=pu.animation_url?pu.animation_url:"",document.getElementById("externalUrl").value=pu.external_url?pu.external_url:""}catch(e){console.dir(e)}fu()}else alert("ファイルの読み込みに失敗しました。");e.target.value=null},n.readAsText(t)):alert("メタデータはjson形式のファイルを指定してください。:"+t.type)})(e)})),c.addEventListener("click",(()=>{(()=>{const e=JSON.stringify(pu),t=new Blob([e],{type:"application/json"}),n=window.URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.setAttribute("download",pu.name+".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s)})()})),i.addEventListener("input",(e=>{const t=e.target;console.log("NAME:",t.value),console.dir(pu),pu.name=t.value,fu()})),l.addEventListener("input",(e=>{const t=e.target;console.log("DESC:",t.value),console.dir(pu),pu.description=t.value,fu()})),d.addEventListener("input",(e=>{const t=e.target;console.log("IMG :",t.value),pu.image=t.value,fu()})),h.addEventListener("input",(e=>{const t=e.target;console.log("IMG :",t.value),pu.animation_url=t.value,fu()})),f.addEventListener("input",(e=>{const t=e.target;console.log("IMG :",t.value),pu.external_url=t.value,fu()}));const w=document.createElement("H3");w.classList.add("controlLavel"),w.innerHTML=dc("ATTRIBUTES"),n.appendChild(w);const b=yc.makeInput("traittype","traittype","BaseInput",dc("LABEL"));b.classList.add("w7p"),n.appendChild(b);const A=yc.makeInput("submit","submitID","BaseSubmit","SET","SET");A.classList.add("w3p"),n.appendChild(A);const E=yc.makeTextarea("attrvalue","BaseTextarea",dc("VALUE"),"");E.classList.add("wfull"),n.appendChild(E),A.addEventListener("click",(()=>{mu(),b.value="",E.value=""}))},setTokenData:fu,setAttr:mu,delAttr:gu},wu=yu,bu=document.getElementById("mainContents"),Au={getUI:async()=>{const e=await qc.checkBalance(),t=A.params,n=document.createElement("div");n.classList.add("editorLink"),bu.appendChild(n);const s=document.createElement("div"),r=document.createElement("div");n.id="meta-section",s.id="meta-disp",r.id="meta-control",n.appendChild(s),n.appendChild(r);const a=document.createElement("H2");a.classList.add("controlLavel"),a.innerHTML="Editor regist",r.appendChild(a);const i=yc.makeInput("input","nameForm","BaseInput","SECRET");console.log("PARAM SET"+t[3]),i.value=t[3],i.classList.add("w7p"),r.appendChild(i);const o=yc.makeInput("submit","submitID","BaseSubmit","LOGIN","LOGIN");o.classList.add("w3p"),r.appendChild(o),o.addEventListener("click",(async()=>{const n=await(async(e,t)=>{const n=new cc(window.ethereum),s=await n.getSigner(),r={eoa:await s.getAddress(),discordId:e,secret:t},a=c+"regist";try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return await e.json()}catch(e){console.error("There was a problem with the fetch operation:",e)}})(t[2],i.value);n.result?(console.log("id"+t[2]),console.log("eoa"+e.eoa),console.log("secret"+i.value),function(e,t){const n=document.createElement("form");n.method="POST",n.action="https://article.bizen.sbs/login.php";for(const e in t)if(t.hasOwnProperty(e)){const s=document.createElement("input");s.type="hidden",s.name=e,s.value=t[e],n.appendChild(s)}document.body.appendChild(n),n.submit()}(0,{id:t[2],eoa:e.eoa,secret:i.value})):alert("check user result :"+n.message)}))}},Eu=Au,ku=document.getElementById("mainContents"),Tu=async()=>{const e=await qc.checkBalance();console.dir(e);const t=await lc.getToken("balanceOf",o,e.eoa),n=document.createElement("div");n.classList.add("editorLink"),ku.appendChild(n);const s=document.createElement("div");if(n.id="meta-section",s.id="meta-control",n.appendChild(s),Number(t)>0){const t=document.createElement("H2");t.classList.add("controlLavel"),t.innerHTML="BURN MEMBERS CARD",s.appendChild(t);const n=document.createElement("p");n.classList.add("controlLavel"),n.innerHTML="ウォレット解除を行うためにはメンバーカードのBURNが必要です。",s.appendChild(n);var r=document.createElement("a");r.href="/account/"+e.eoa,r.innerHTML="こちらからメンバーカードのSBTを開き、BURNを行なってください。",s.appendChild(r)}else qc.getUserByEoa(e.eoa).then((t=>{if(console.log("discord id:"+t.discordUser.DiscordId),null!=t.discordUser.DiscordId){const n=document.createElement("H2");n.classList.add("controlLavel"),n.innerHTML="EOA disconnect",s.appendChild(n);const r=document.createElement("p");r.classList.add("controlLavel"),r.innerHTML="DiscordID:"+t.discordUser.DiscordId+"<br>EOA:"+e.eoa+"<br />こちらのウォレット接続を解除します",s.appendChild(r);const a=yc.makeInput("submit","submitID","BaseSubmit","DISCONNECT","DISCONNECT");a.classList.add("w3p"),s.appendChild(a),a.addEventListener("click",(async()=>{const e=(async e=>{if(confirm("本当に接続解除しますか?")){const t=new cc(window.ethereum),n=await t.getSigner(),s={eoa:await n.getAddress(),discordId:e},r=c+"disconnect";try{const e=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return await e.json()}catch(e){console.error("There was a problem with the fetch operation:",e)}}})(t.discordUser.DiscordId);console.dir(e),window.location.href="/disconnect"}))}else{const t=document.createElement("H2");t.classList.add("controlLavel"),t.innerHTML="EOA disconnect",s.appendChild(t);const n=document.createElement("p");n.classList.add("controlLavel"),n.innerHTML=e.eoa+"は登録可能です。<br />DISCORDにて /regist コマンドを実行してください。 ",s.appendChild(n)}}))},vu=document.getElementById("mainContents"),Cu={getUI:async()=>{const e=await qc.checkBalance(),t=A.params,n=document.createElement("div");n.classList.add("memberSbtLink"),vu.appendChild(n);const s=document.createElement("div"),r=document.createElement("div");n.id="meta-section",s.id="meta-disp",r.id="meta-control",n.appendChild(s),n.appendChild(r);const a=document.createElement("H2");a.classList.add("controlLavel"),a.innerHTML="Mint Member SBT",r.appendChild(a);const i=document.createElement("p");if(i.innerHTML=o,r.appendChild(i),e.dpoint>=1){const n=yc.makeInput("input","nameForm","BaseInput","SECRET");console.log("PARAM SET"+t[3]),n.value=t[3],n.classList.add("w7p"),r.appendChild(n);const s=yc.makeInput("submit","submitID","BaseSubmit","LOGIN","LOGIN");s.classList.add("w3p"),r.appendChild(s),s.addEventListener("click",(async()=>{const s=await(async(e,t)=>{const n=new cc(window.ethereum),s=await n.getSigner(),r={eoa:await s.getAddress(),discordId:e,secret:t},a=c+"regist";try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return await e.json()}catch(e){console.error("There was a problem with the fetch operation:",e)}})(t[2],n.value);if(s.result)if(console.dir(s.role),s.role.includes("Holder &Fan")){alert("メンバーSBTを発行します。");const n=await lu.mint(o,e.eoa,t[2]);"success"==n?(alert(dc("WAIT_MINT_TX")),window.location.href="/account/"+e.eoa):null==n&&(alert(dc("MEMBER_SBT_EXIST")),window.location.href="/account/"+e.eoa)}else alert("MEMBER_NOT_PARMITTED");else alert("check user result :"+s.message)}))}else{const e=document.createElement("p");e.innerHTML=dc("POINT_NOT_EXIST"),r.appendChild(e)}}},xu=Cu,Iu=(document.getElementById("mainContents"),{setCaroucel:async(e,t)=>{const n=document.createElement("div");n.classList.add("caroucelArea");const s=document.createElement("h2");n.appendChild(s),s.innerHTML=e;const r=document.createElement("div");r.id="carousel",r.classList.add("carousel"),n.appendChild(r);const a=document.createElement("div");a.classList.add("carousel-container"),r.appendChild(a),t.forEach((e=>{const t=document.createElement("div");t.classList.add("carousel-item"),t.appendChild(e),a.appendChild(t)}));const i=document.createElement("div");i.classList.add("carousel-control"),n.appendChild(i);const o=document.createElement("button");o.classList.add("prev"),o.textContent="Prev",i.appendChild(o);const l=document.createElement("button");l.classList.add("next"),l.textContent="Next",i.appendChild(l);let c,u,d=0;function p(e){e<0?e=t.length-1:e>=t.length&&(e=0),d=e,a.style.transform=`translateX(-${100*d}%)`}return r.addEventListener("touchstart",(e=>{c=e.touches[0].clientX})),r.addEventListener("touchmove",(e=>{u=e.touches[0].clientX})),r.addEventListener("touchend",(()=>{c-u>50?p(d+1):u-c>50&&p(d-1)})),o.addEventListener("click",(()=>{p(d-1)})),l.addEventListener("click",(()=>{p(d+1)})),p(d),n}});let Nu={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Lu(e){Nu=e}const Bu=/[&<>"']/,Ou=new RegExp(Bu.source,"g"),Pu=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Su=new RegExp(Pu.source,"g"),Ru={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mu=e=>Ru[e];function Du(e,t){if(t){if(Bu.test(e))return e.replace(Ou,Mu)}else if(Pu.test(e))return e.replace(Su,Mu);return e}const Uu=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Fu(e){return e.replace(Uu,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Hu=/(^|[^\[])\^/g;function Gu(e,t){let n="string"==typeof e?e:e.source;t=t||"";const s={replace:(e,t)=>{let r="string"==typeof t?t:t.source;return r=r.replace(Hu,"$1"),n=n.replace(e,r),s},getRegex:()=>new RegExp(n,t)};return s}function _u(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return null}return e}const Qu={exec:()=>null};function zu(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let s=!1,r=t;for(;--r>=0&&"\\"===n[r];)s=!s;return s?"|":" |"})).split(/ \|/);let s=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(/\\\|/g,"|");return n}function ju(e,t,n){const s=e.length;if(0===s)return"";let r=0;for(;r<s;){const a=e.charAt(s-r-1);if(a!==t||n){if(a===t||!n)break;r++}else r++}return e.slice(0,s-r)}function Vu(e,t,n,s){const r=t.href,a=t.title?Du(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){s.state.inLink=!0;const e={type:"link",raw:n,href:r,title:a,text:i,tokens:s.inlineTokens(i)};return s.state.inLink=!1,e}return{type:"image",raw:n,href:r,title:a,text:Du(i)}}class Ju{options;rules;lexer;constructor(e){this.options=e||Nu}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:ju(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const s=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=s.length?e.slice(s.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=ju(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1");e=ju(e.replace(/^ *>[ \t]?/gm,""),"\n");const n=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(e);return this.lexer.state.top=n,{type:"blockquote",raw:t[0],tokens:s,text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,r={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const a=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let i="",o="",l=!1;for(;e;){let n=!1;if(!(t=a.exec(e)))break;if(this.rules.block.hr.test(e))break;i=t[0],e=e.substring(i.length);let s=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],u=0;this.options.pedantic?(u=2,o=s.trimStart()):(u=t[2].search(/[^ ]/),u=u>4?1:u,o=s.slice(u),u+=t[1].length);let d=!1;if(!s&&/^ *$/.test(c)&&(i+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,u-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),r=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:\`\`\`|~~~)`),a=new RegExp(`^ {0,${Math.min(3,u-1)}}#`);for(;e;){const l=e.split("\n",1)[0];if(c=l,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),r.test(c))break;if(a.test(c))break;if(t.test(c))break;if(n.test(e))break;if(c.search(/[^ ]/)>=u||!c.trim())o+="\n"+c.slice(u);else{if(d)break;if(s.search(/[^ ]/)>=4)break;if(r.test(s))break;if(a.test(s))break;if(n.test(s))break;o+="\n"+c}d||c.trim()||(d=!0),i+=l+"\n",e=e.substring(l.length+1),s=c.slice(u)}}r.loose||(l?r.loose=!0:/\n *\n *$/.test(i)&&(l=!0));let p,h=null;this.options.gfm&&(h=/^\[[ xX]\] /.exec(o),h&&(p="[ ] "!==h[0],o=o.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:i,task:!!h,checked:p,loose:!1,text:o,tokens:[]}),r.raw+=i}r.items[r.items.length-1].raw=i.trimEnd(),r.items[r.items.length-1].text=o.trimEnd(),r.raw=r.raw.trimEnd();for(let e=0;e<r.items.length;e++)if(this.lexer.state.top=!1,r.items[e].tokens=this.lexer.blockTokens(r.items[e].text,[]),!r.loose){const t=r.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));r.loose=n}if(r.loose)for(let e=0;e<r.items.length;e++)r.items[e].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!/[:|]/.test(t[2]))return;const n=zu(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),r=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const e of s)/^ *-+: *$/.test(e)?a.align.push("right"):/^ *:-+: *$/.test(e)?a.align.push("center"):/^ *:-+ *$/.test(e)?a.align.push("left"):a.align.push(null);for(const e of n)a.header.push({text:e,tokens:this.lexer.inline(e)});for(const e of r)a.rows.push(zu(e,a.header.length).map((e=>({text:e,tokens:this.lexer.inline(e)}))));return a}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Du(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=ju(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let s=0;s<e.length;s++)if("\\"===e[s])s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],s="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],s=e[3])}else s=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),Vu(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:s?s.replace(this.rules.inline.anyPunctuation,"$1"):s},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return Vu(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(s&&(!s[3]||!n.match(/[\p{L}\p{N}]/u))&&(!s[1]&&!s[2]||!n||this.rules.inline.punctuation.exec(n))){const n=[...s[0]].length-1;let r,a,i=n,o=0;const l="*"===s[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(s=l.exec(t));){if(r=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!r)continue;if(a=[...r].length,s[3]||s[4]){i+=a;continue}if((s[5]||s[6])&&n%3&&!((n+a)%3)){o+=a;continue}if(i-=a,i>0)continue;a=Math.min(a,a+i+o);const t=[...s[0]][0].length,l=e.slice(0,n+s.index+t+a);if(Math.min(n,a)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),s=/^ /.test(e)&&/ $/.test(e);return n&&s&&(e=e.substring(1,e.length-1)),e=Du(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=Du(t[1]),n="mailto:"+e):(e=Du(t[1]),n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=Du(t[0]),n="mailto:"+e;else{let s;do{s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(s!==t[0]);e=Du(t[0]),n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:Du(t[0]),{type:"text",raw:t[0],text:e}}}}const Ku=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,qu=/(?:[*+-]|\d{1,9}[.)])/,Zu=Gu(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,qu).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Yu=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Wu=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Xu=Gu(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Wu).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),$u=Gu(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,qu).getRegex(),ed="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",td=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,nd=Gu("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",td).replace("tag",ed).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),sd=Gu(Yu).replace("hr",Ku).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ed).getRegex(),rd={blockquote:Gu(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",sd).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:Xu,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Ku,html:nd,lheading:Zu,list:$u,newline:/^(?: *(?:\n|$))+/,paragraph:sd,table:Qu,text:/^[^\n]+/},ad=Gu("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ku).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ed).getRegex(),id={...rd,table:ad,paragraph:Gu(Yu).replace("hr",Ku).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ad).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ed).getRegex()},od={...rd,html:Gu("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",td).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Qu,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Gu(Yu).replace("hr",Ku).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Zu).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ld=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,cd=/^( {2,}|\\)\n(?!\s*$)/,ud="\\p{P}\\p{S}",dd=Gu(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ud).getRegex(),pd=Gu(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ud).getRegex(),hd=Gu("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ud).getRegex(),fd=Gu("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ud).getRegex(),md=Gu(/\\([punct])/,"gu").replace(/punct/g,ud).getRegex(),gd=Gu(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),yd=Gu(td).replace("(?:--\x3e|$)","--\x3e").getRegex(),wd=Gu("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",yd).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),bd=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ad=Gu(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",bd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ed=Gu(/^!?\[(label)\]\[(ref)\]/).replace("label",bd).replace("ref",Wu).getRegex(),kd=Gu(/^!?\[(ref)\](?:\[\])?/).replace("ref",Wu).getRegex(),Td={_backpedal:Qu,anyPunctuation:md,autolink:gd,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:cd,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Qu,emStrongLDelim:pd,emStrongRDelimAst:hd,emStrongRDelimUnd:fd,escape:ld,link:Ad,nolink:kd,punctuation:dd,reflink:Ed,reflinkSearch:Gu("reflink|nolink(?!\\()","g").replace("reflink",Ed).replace("nolink",kd).getRegex(),tag:wd,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Qu},vd={...Td,link:Gu(/^!?\[(label)\]\((.*?)\)/).replace("label",bd).getRegex(),reflink:Gu(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",bd).getRegex()},Cd={...Td,escape:Gu(ld).replace("])","~|])").getRegex(),url:Gu(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},xd={...Cd,br:Gu(cd).replace("{2,}","*").getRegex(),text:Gu(Cd.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Id={normal:rd,gfm:id,pedantic:od},Nd={normal:Td,gfm:Cd,breaks:xd,pedantic:vd};class Ld{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Nu,this.options.tokenizer=this.options.tokenizer||new Ju,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Id.normal,inline:Nd.normal};this.options.pedantic?(t.block=Id.pedantic,t.inline=Nd.pedantic):this.options.gfm&&(t.block=Id.gfm,this.options.breaks?t.inline=Nd.breaks:t.inline=Nd.gfm),this.tokenizer.rules=t}static get rules(){return{block:Id,inline:Nd}}static lex(e,t){return new Ld(t).lex(e)}static lexInline(e,t){return new Ld(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){let n,s,r,a;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((s=>!!(n=s.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||"paragraph"!==s.type&&"text"!==s.type?t.push(n):(s.raw+="\n"+n.raw,s.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),s=t[t.length-1],!s||"paragraph"!==s.type&&"text"!==s.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(s.raw+="\n"+n.raw,s.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(r=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let s;this.options.extensions.startBlock.forEach((e=>{s=e.call({lexer:this},n),"number"==typeof s&&s>=0&&(t=Math.min(t,s))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(r)))s=t[t.length-1],a&&"paragraph"===s.type?(s.raw+="\n"+n.raw,s.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n),a=r.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&"text"===s.type?(s.raw+="\n"+n.raw,s.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,s,r,a,i,o,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,a.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(i||(o=""),i=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((s=>!!(n=s.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&"text"===n.type&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),s=t[t.length-1],s&&"text"===n.type&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,o))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(r=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let s;this.options.extensions.startInline.forEach((e=>{s=e.call({lexer:this},n),"number"==typeof s&&s>=0&&(t=Math.min(t,s))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(r))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(o=n.raw.slice(-1)),i=!0,s=t[t.length-1],s&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class Bd{options;constructor(e){this.options=e||Nu}code(e,t,n){const s=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",s?'<pre><code class="language-'+Du(s)+'">'+(n?e:Du(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:Du(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,n){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,n){const s=t?"ol":"ul";return"<"+s+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+s+">\n"}listitem(e,t,n){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){const s=_u(e);if(null===s)return n;let r='<a href="'+(e=s)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){const s=_u(e);if(null===s)return n;let r=`<img src="${e=s}" alt="${n}"`;return t&&(r+=` title="${t}"`),r+=">",r}text(e){return e}}class Od{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class Pd{options;renderer;textRenderer;constructor(e){this.options=e||Nu,this.options.renderer=this.options.renderer||new Bd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Od}static parse(e,t){return new Pd(t).parse(e)}static parseInline(e,t){return new Pd(t).parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const r=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const e=r,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}switch(r.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const e=r;n+=this.renderer.heading(this.parseInline(e.tokens),e.depth,Fu(this.parseInline(e.tokens,this.textRenderer)));continue}case"code":{const e=r;n+=this.renderer.code(e.text,e.lang,!!e.escaped);continue}case"table":{const e=r;let t="",s="";for(let t=0;t<e.header.length;t++)s+=this.renderer.tablecell(this.parseInline(e.header[t].tokens),{header:!0,align:e.align[t]});t+=this.renderer.tablerow(s);let a="";for(let t=0;t<e.rows.length;t++){const n=e.rows[t];s="";for(let t=0;t<n.length;t++)s+=this.renderer.tablecell(this.parseInline(n[t].tokens),{header:!1,align:e.align[t]});a+=this.renderer.tablerow(s)}n+=this.renderer.table(t,a);continue}case"blockquote":{const e=r,t=this.parse(e.tokens);n+=this.renderer.blockquote(t);continue}case"list":{const e=r,t=e.ordered,s=e.start,a=e.loose;let i="";for(let t=0;t<e.items.length;t++){const n=e.items[t],s=n.checked,r=n.task;let o="";if(n.task){const e=this.renderer.checkbox(!!s);a?n.tokens.length>0&&"paragraph"===n.tokens[0].type?(n.tokens[0].text=e+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&"text"===n.tokens[0].tokens[0].type&&(n.tokens[0].tokens[0].text=e+" "+n.tokens[0].tokens[0].text)):n.tokens.unshift({type:"text",text:e+" "}):o+=e+" "}o+=this.parse(n.tokens,a),i+=this.renderer.listitem(o,r,!!s)}n+=this.renderer.list(i,t,s);continue}case"html":{const e=r;n+=this.renderer.html(e.text,e.block);continue}case"paragraph":{const e=r;n+=this.renderer.paragraph(this.parseInline(e.tokens));continue}case"text":{let a=r,i=a.tokens?this.parseInline(a.tokens):a.text;for(;s+1<e.length&&"text"===e[s+1].type;)a=e[++s],i+="\n"+(a.tokens?this.parseInline(a.tokens):a.text);n+=t?this.renderer.paragraph(i):i;continue}default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let s=0;s<e.length;s++){const r=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const e=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=e||"";continue}}switch(r.type){case"escape":{const e=r;n+=t.text(e.text);break}case"html":{const e=r;n+=t.html(e.text);break}case"link":{const e=r;n+=t.link(e.href,e.title,this.parseInline(e.tokens,t));break}case"image":{const e=r;n+=t.image(e.href,e.title,e.text);break}case"strong":{const e=r;n+=t.strong(this.parseInline(e.tokens,t));break}case"em":{const e=r;n+=t.em(this.parseInline(e.tokens,t));break}case"codespan":{const e=r;n+=t.codespan(e.text);break}case"br":n+=t.br();break;case"del":{const e=r;n+=t.del(this.parseInline(e.tokens,t));break}case"text":{const e=r;n+=t.text(e.text);break}default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class Sd{options;constructor(e){this.options=e||Nu}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}const Rd=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#pt(Ld.lex,Pd.parse);parseInline=this.#pt(Ld.lexInline,Pd.parseInline);Parser=Pd;Renderer=Bd;TextRenderer=Od;Lexer=Ld;Tokenizer=Ju;Hooks=Sd;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(const s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{const e=s;for(const s of e.header)n=n.concat(this.walkTokens(s.tokens,t));for(const s of e.rows)for(const e of s)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=s;n=n.concat(this.walkTokens(e.items,t));break}default:{const e=s;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((s=>{const r=e[s].flat(1/0);n=n.concat(this.walkTokens(r,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let s=e.renderer.apply(this,t);return!1===s&&(s=n.apply(this,t)),s}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new Bd(this.defaults);for(const n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if("options"===n)continue;const s=n,r=e.renderer[s],a=t[s];t[s]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=a.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new Ju(this.defaults);for(const n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const s=n,r=e.tokenizer[s],a=t[s];t[s]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=a.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new Sd;for(const n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if("options"===n)continue;const s=n,r=e.hooks[s],a=t[s];Sd.passThroughHooks.has(n)?t[s]=e=>{if(this.defaults.async)return Promise.resolve(r.call(t,e)).then((e=>a.call(t,e)));const n=r.call(t,e);return a.call(t,n)}:t[s]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=a.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,s=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(s.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Ld.lex(e,t??this.defaults)}parser(e,t){return Pd.parse(e,t??this.defaults)}#pt(e,t){return(n,s)=>{const r={...s},a={...this.defaults,...r};!0===this.defaults.async&&!1===r.async&&(a.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),a.async=!0);const i=this.#ht(!!a.silent,!!a.async);if(null==n)return i(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then((t=>e(t,a))).then((e=>a.hooks?a.hooks.processAllTokens(e):e)).then((e=>a.walkTokens?Promise.all(this.walkTokens(e,a.walkTokens)).then((()=>e)):e)).then((e=>t(e,a))).then((e=>a.hooks?a.hooks.postprocess(e):e)).catch(i);try{a.hooks&&(n=a.hooks.preprocess(n));let s=e(n,a);a.hooks&&(s=a.hooks.processAllTokens(s)),a.walkTokens&&this.walkTokens(s,a.walkTokens);let r=t(s,a);return a.hooks&&(r=a.hooks.postprocess(r)),r}catch(e){return i(e)}}}#ht(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+Du(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function Md(e,t){return Rd.parse(e,t)}Md.options=Md.setOptions=function(e){return Rd.setOptions(e),Md.defaults=Rd.defaults,Lu(Md.defaults),Md},Md.getDefaults=function(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Md.defaults=Nu,Md.use=function(...e){return Rd.use(...e),Md.defaults=Rd.defaults,Lu(Md.defaults),Md},Md.walkTokens=function(e,t){return Rd.walkTokens(e,t)},Md.parseInline=Rd.parseInline,Md.Parser=Pd,Md.parser=Pd.parse,Md.Renderer=Bd,Md.TextRenderer=Od,Md.Lexer=Ld,Md.lexer=Ld.lex,Md.Tokenizer=Ju,Md.Hooks=Sd,Md.parse=Md,Md.options,Md.setOptions,Md.use,Md.walkTokens,Md.parseInline,Pd.parse,Ld.lex;const Dd=new Vl(s),Ud=["function balanceOf(address owner) view returns (uint256)","function _lastTokenId() view returns (uint256)","function ownerOf(uint256 tokenId) view returns (address)","function tokenURI(uint256 tokenId) view returns (string)"],Fd=["function balanceOf(address owner) view returns (uint256)","function tokenOfOwnerByIndex(address owner, uint256 index) view returns (uint256)","function tokenURI(uint256 tokenId) view returns (string)"],Hd=["function balanceOf(address account, uint256 id) view returns (uint256)","function uri(uint256 id) view returns (string)"],Gd=async e=>{let t=[];const n=await tc("contracts");for(const s in n)e.includes(n[s][2])&&t.push(n[s]);return console.log("manageService.getAllContracts"),console.dir(t),t},_d=async(e,t)=>{const n=await lc.getTokenInfo(e);return n.creatorOnly&&n.creator!=t&&n.owner!=t?(console.log(n.name+" is not mintable"),console.dir(n),!1):n},Qd={getMintableContract:async e=>{await(200,new Promise((e=>setTimeout(e,200))));const t=await Gd(["sbt"]);let n=[];for(const s in t){console.log("getMintableContract: loop "+s+" CA "+t[s][0]);const r=await _d(t[s][0],e);r&&n.push(r)}return console.log("manageService.getMintableContract"),console.dir(n),n},getAllContracts:Gd,getOwnTokens:async e=>{const t=await lc.hasTokenList(e);return console.dir(t),t},checkMintable:_d},zd=document.getElementById("mainContents");function jd(e){return new Promise((t=>setTimeout(t,e)))}const Vd=e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime(),s=36e5,r=864e5,a=6048e5,i=2592e6,o=31536e6;if(n>=o){const e=Math.floor(n/o);return`${e} year${1!==e?"s":""} ago`}if(n>=i){const e=Math.floor(n/i);return`${e} month${1!==e?"s":""} ago`}if(n>=a){const e=Math.floor(n/a);return`${e} week${1!==e?"s":""} ago`}if(n>=r){const e=Math.floor(n/r);return`${e} day${1!==e?"s":""} ago`}if(n>=s){const e=Math.floor(n/s);return`${e} hour${1!==e?"s":""} ago`}{const e=Math.floor(n/6e4);return`${e} minute${1!==e?"s":""} ago`}},Jd=async(e,t,n,s,r)=>{var a=document.createElement("div");a.classList.add("childNftArea"),a.id="child_nft_area_"+e,s.appendChild(a);const i=document.createElement("div");i.classList.add("floatClear"),s.appendChild(i),((e,t,n)=>"721"==n?async function(e,t){const n=new ir(t,Fd,Dd);try{const t=await n.balanceOf(e);let s=[];for(let r=0;r<t;r++)try{const t=await n.tokenOfOwnerByIndex(e,r),a=await n.tokenURI(t);s.push({tokenId:t.toString(),tokenURI:a})}catch(e){console.error("Token 721 List get error :",e)}return s}catch(e){console.error("Error occurred:",e)}}(e,t):"1155"==n?async function(e,t,n){const s=new ir(t,Hd,Dd);let r=[];for(let t of n){const n=await s.balanceOf(e,t);if(n>0)try{const e=await s.uri(t);r.push({tokenId:t.toString(),balance:n.toString(),tokenURI:e})}catch(e){console.error("Token 1155 List get error :",e)}}return r}(e,t,Array.from({length:100},((e,t)=>t+1))):async function(e,t){const n=new ir(t,Ud,Dd);try{if(0==await n.balanceOf(e))return[];const t=await n._lastTokenId();let s=[];for(let r=t;r>0;r--)try{const t=await n.tokenURI(r),a=await n.ownerOf(r);qc.isAddressesEqual(a,e)&&s.push({tokenId:r,owner:a,tokenURI:t})}catch(e){console.error("Token BIZNFT List get error :",e)}return s}catch(e){console.error("Error_occurred:",e)}}(e,t))(t,e).then((async t=>{if(t.length>0)for(const i in t){n.style.display="block",s.style.display="block",r.style.display="block";const o=t[i];var a=document.createElement("div");a.classList.add("childNft"),a.id="token_"+e+"_"+o.tokenId,document.getElementById("child_nft_area_"+e).appendChild(a),qc.fetchData(o.tokenURI).then((t=>{var n=document.createElement("a");n.href="/tokens/"+e+"/"+o.tokenId;var s=document.createElement("h4");s.classList.add("titleThumb"),s.textContent=t.name,n.appendChild(s);var r=document.createElement("div");r.classList.add("nftThumbSquare");var a=document.createElement("img");a.src=t.image,a.classList.add("nftThumb"),r.appendChild(a),nu.getTbaInfo(e,o.tokenId).then((e=>{nu.checkOwner(e).then((e=>{if(e){var t=document.createElement("i");t.classList.add("far","fa-solid","fa-bag-shopping","tbamark"),r.appendChild(t)}}))})),n.appendChild(r);var i=document.createElement("div");i.classList.add("childNftBg"),i.appendChild(n),document.getElementById("token_"+e+"_"+o.tokenId).appendChild(i),console.log(qc.getLocalTime()+" 遅延実行完了"+o.tokenURI)}))}}))},Kd=async(e,t,n)=>{console.log("filtering:",n);var s=document.createElement("div");s.classList.add("childNftArea"),s.id="child_nft_area_"+t,e.appendChild(s);const r=document.createElement("div");r.classList.add("floatClear"),e.appendChild(r);for(let e=await lc.getToken("tokenAmount",t,"");e>0;e--){await jd(300);var a=document.createElement("div");a.classList.add("childNft"),a.id="token_"+t+"_"+e,document.getElementById("child_nft_area_"+t).appendChild(a),lc.getToken("tokenURI",t,e).then((async n=>{if(null==n)console.log("undefined /tokens/"+t+"/"+e),document.getElementById("token_"+t+"_"+e).remove();else{const r=await qc.fetchData(n).then((n=>{var s=document.createElement("a");s.href="/tokens/"+t+"/"+e;var r=document.createElement("h3");r.classList.add("titleThumb"),r.textContent=n.name,s.appendChild(r);var a=document.createElement("div");a.classList.add("nftThumbSquare");var i=document.createElement("img");return i.src=n.image,i.classList.add("nftThumb"),a.appendChild(i),nu.getTbaInfo(t,e).then((e=>{nu.checkOwner(e).then((e=>{if(e){var t=document.createElement("i");t.classList.add("far","fa-solid","fa-bag-shopping","tbamark"),a.appendChild(t)}}))})),s.appendChild(a),s}));var s=document.createElement("div");s.classList.add("childNftBg"),s.appendChild(r),document.getElementById("token_"+t+"_"+e).appendChild(s)}console.log(qc.getLocalTime()+" 遅延実行完了"+n)}))}},qd=(e,t)=>{const n=document.createElement("div");n.classList.add("cardContractArea"),t.appendChild(n);var s=document.createElement("a");s.href="/contents/"+e.Path.substring(3),n.appendChild(s);const r=document.createElement("img");r.src=e.Imgurl,s.appendChild(r);const a=document.createElement("div");a.classList.add("cardTextArea"),s.appendChild(a);const i=document.createElement("h2");i.textContent=e.Title,a.appendChild(i);const o=document.createElement("p");o.innerHTML="Created <span class='date'>"+Vd(e.Created)+"</span> | Last Access <span class='date'>"+Vd(e.Updated)+"</span> | Access <span class='date'>"+e.AccessCount+" hit</span>",a.appendChild(o)},Zd=async(e,t)=>!t||!!t(e),Yd=async e=>{const t=document.createElement("h2");t.classList.add("creatorDonatetitle"),t.innerHTML="CreatorDonateHistory",e.appendChild(t),await qc.checkBalance();const n=document.createElement("p");n.classList.add("creatorDonatetitle"),n.innerHTML=dc("SUBDONAHIST"),e.appendChild(n);const s=document.createElement("div");s.classList.add("creatorDonateHistory"),e.appendChild(s);const r=await nc("donate"),a=await mc("getsubstituteDonationHistory",r);for(let e=a.length-1;e>=0;e--){const t=a[e],n=document.createElement("p");n.appendChild(Nc.span(qc.formatUnixTime(t[2]))),n.appendChild(Nc.donateDetail(t[3])),n.appendChild(Nc.eoa(t[1])),await qc.getUserByEoa(t[1]).then((e=>{"tba"==e.type?n.appendChild(Nc.getTbaOwnerSnipet(e.tbaInfo,"span","discordNameDisp")):"discordConnect"==e.type&&n.appendChild(Nc.getDiscordUserSnipet(e.discordUser,"span","discordNameDisp"))})),n.appendChild(Nc.span(qc.waiToEth(t[0])+" "+l)),s.appendChild(n)}},Wd=async(e,t,n)=>{const s=yc.makeSelect("nftSelect","BaseInput");s.classList.add("wfull");for(const e in t){const n=document.createElement("option");n.value=e;const r=t[e];n.innerHTML=r.name,r.needPoint&&(n.innerHTML+=" | <span class='needpoint'>"+r.needPoint+" pt</span>"),s.appendChild(n)}e.innerHTML="";const r=yc.makeInput("input","tokenUri","BaseInput","tokenUri");r.classList.add("wfull");const a=document.createElement("div");a.classList.add("mintableFormArea"),a.appendChild(s),a.appendChild(r);const i=document.createElement("span");i.innerHTML=dc("REQUIRE_META_URL"),i.classList.add("labelspan"),a.appendChild(i),a.appendChild(Nc.br());const o=document.createElement("div");o.style.display="none",o.classList.add("previewArea"),a.appendChild(o);const l=yc.makeInput("submit","submitID","BaseSubmit","MINT","MINT");l.classList.add("w7p"),a.appendChild(l),e.appendChild(a);const c=yc.makeInput("submit","submitID","BaseSubmit","OPEN VAULT","OPEN VAULT");c.classList.add("w3p"),a.appendChild(c),c.addEventListener("click",(async()=>{qc.toggleModal("permawebList",["jsonOnly"])})),s.addEventListener("change",(async()=>{const e=t[s.value],n=await qc.checkBalance();console.dir(t[s.value]),n.dpoint<e.needPoint&&(alert(dc("NOT_ENOUGH_DBIZ")),s.value=dc("SELECTMES"))})),l.addEventListener("click",(async()=>{const e=t[s.value];console.dir(e);let a=dc("TRYING_TO_MINT")+"\nSEND TO : "+n+"\nNFT : "+e.name;if(e.needPoint>0&&(a+=dc("REQUIRE_DBIZ")+" : "+e.needPoint+"pt"),confirm(a)){const t=await lu.mint(e.ca,n,r.value);console.log("setTokens"+t),"success"==t&&(alert(dc("WAIT_MINT_TX")),window.location.href="/tokens/"+e.ca)}})),r.addEventListener("input",(async e=>{qc.fetchData(r.value).then((async e=>{o.style.display="block",o.innerHTML="",du.showToken("pc_normal",e,"",r.value,o,"","")})).catch((()=>{o.style.display="none",alert(r.value+dc("INVALID_TOKENURI"))}))}))},Xd=(e,t)=>{const n=document.createElement("a");t.appendChild(n),qc.checkBalance().then((async t=>{t.eoa&&await Qd.checkMintable(e,t.eoa)&&(console.log(e+"is mintable"),n.classList.add("litelink"),n.classList.add("mintlink"),n.href="/tokens/"+e+"/mint",n.innerHTML="mint")}))},$d={isNotConnect:async()=>{const e=document.createElement("h2");e.textContent="ウォレットが接続されていません",zd.appendChild(e);const t=document.createElement("p");t.innerHTML="こちらのサイトはメタマスクを利用します。 ",zd.appendChild(t)},creatorDonateList:async(e,t)=>{const n=document.createElement("h2");n.classList.add("creatorDonatetitle"),n.innerHTML="CreatorDonate",e.appendChild(n);const s=document.createElement("p");s.classList.add("creatorDonatetitle"),s.innerHTML=dc("DONATEMESSAGE"),e.appendChild(s);const r=await lc.hasTokenList(t),a=yc.makeSelect("nftSelect","BaseInput");a.classList.add("wfull");let i=[];for(const e in r){const t=document.createElement("option");t.value=e;const n=r[e],s=await qc.fetchData(n.tokenUri);t.innerHTML=n.name+" #"+n.tokenId+" | "+s.name,a.appendChild(t),i.push(s)}const o=yc.makeInput("input","sendTo","BaseInput",dc("DONATEPRICE"));o.classList.add("w5p");const c=yc.makeInput("input","sendTo","BaseInput",dc("CASHBACK"));c.classList.add("w5p"),e.appendChild(document.createElement("br"));const u=yc.makeInput("input","sendTo","BaseInput",dc("DONOR"));u.classList.add("wfull");const d=document.createElement("div");d.classList.add("sendDonateNftArea");const p=document.createElement("div");p.classList.add("sendDonateFormArea"),p.appendChild(a);const h=document.createElement("div");h.classList.add("priceConfirmArea"),h.style.display="none",p.appendChild(h),p.appendChild(o),p.appendChild(c);const f=document.createElement("div");p.appendChild(f),p.appendChild(u);const m=yc.makeInput("submit","submitID","BaseSubmit",dc("SUBDONATE"),dc("SUBDONATE"));m.classList.add("wfull"),p.appendChild(m);const g=document.createElement("div"),y=document.createElement("div");y.classList.add("sendDonateNftPreviewBg"),g.classList.add("sendDonateNftPreviewArea"),g.appendChild(y),d.appendChild(g),d.appendChild(p),e.appendChild(d);const w=async()=>{const e=await qc.getMaticYen();if(null!=e){h.style.display="block",h.innerHTML="";const t=Number(o.value)*Number(e),n=Number(c.value)*Number(e);let s="<i class='fa-solid fa-money-check-dollar'></i> <span class='chkprice'>"+t.toFixed(4)+"</span> "+l+" <i class='fa-solid fa-circle-left'></i> <span class='chkprice'>"+n.toFixed(4)+"</span> "+l+"<br /><i class='fa-solid fa-money-check-dollar'></i> <span class='chkpricemini'>"+o.value+"</span> JPY  <i class='fa-solid fa-circle-left'></i> <span class='chkpricemini'>"+c.value+"</span> JPY  | <i class='fa-solid fa-calculator'></i> : <span class='chkpricemini'>"+e.toFixed(4)+"</span> "+l+"/JPY";t/2<=n&&(s="キャッシュバック額が大きすぎます",c.value=""),h.innerHTML=s}else h.style.display="block",h.innerHTML="現在価格が取得できませんでした。しばらくお待ち下さい。"};o.addEventListener("change",(async e=>{Number(o.value)>0&&w()})),c.addEventListener("change",(async e=>{Number(c.value)>=0&&w()})),u.addEventListener("input",(async e=>{b()}));const b=async()=>{f.innerHTML="",f.classList.remove("sendToUser"),""!=u.value&&(f.classList.add("sendToUser"),qc.getUserByEoa(u.value).then((async e=>{if("tba"==e.type){f.appendChild(Nc.dispTbaOwner(e.tbaInfo));const t=await nu.sendToEoaCheck(e.tbaInfo.eoa,{ca:e.tbaInfo.ca,tokenId:e.tbaInfo.ca},0);if(!t.result)return alert(dc("CANTSEND")+" : "+t.reason),u.value="",f.innerHTML="",f.classList.remove("sendToUser"),!1;qc.getUserByEoa(t.eoa).then((e=>{"discordConnect"==e.type?f.appendChild(Nc.dispDiscordUser(e.discordUser)):"eoa"==e.type&&f.appendChild(Nc.scan(t.eoa,"Final owner","unknownCa"))}))}else"discordConnect"==e.type?f.appendChild(Nc.dispDiscordUser(e.discordUser)):"eoa"==e.type?f.appendChild(Nc.scan(e.eoa,"UNKNOWN EOA","unknownEoa")):"ca"==e.type&&f.appendChild(Nc.scan(e.eoa,"UNKNOWN CA","unknownCa"))})))},E=async()=>{if(y.innerHTML="",i[a.value]){const e=document.createElement("img");e.classList.add("sendNftPreviewImg"),e.src=i[a.value].image,y.appendChild(e)}};if(a.addEventListener("change",(async e=>{E()})),A.params[2]){for(const e in r)r[e].ca==A.params[3]&&r[e].tokenId==A.params[4]&&(a.value=e,E());u.value=A.params[2],b()}Yd(e),m.addEventListener("click",(async()=>{(async()=>{if(""==o.value)return void alert(dc("MES1"));const e=await qc.getMaticYen();if(null==e)return void alert(dc("MES2"));const t=Number(o.value)*Number(e),n=Number(c.value)*Number(e),s=await qc.checkBalance();if(qc.waiToEth(s.balance)<Number(t))return void alert(l+dc("NOT_ENOUGH"));if(t/2<=n)return void alert(dc("MES3"));const d="balance:"+qc.waiToEth(s.balance)+"\nSEND TOKEN:"+i[a.value].name+"\nSEND TO:"+u.value+"\nVALUE:"+t+"\nCASHBACK:"+n;if(confirm(d)){console.log(d);const e=await nc("donate"),s=await mc("donate",e,[u.value,String(qc.ethToWai(t)+qc.ethToWai(n)),"SEND TOKEN:"+r[a.value].ca+"/"+r[a.value].tokenId,String(qc.ethToWai(n))]);if(console.dir(s),null!=s){alert(i[a.value].name+dc("MES4"));const e=await lu.send(r[a.value].ca,u.value,r[a.value].tokenId);null!=e&&(alert(i[a.value].name+dc("MES5")),console.dir(e),location.reload())}}})()}))},creatorDonateHistory:Yd,displayMintUI:async(e,t)=>{const n=await qc.checkBalance(),s=await lc.getTokenInfo(t[2]);console.dir(s),console.log("creatorOlny:"+s.creatorOnly);const i=document.createElement("p");i.innerHTML="<h2>"+s.name+" MINT PAGE</h2>",e.appendChild(i);let o=!0;console.dir(s.creatorOnly),!s.creatorOnly||qc.isAddressesEqual(s.creator,n.eoa)||qc.isAddressesEqual(s.owner,n.eoa)||(i.innerHTML+=dc("CREATOR_ONLY"),o=!1),n.dpoint<s.needPoint&&(i.innerHTML+=dc("NOT_ENOUGH_DBIZ")+s.needPoint+" pt",o=!1),n.chainId!=a&&(i.innerHTML+="PLEASE CONNECT "+r+" NETWORK ",o=!1),o&&(s.needPoint>0&&(i.innerHTML+="<p> USE POINT:"+s.needPoint+" pt</p>"),du.mintForm(e))},displayToken:async(e,t,n,s,r)=>{console.log("displayToken:"+t+"/"+n);const a=document.createElement("div"),i=await lc.getToken("tokenURI",t,n),o=await lc.getToken("name",t,n),l=await lc.getToken("symbol",t,n),u=await lc.getToken("ownerOf",t,n),d=await lu.burnable(t,n);a.classList.add("tokenUri_"+i),e.appendChild(a);const p=document.createElement("div");p.classList.add("TbaInfo"),e.appendChild(p);const h=await qc.checkBalance(),f=document.createElement("p");r||null!=h.balance&&qc.isAddressesEqual(u,h.eoa)&&du.tbaRegist(f,t,n,h.eoa),p.appendChild(f);const m=document.createElement("p");m.classList.add("tokenBreadCrumb"),a.appendChild(m);var g=document.createElement("a");g.href="/tokens/",g.textContent="NftCollection",m.appendChild(g);const y=document.createElement("span");y.textContent=" | ",m.appendChild(y);var w=document.createElement("a");w.href="/tokens/"+t,w.textContent=o,m.appendChild(w);const b=document.createElement("span");b.textContent=" #"+n,m.appendChild(b);var E=document.createElement("a");E.classList.add("openseaLink"),E.href="https://opensea.io/assets/matic/"+t+"/"+n,E.innerHTML='<i class="opensea">',E.target="_blank",m.appendChild(E);const k=c+"shop/eoa/"+u;try{const e=await fetch(k),s=await e.json(),r=JSON.parse(s.Json)[A.lang];var T=document.createElement("div");T.classList.add("shopInfoArea");var v=document.createElement("h2");v.classList.add("shopTitle"),v.innerHTML="shop info : "+r.name,T.appendChild(v);var C=document.createElement("div");C.classList.add("shopMainArea");var x=document.createElement("div");x.classList.add("shopThumbSquare");var I=document.createElement("img");I.src=s.Imgurl,I.classList.add("shopThumb"),x.appendChild(I);var N=document.createElement("div");if(N.classList.add("shopDetail"),N.appendChild(Nc.labeledElm("p"," : "+r.workplace,["fa-solid","fa-shop"])),N.appendChild(Nc.labeledElm("p"," : "+r.location,["fa-solid","fa-location-dot"])),N.appendChild(Nc.labeledElm("p"," : "+r.station,["fa-solid","fa-train-subway"])),C.appendChild(x),C.appendChild(N),T.appendChild(C),u==h.eoa){var L=document.createElement("p");L.classList.add("askDiscordBot"),L.innerHTML="ask to Discord Bot : <b class='commandInline'>/getkey </b> nftinfo : <b class='commandInline'>"+qc.shortname(t+"/"+n,6,6),L.appendChild(Nc.linkCopy(t+"/"+n)),T.appendChild(L)}else qc.getUserByEoa(h.eoa).then((e=>{if("discordConnect"==e.type){const r=e.discordUser.Name,a=document.createElement("img");a.classList.add("discordIconMini"),a.src=e.discordUser.Icon;var s=document.createElement("p");const i=yc.makeInput("input","transfarRequest","miniInput","password"),o=yc.makeInput("submit","submitID","miniSubmit","REQUEST","REQUEST");s.classList.add("askDiscordBot"),s.appendChild(a),s.appendChild(Nc.span(r+dc("ARE_YOU_BUYER"))),s.appendChild(i),s.appendChild(o),T.appendChild(s),o.addEventListener("click",(async()=>{const e=i.value,s=h.eoa;i.value="";const r=c+"transrequest",a={eoa:s,secret:e,ca:t,id:n};try{const e=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await e.json();alert(t.message),console.dir(t)}catch(e){console.error("There was a problem with the fetch operation:",e)}}))}}));m.appendChild(T)}catch(e){console.error("There was a problem with the fetch operation:",e)}console.log(qc.getLocalTime()+" 遅延実行開始 "+i),qc.fetchData(i).then((async e=>{await du.showToken("pc_normal",e,u,i,a,s,l),console.log(qc.getLocalTime()+" 遅延実行完了 "+i),null!=h.balance&&qc.isAddressesEqual(u,h.eoa)&&"SBT"!=l&&(l.includes("SBT")&&alert("このNFTはSBTの可能性があります。送信できない可能性があります。"),du.sendForm(a)),d&&du.burnForm(a)}))},displayOwnTokens:Jd,displayTokens:Kd,displayManagedData:async(e,t,n)=>{const s=await tc(e),r=document.createElement("h2");r.textContent=t,zd.appendChild(r);const a=document.createElement("div");a.classList.add(e+"LinkList"),zd.appendChild(a);for(const t in s)if(!n||n(s[t])){const n=document.createElement("a");n.href="/"+e+"/"+s[t][0],"admins"==e?n.textContent=s[t][0]:n.innerHTML="creators"==e?JSON.parse(s[t][1])[A.lang]+"<span class='litelink'>"+s[t][2]+"<span>":s[t][1]+"<span class='litelink'>"+s[t][2]+"</span>",a.appendChild(n);const r=document.createElement("br");a.appendChild(r)}},displayOwns:async(e,t,n)=>{console.log(qc.getLocalTime()+" DisplayOwns:開始");const s=document.createElement("div");s.classList.add("nftContractArea"),s.style.display="block";const r=document.createElement("div");r.style.display="block",r.classList.add("contractLinkList"),s.appendChild(r),e.appendChild(s);const a=document.createElement("h2");a.classList.add("ownTokenCaTitle"),a.style.display="none";const i=document.createElement("a");i.href="/tokens/"+o,i.textContent="MEMBERS CARD",a.appendChild(i),r.appendChild(a),Jd(o,n,s,r,a),document.createElement("div").classList.add("floatClear");const l=document.createElement("div");l.classList.add("nftContractArea"),l.style.display="none";const c=document.createElement("h3");c.textContent="NFT COLLECTIONS";const u=document.createElement("div");u.style.display="none",u.classList.add("contractLinkList"),l.appendChild(c),l.appendChild(u),e.appendChild(l);const d=document.createElement("div");d.classList.add("floatClear"),e.appendChild(d);const p=document.createElement("div");p.style.display="none",p.classList.add("sbtContractArea");const h=document.createElement("h3");h.textContent="SBT COLLECTIONS";const f=document.createElement("div");f.style.display="none",f.classList.add("contractLinkList"),e.appendChild(f),p.appendChild(h),p.appendChild(f),e.appendChild(p);const m=document.createElement("div");m.classList.add("floatClear"),e.appendChild(m);for(const e in t)if(await jd(300),t[e][3]){if("nft"===t[e][2]){const s=document.createElement("h2");s.classList.add("ownTokenCaTitle"),s.style.display="none";const r=document.createElement("a");r.href="/tokens/"+t[e][0],r.textContent=t[e][1],s.appendChild(r),u.appendChild(s),Jd(t[e][0],n,l,u,s),document.createElement("div").classList.add("floatClear")}else if("sbt"===t[e][2]){const s=document.createElement("h2");s.classList.add("ownTokenCaTitle"),s.style.display="none";const r=document.createElement("a");r.href="/tokens/"+t[e][0],r.textContent=t[e][1],s.appendChild(r),f.appendChild(s),Jd(t[e][0],n,p,f,s),document.createElement("div").classList.add("floatClear")}}else console.log(qc.getLocalTime()+"非表示判定"+t[e])},displayTokenContracts:async(e,t)=>{const n=document.createElement("div");n.classList.add("nftContractArea"),n.style.display="none";const s=document.createElement("h3");s.textContent="NFT COLLECTIONS";const r=document.createElement("div");r.classList.add("contractLinkList"),n.appendChild(s),n.appendChild(r),zd.appendChild(n);const a=document.createElement("div");a.classList.add("floatClear"),zd.appendChild(a);const i=document.createElement("div");i.style.display="none",i.classList.add("sbtContractArea");const o=document.createElement("h3");o.textContent="SBT COLLECTIONS";const l=document.createElement("div");l.classList.add("contractLinkList"),zd.appendChild(l),i.appendChild(o),i.appendChild(l),zd.appendChild(i);const c=document.createElement("div");c.classList.add("floatClear"),zd.appendChild(c);for(const s in e)Zd(e[s],t).then((t=>{if(t){if("nft"===e[s][2]){console.log("NFT add:"+e[s][1]),n.style.display="block";const t=document.createElement("h3");r.appendChild(t);const a=document.createElement("a");a.href="/tokens/"+e[s][0],a.innerHTML=e[s][1],t.appendChild(a);const i=document.createElement("span");t.appendChild(i),Xd(e[s][0],i),Kd(r,e[s][0],!1),document.createElement("div").classList.add("floatClear")}else if("sbt"===e[s][2]){console.log("SBT add:"+e[s][1]),i.style.display="block";const t=document.createElement("h3");l.appendChild(t);const n=document.createElement("a");n.href="/tokens/"+e[s][0],n.innerHTML=e[s][1],t.appendChild(n);const r=document.createElement("span");t.appendChild(r),Kd(l,e[s][0],!1),document.createElement("div").classList.add("floatClear")}}else console.log("非表示判定"+e[s])})),await jd(100)},displayAssets:async(e,t)=>{const n=document.createElement("div");n.classList.add("nftContractArea"),n.style.display="none";const s=document.createElement("h4");s.textContent="NFT ASSETS";const r=document.createElement("div");r.classList.add("contractLinkList"),n.appendChild(s),n.appendChild(r),zd.appendChild(n);const a=document.createElement("div");a.style.display="none",a.classList.add("sbtContractArea");const i=document.createElement("h4");i.textContent="SBT ASSETS";const o=document.createElement("div");o.classList.add("contractLinkList"),zd.appendChild(o),a.appendChild(i),a.appendChild(o),zd.appendChild(a);for(const s in e)Zd(e[s],t).then((t=>{if(t){if("nft"===e[s][2]){n.style.display="block";const t=document.createElement("div");t.classList.add("tokenLinkList"),r.appendChild(t);const a=document.createElement("h3");a.textContent=e[s][1],t.appendChild(a);const i=document.createElement("div");i.classList.add("nftAssetList"),t.appendChild(i),Kd(i,e[s][0],!1);const o=document.createElement("div");o.classList.add("floatClear"),i.appendChild(o)}else if("sbt"===e[s][2]){a.style.display="block";const t=document.createElement("div");t.classList.add("tokenLinkList"),o.appendChild(t);const n=document.createElement("h3");n.textContent=e[s][1],t.appendChild(n);const r=document.createElement("div");r.classList.add("sbtAssetList"),t.appendChild(r),Kd(r,e[s][0],!1);const i=document.createElement("div");i.classList.add("floatClear"),r.appendChild(i)}}else console.log("非表示判定"+e[s])}))},displayArticleCard:qd,setMintableForm:async(e,t)=>{qc.checkBalance().then((async n=>{if(n.eoa){e.style.display="block";const s=await Qd.getMintableContract(n.eoa);Wd(e,s,t)}}))},mintableContractSelect:Wd,createMintLinkElm:Xd},ep=$d,tp=document.getElementById("mainContents");Md.setOptions({breaks:!0});const np=async e=>{try{const t=e+"?test="+Date.now();console.log("GET MD CONTENTS:"+t);const n=await fetch(t);if(!n.ok)throw new Error("Network response was not ok");const s=await n.json();let r=await Md(s.Contents);const a=new URL(e,window.location.origin);return r=r.replace(/(src|href)="([^"]*)"/g,((e,t,n)=>n.startsWith("http")?e:`${t}="${new URL(n,a).href}"`)),r}catch(t){return console.error("Fetch operation failed:",t),"md file notfound md | "+e}},sp=async(e,t)=>{const n=`https://article.bizen.sbs/edit.php?file=${t}`,s=document.createElement("section");s.classList.add("articleSection"),tp.appendChild(s);const r=document.createElement("div");r.classList.add("articleArea"),s.appendChild(r),r.innerHTML=await np(e);const a=document.createElement("div");a.classList.add("articleArea");var i=document.createElement("a");i.classList.add("editorLink"),i.href=n,i.innerHTML="<i class='fa-solid fa-pen-to-square'></i> <span>EDIT MD FILE</span>",a.appendChild(i),s.appendChild(a)},rp={getMdSiteMap:async()=>{const e=c+"/contents/get/"+A.lang,t=document.createElement("div");t.classList.add("contentsDirArea"),tp.appendChild(t);var n=document.createElement("h2");n.classList.add("contentParentTitle"),n.textContent="Contents",t.appendChild(n),fetch(e).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{let n={};for(let t of e){const e=t.Path.split("/");n[e[1]]||(n[e[1]]=[]),n[e[1]].push(t)}console.dir(n);for(const e in n)if("common"!=e){var s=document.createElement("h2");s.classList.add("contentDirTitle");var r=document.createElement("a");r.href="/contents/"+e,r.textContent=dc(e),s.appendChild(r),t.appendChild(s);var a=document.createElement("div");a.classList.add("contentChildList"),t.appendChild(a);for(const t in n[e].slice(0,5)){console.dir(n[e][t]);var i=document.createElement("a");i.href="/contents/"+n[e][t].Path.substring(3),i.innerHTML=n[e][t].Title+"<span class='ac'>("+n[e][t].AccessCount+")<span>",a.appendChild(i)}}})).catch((e=>{console.error("can't get directry",e)}))},getMdPath:async()=>{const e=c,t=A.getParams(),n=A.lang;sp(`${e}contents/get/${n}/${t}`,`${n}/${t}.md`)},getMdDir:async e=>{const t=c+"/contents/get/"+A.lang+"/"+e,n=document.createElement("div");n.classList.add("contentsDirArea"),tp.appendChild(n);var s=document.createElement("h2");s.classList.add("contentParentTitle");var r=document.createElement("a");r.href="/contents/",r.textContent="Contents",s.appendChild(r),n.appendChild(s);var a=document.createElement("h2");a.classList.add("contentDirTitle"),a.textContent=dc(e),n.appendChild(a),fetch(t).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{for(let t of e)qd(t,n)})).catch((e=>{console.error("can't get directry",e)}))},getMdContents:np,parseMdPage:sp},ap=rp,ip=(document.getElementById("mainContents"),{getHome:async()=>{const e=document.createElement("div");return e.classList.add("homeContents"),e},getHomeContents:async()=>{const e=A.lang+"/common/home",t=c+"contents/get/"+e,n=`${e}.md`;ap.parseMdPage(t,n)},getItems:async()=>{const e=[],t=c+"item";try{const a=await fetch(t),i=await a.json();for(const t in i){const a=JSON.parse(i[t].Json)[A.lang];console.log(i[t].Contract+" #"+i[t].TokenId);const o=await lc.getToken("tokenURI",i[t].Contract,i[t].TokenId);let l;console.log("GET TOKEN URI:"+i[t].Contract+" #"+i[t].TokenId),null!=o&&(l=await qc.fetchData(o).then((async e=>e))),console.log("NFTINFO"),console.dir(l);const c=document.createElement("div");c.id="slide_"+t,c.classList.add("carousel-item-bg");const u=document.createElement("div");u.classList.add("carousel-item-content"),c.appendChild(u);const d=document.createElement("h2");d.textContent=a.name,u.appendChild(d);const p=document.createElement("div");p.classList.add("contentDiv"),u.appendChild(p);const h=document.createElement("div");u.appendChild(h),p.appendChild(h);const f=document.createElement("div");f.classList.add("itemImgDiv");const m=document.createElement("img");m.classList.add("itemImg"),m.src=null!=l?l.image:"/img/dummy.jpg",f.appendChild(m),h.appendChild(f);var n=document.createElement("a");if(n.classList.add("shopSiteLink"),n.href=i[t].Link,n.target="_blank",n.innerHTML='<i class="fa-solid fa-cart-shopping"></i> BUY NOW',h.appendChild(n),null!=l){var s=document.createElement("a");s.classList.add("shopSiteLink"),s.href="/tokens/"+i[t].Contract+"/"+i[t].TokenId,s.target="_blank",s.innerHTML='<i class="fa-solid fa-gem"></i> NFT VIEW',h.appendChild(s);var r=document.createElement("a");r.classList.add("shopSiteLink"),r.href="https://opensea.io/assets/matic/"+i[t].Contract+"/"+i[t].TokenId,r.target="_blank",r.innerHTML='<i class="opensea"></i> opensea',h.appendChild(r)}const g=document.createElement("div");if(g.classList.add("itemTxtDiv"),p.appendChild(g),null!=l){const e=document.createElement("div");e.classList.add("carouselProfileArea"),g.appendChild(e);const t=document.createElement("p");t.classList.add("carouselProfileName"),t.textContent=l.name,e.appendChild(t);const n=document.createElement("p");n.classList.add("carouselProfile"),n.textContent=l.description,e.appendChild(n)}const y=document.createElement("p");y.innerHTML='<i class="fa-solid fa-money-check-dollar"></i> '+i[t].Price+" JPY",g.appendChild(y);const w=document.createElement("p");w.innerHTML='<i class="fa-solid fa-user"></i> '+a.owner,g.appendChild(w);const b=document.createElement("p");b.innerHTML='<i class="fa-solid fa-splotch"></i> '+a.type,g.appendChild(b);const E=document.createElement("p");E.innerHTML='<i class="fa-solid fa-star-of-life"></i> '+a.genre,g.appendChild(E);const k=document.createElement("p");k.innerHTML='<i class="fa-solid fa-weight-scale"></i> '+a.size+" / "+a.weight,g.appendChild(k);const T=document.createElement("p");T.innerHTML='<i class="fa-solid fa-shop"></i> '+a.workplace,g.appendChild(T);const v=document.createElement("p");v.innerHTML='<i class="fa-solid fa-location-dot"></i> '+a.location,g.appendChild(v);const C=document.createElement("p");C.innerHTML='<i class="fa-solid fa-train-subway"></i> '+a.station,g.appendChild(C),e.push(c)}return Iu.setCaroucel("New Arrival",e)}catch(e){console.error("There was a problem with the fetch operation:",e)}},getGallarys:async()=>{const e=[],t=c+"shop";try{const s=await fetch(t),r=await s.json();for(const t in r){const s=JSON.parse(r[t].Json)[A.lang];console.dir(s);const a=document.createElement("div");a.id="slide_"+t,a.classList.add("carousel-item-bg");const i=document.createElement("div");i.classList.add("carousel-item-content"),a.appendChild(i);const o=document.createElement("h2");o.textContent=s.name,i.appendChild(o);const l=document.createElement("div");l.classList.add("contentDiv"),i.appendChild(l);const c=document.createElement("div");i.appendChild(c),l.appendChild(c);const u=document.createElement("div");u.classList.add("gallaryImgDiv");const d=document.createElement("img");d.classList.add("gallaryImg"),d.src=r[t].Imgurl,u.appendChild(d),c.appendChild(u);var n=document.createElement("a");n.classList.add("gallaryLink"),n.href="/creators/"+r[t].Eoa,n.innerHTML='<i class="fa-solid fa-door-open"></i> Gallary',c.appendChild(n);const p=document.createElement("div");p.classList.add("itemTxtDiv"),l.appendChild(p);const h=document.createElement("div");h.classList.add("carouselProfileArea");const f=document.createElement("p");f.classList.add("carouselProfile"),f.textContent=s.profile,h.appendChild(f),p.appendChild(h);const m=document.createElement("p");m.innerHTML='<i class="fa-solid fa-user"></i> '+s.name,p.appendChild(m);const g=document.createElement("p");g.innerHTML='<i class="fa-solid fa-shop"></i> '+s.workplace,p.appendChild(g);const y=document.createElement("p");y.innerHTML='<i class="fa-solid fa-location-dot"></i> '+s.location,p.appendChild(y);const w=document.createElement("p");w.innerHTML='<i class="fa-solid fa-train-subway"></i> '+s.station,p.appendChild(w),e.push(a)}return Iu.setCaroucel("Gallary",e)}catch(e){console.error("There was a problem with the fetch operation:",e)}}}),op=ip,lp=async(e,t)=>{const n=ql,s=new cc(window.ethereum),r=await s.getSigner().then((e=>new ir(i,n,e)));try{if("contracts"==e){const e=await r.getAllContracts().then((e=>e));return up(e)}if("creators"==e){const e=await r.getAllCreators().then((e=>e));return up(e)}if("getadmins"==e){const e=await r.getAdmins().then((e=>e));return cp(e)}if("setadmin"==e)await r.setAdmin(t[0]).then((e=>e));else if("deladmin"==e)await r.delAdmin(t[0]).then((e=>e));else{if("checkuser"==e)return await r.checkUser().then((e=>e));"hiddencreator"==e?await r.hiddenCreator(t[0]).then((e=>e)):"publiccreator"==e?await r.publicCreator(t[0]).then((e=>e)):"setcreator"==e?await r.setCreator(t[0],t[1],t[2]).then((e=>e)):"setcreatorinfo"==e?await r.setCreatorInfo(t[0],t[1],t[2]).then((e=>e)):"hiddencontract"==e?await r.hiddenContract(t[0]).then((e=>e)):"publiccontract"==e?await r.publicContract(t[0]).then((e=>e)):"setcontract"==e?await r.setContract(t[0],t[1],t[2]).then((e=>e)):"setcontractinfo"==e&&await r.setContractInfo(t[0],t[1],t[2]).then((e=>e))}}catch(e){console.dir(e)}},cp=e=>{let t=[];for(const n in e[0])t.push([e[0][n]]);return t},up=e=>{let t=[];for(const n in e[0])t.push([e[0][n],e[1][n],e[2][n],e[3][n]]);return t},dp=async(e,t)=>{"setadmin"!=e&&"deladmin"!=e&&"hiddencreator"!=e&&"publiccreator"!=e||!confirm(e+"はセットできるのか？："+t)||await lp(e,[t])},pp=async(e,t,n)=>{"setcreator"!=e&&"setcreatorinfo"!=e&&"setcontract"!=e&&"setcontractInfo"!=e||!confirm(e+"はセットできるのか？："+t+n)||await lp(e,[t,n])},hp=async(e,t,n,s)=>{"setcreator"!=e&&"setcreatorinfo"!=e&&"setcontract"!=e&&"setcontractInfo"!=e||!confirm(e+"はセットできるのか？："+t+n+s)||await lp(e,[t,n,s])},fp={showAccount:async(e,t,n)=>{{const s=document.createElement("div");if(s.classList.add("accountElm"),n.appendChild(s),t){const r=await nu.checkToken(e),a=await lc.getToken("tokenURI",r[1],r[2]),i=await qc.fetchData(a),o=document.createElement("img");o.classList.add("ownerProfPictIcon"),o.src=i.image,"https://discord.com/assets/f9bb9c4af2b9c32a2c5ee0014661546d.png"==o.src&&(o.src="https://bizen.sbs/img/alt.jpg"),s.appendChild(o);const l=document.createElement("div");l.classList.add("accountInfo"),n.appendChild(s),l.appendChild(Nc.span("TBA : ")),l.appendChild(Nc.eoa(e)),l.appendChild(Nc.br());const c=document.createElement("span");c.innerHTML="NFT : <a href='/tokens/"+r[1]+"/"+r[2]+"'>"+i.name+"</a>",l.appendChild(c),l.appendChild(Nc.br());const u=document.createElement("span");u.appendChild(Nc.span("NFT owner : ")),u.appendChild(Nc.eoa(t,{link:"/account/"+t,target:"",icon:"copy"})),await qc.getUserByEoa(t).then((e=>{"discordConnect"==e.type&&u.appendChild(Nc.getDiscordUserSnipet(e.discordUser,"span","discordNameDisp"))})),l.appendChild(u),s.appendChild(l)}else qc.getUserByEoa(e).then((async t=>{if("discordConnect"==t.type){const n=document.createElement("img");n.classList.add("ownerProfPictIcon"),n.src=t.discordUser.Icon,"https://discord.com/assets/f9bb9c4af2b9c32a2c5ee0014661546d.png"==n.src&&(n.src="https://bizen.sbs/img/alt.jpg"),s.appendChild(n);const r=document.createElement("div");r.classList.add("accountInfo"),r.appendChild(Nc.span("EOA : ")),r.appendChild(Nc.eoa(e)),r.appendChild(Nc.br()),r.appendChild(Nc.span("Discord :")),r.appendChild(Nc.getDiscordUserSnipet(t.discordUser,"span","discordNameDisp")),r.appendChild(Nc.br()),s.appendChild(r)}else{const t=document.createElement("div");t.classList.add("accountInfo"),t.appendChild(Nc.span("EOA : ")),t.appendChild(Nc.eoa(e)),t.appendChild(Nc.br()),s.appendChild(t)}}))}}};document.getElementById("headerTitle").innerHTML=n,document.getElementById("pageTitle").innerHTML=n;const mp=document.getElementById("mainContents");async function gp(){ap.getMdPath()}const yp=async()=>{const e=A.lang+"/creator/"+A.params[2],t=c+"contents/get/"+e,n=`${e}.md`;ap.parseMdPage(t,n),bp((e=>1==e[3]))},wp=async e=>{const t=document.createElement("div");t.classList.add("assetArea"),mp.appendChild(t);const n=await tc("contracts");ep.displayOwns(t,n,e)},bp=async e=>{const t=await tc("contracts");for(const n in t)"nft"==t[n][2]&&(console.log("Check Type:"+t[n][0]),lc.getToken("creator",t[n][0],"").then((s=>{console.log("setOwnTokenContracts checkCreator :"+t[n]),console.dir("creator: "+s),console.dir("EOA: "+A.params[2]),s==A.params[2]&&ep.displayTokenContracts([t[n]],e)})))};qc.containsBrowserName("mobile")&&(document.querySelector("html").style.fontSize="30px"),(()=>{const e=A.params,t=e[1],n=e[2],s=e[3],r=e[4],a=e[5];""==t?(async()=>{mp.appendChild(await op.getHome()),await op.getHomeContents(),mp.appendChild(await op.getItems()),mp.appendChild(await op.getGallarys())})():"contents"===t&&n&&s?gp():"contents"===t&&n&&!s?async function(e){ap.getMdDir(e)}(n):"contents"===t?(async()=>{ap.getMdSiteMap()})():"contract1"===t?(async()=>{await ep.displayManagedData("contracts","CONTRACTS",(e=>1==e[3]))})():"creators"===t&&n?yp():"creators"===t?(async()=>{await ep.displayManagedData("creators","CREATORS",!1)})():"article"===t?gp():"donate"===t?async function(e){const t=await tc("creators"),n=await qc.checkBalance(),s=document.createElement("div");s.classList.add("calcratorArea"),mp.appendChild(s);for(const e in t)if(t[e][0]==n.eoa){const e=document.createElement("div");e.classList.add("donateArea"),mp.appendChild(e),console.dir(n),ep.creatorDonateList(e,n.eoa)}const r=document.createElement("div");r.classList.add("donateArea"),mp.appendChild(r);const a=await nc("donate"),i=document.createElement("h2");i.innerHTML="Donation",i.appendChild(Nc.span(" CA: ")),i.appendChild(Nc.eoa(a)),r.appendChild(i);const o=document.createElement("div");o.classList.add("creatorDonateHistory"),r.appendChild(o);const c=await fc("getDonationHistory",a);for(let e=c.length-1;e>=0;e--){const t=c[e],n=document.createElement("p");n.appendChild(Nc.span(qc.formatUnixTime(t[1]))),n.appendChild(Nc.donateDetail(t[2])),n.appendChild(Nc.span(qc.waiToEth(t[0])+" "+l)),o.appendChild(n)}const u=await hc("allTotalUsed",a),d=await hc("allTotalDonation",a),p=document.createElement("div");if(r.appendChild(p),null!=n.eoa){const t=await fc("balance",a,e),n=await fc("usedpoints",a,e),s=await fc("totaldonations",a,e);s>0&&(p.innerHTML+="<p>Total donations : "+s+" D-BIZ</p>"),n>0&&(p.innerHTML+="<p>Used points : "+n+" D-BIZ</p>"),t>0&&(p.innerHTML+="<p>Balance : "+t+" D-BIZ</p>")}d>0&&(p.innerHTML+="<p>Total donation (All dao) : "+d+" D-BIZ</p>"),u>0&&(p.innerHTML+="<p>Total used point (All dao) : "+u+" D-BIZ</p>"),r.appendChild(p)}(e):"admins"===t&&n&&s&&r&&a?hp(n,s,r,a):"admins"===t&&n&&s&&r?pp(n,s,r):"admins"===t&&n&&s?dp(n,s):"admins"===t&&n?yp():"admins"===t?(async()=>{await ep.displayManagedData("admins","Admins",!1)})():"account"===t&&n?(async e=>{const t=document.createElement("div");t.classList.add("ownerArea"),mp.appendChild(t);const n=document.createElement("h2");n.textContent="Owner Info",t.appendChild(n);const s=await nu.checkOwner(e);fp.showAccount(e,s,t);const r=(await qc.checkBalance()).eoa,a=await qc.getUserByEoa(r);if(console.log("Roles Checkers"),console.dir(a.discordUser.Roles),r==s||a.discordUser.Roles.includes("Soul Binder")){n.textContent="SBT Mint for TBA",console.log("This tba ca:"+e),console.log("this tba owner:"+s),console.log("minter eoa:"+r);const t=document.createElement("div");t.classList.add("mintableArea"),t.innerHTML="<span><div class='minispinner'></div>mintable contract loading...</span>",t.style.display="none",mp.appendChild(t),ep.setMintableForm(t,e)}wp(e)})(n):"account"===t?(async e=>{const t=await tc("contracts");ep.displayAssets(t,(e=>1==e[3]))})():"tokens"===t&&n&&"mint"==s?(async()=>{const e=A.params,t=document.createElement("div");mp.appendChild(t),ep.displayMintUI(t,e)})():"tokens"===t&&n&&s?(async()=>{const e=A.params,t=await nu.getTbaInfo(e[2],e[3]),n=await nu.checkOwner(t),s=document.createElement("div");s.classList.add("nftArea"),mp.appendChild(s),ep.displayToken(s,e[2],e[3],t,n),n&&wp(t)})():"tokens"===t&&n&&!s?(async()=>{const e=document.createElement("div");e.classList.add("tokensList"),mp.appendChild(e),e.innerHTML="";const t=document.createElement("div");e.appendChild(t);const n=document.createElement("h3");t.appendChild(n);var s=document.createElement("a");s.href="/tokens/",s.textContent="NftCollection",n.appendChild(s);const r=document.createElement("span");r.textContent=" | ",n.appendChild(r);const a=document.createElement("span");a.textContent=await lc.getToken("name",A.params[2],""),n.appendChild(a);const i=await lc.getToken("symbol",A.params[2],""),o=await qc.checkBalance(),l=await qc.getUserByEoa(o.eoa);if("SBT"!=i||l.discordUser.Roles.includes("Soul Binder")){const e=document.createElement("span");n.appendChild(e),ep.createMintLinkElm(A.params[2],e)}ep.displayTokens(e,A.params[2],!1)})():"tokens"===t?(async e=>{const t=await tc("contracts");ep.displayTokenContracts(t,(e=>1==e[3]))})():"meta"===t?async function(){await wu.getUI()}():"permaweb"===t?async function(){null!=(await qc.checkBalance()).eoa?await iu.getUI():ep.isNotConnect()}():"regist"===t?async function(){null!=(await qc.checkBalance()).eoa?await Ac.getUI():ep.isNotConnect()}():"editor"===t?async function(){null!=(await qc.checkBalance()).eoa?await Eu.getUI():ep.isNotConnect()}():"disconnect"===t?async function(){null!=(await qc.checkBalance()).eoa?await Tu():ep.isNotConnect()}():"membersbt"===t&&async function(){null!=(await qc.checkBalance()).eoa?await xu.getUI():ep.isNotConnect()}()})(),qc.checkMetamask()})();